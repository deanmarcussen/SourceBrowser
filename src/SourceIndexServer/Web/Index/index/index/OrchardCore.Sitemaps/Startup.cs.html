<!DOCTYPE html>
<html><head><title>Startup.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(245);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#OrchardCore.Sitemaps/Startup.cs" target="_top">Startup.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#OrchardCore.Sitemaps" target="_top">src\OrchardCore.Modules\OrchardCore.Sitemaps\OrchardCore.Sitemaps.csproj</a> (OrchardCore.Sitemaps)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">AspNetCore</span>.<span class="i n">Builder</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">AspNetCore</span>.<span class="i n">Routing</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">DependencyInjection</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">Options</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Admin</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">BackgroundTasks</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">ContentManagement</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">ContentManagement</span>.<span class="i">Display</span>.<span class="i">ContentDisplay</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Data</span>.<span class="i n">Migration</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">DisplayManagement</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">DisplayManagement</span>.<span class="i">Handlers</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Entities</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Modules</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Mvc</span>.<span class="i">Core</span>.<span class="i">Utilities</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Navigation</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Routing</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Security</span>.<span class="i">Permissions</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Sitemaps</span>.<span class="i n">Builders</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Sitemaps</span>.<span class="i n">Cache</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Sitemaps</span>.<span class="i n">Controllers</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Sitemaps</span>.<span class="i n">Drivers</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Sitemaps</span>.<span class="i n">Handlers</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Sitemaps</span>.<span class="i n">Models</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Sitemaps</span>.<span class="i n">Routing</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Sitemaps</span>.<span class="i n">Services</span>;
 
<b>namespace</b> <span class="i n">OrchardCore</span>.<span class="i n">Sitemaps</span>
{
    <b>public class</b> <a id="27e383014e4b4e2f" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">Startup</a> : <span class="i">StartupBase</span>
    {
        <b>private readonly</b> <a href="/OrchardCore.Admin.Abstractions/A.html#ce010d95061d963d" class="t t">AdminOptions</a> <a id="066eb197369967b6" href="R/066eb197369967b6.html" target="n" data-glyph="46,1" class="i field">_adminOptions</a>;
 
        <b>public</b> <a id="aa2f022568e82ad1" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">Startup</a>(<span class="t t">IOptions</span>&lt;<a href="/OrchardCore.Admin.Abstractions/A.html#ce010d95061d963d" class="t t">AdminOptions</a>&gt; <span id="r0 rd" class="r0 r">adminOptions</span>)
        {
            <a href="#066eb197369967b6" class="i field">_adminOptions</a> = <span class="r0 r">adminOptions</span>.<span class="i property">Value</span>;
        }
 
        <b>public override void</b> <a id="ca1597fa0a8e192b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ConfigureServices</a>(<span class="t t">IServiceCollection</span> <span id="r1 rd" class="r1 r">services</span>)
        {
            <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<span class="i">IDataMigration</span>, <a href="Migrations.cs.html#c61bd1f3c9e33766" class="t t">Migrations</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Navigation.Core/A.html#9919a71a2815e0c1" class="t t">INavigationProvider</a>, <a href="AdminMenu.cs.html#75d6ea97b40cee8d" class="t t">AdminMenu</a>&gt;();
            <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<span class="i">IPermissionProvider</span>, <a href="Permissions.cs.html#4ab0593114f04fe5" class="t t">Permissions</a>&gt;();
 
            <span class="r1 r">services</span>.<span class="i">Configure</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#f25f39f8f989b5e7" class="t t">SitemapsOptions</a>&gt;(<span id="r2 rd" class="r2 r">options</span> =&gt;
            {
                <b>if</b> (<span class="r2 r">options</span>.<a href="/OrchardCore.Sitemaps.Abstractions/A.html#2c5304926b7560fa" class="i property">GlobalRouteValues</a>.<span class="i">Count</span> == 0)
                {
                    <span class="r2 r">options</span>.<a href="/OrchardCore.Sitemaps.Abstractions/A.html#2c5304926b7560fa" class="i property">GlobalRouteValues</a> = <b>new</b> <span class="t constructor">RouteValueDictionary</span>
                    {
                        {<span class="s">&quot;Area&quot;</span>, <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>},
                        {<span class="s">&quot;Controller&quot;</span>, <span class="s">&quot;Sitemap&quot;</span>},
                        {<span class="s">&quot;Action&quot;</span>, <span class="s">&quot;Index&quot;</span>}
                    };
 
                    <span class="r2 r">options</span>.<a href="/OrchardCore.Sitemaps.Abstractions/A.html#54c2fcf796590ace" class="i property">SitemapIdKey</a> = <span class="s">&quot;sitemapId&quot;</span>;
                }
            });
 
            <span class="r1 r">services</span>.<span class="i method">AddSingleton</span>&lt;<a href="Routing/SitemapEntries.cs.html#fbcb1097e5166b6a" class="t t">SitemapEntries</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddSingleton</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#bd035e0cea359d06" class="t t">ISitemapManager</a>, <a href="Services/SitemapManager.cs.html#59f71f71472229e9" class="t t">SitemapManager</a>&gt;();
            <span class="r1 r">services</span>.<span class="i">AddSingleton</span>&lt;<span class="i">IShellRouteValuesAddressScheme</span>, <a href="Routing/SitemapValuesAddressScheme.cs.html#ccc349b1347b88c5" class="t t">SitemapValuesAddressScheme</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddSingleton</span>&lt;<a href="Routing/SitemapRouteTransformer.cs.html#75bea9db6c39eb48" class="t t">SitemapRouteTransformer</a>&gt;();
 
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#93be7514218555b2" class="t t">ISitemapIdGenerator</a>, <a href="Services/SitemapIdGenerator.cs.html#721c92465b53f52e" class="t t">SitemapIdGenerator</a>&gt;();
            <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<span class="i">IPermissionProvider</span>, <a href="Permissions.cs.html#4ab0593114f04fe5" class="t t">Permissions</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#c6144b2cca548873" class="t t">ISitemapHelperService</a>, <a href="Services/SitemapHelperService.cs.html#67695221f74b4475" class="t t">SitemapHelperService</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<span class="i">IDisplayManager</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#33ed796289e6f6e8" class="t t">SitemapSource</a>&gt;, <span class="i">DisplayManager</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#33ed796289e6f6e8" class="t t">SitemapSource</a>&gt;&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#4edfde6662e99200" class="t t">ISitemapBuilder</a>, <a href="Builders/DefaultSitemapBuilder.cs.html#dca74b2241c53a5b" class="t t">DefaultSitemapBuilder</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#3aa952862ae28df0" class="t t">ISitemapTypeBuilder</a>, <a href="Builders/SitemapTypeBuilder.cs.html#989069c83a9cc883" class="t t">SitemapTypeBuilder</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#28d2d5c344f8d8b8" class="t t">ISitemapCacheProvider</a>, <a href="Cache/DefaultSitemapCacheProvider.cs.html#b59c1121a826cb90" class="t t">DefaultSitemapCacheProvider</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#5b8a5629dc623639" class="t t">ISitemapUpdateHandler</a>, <a href="Handlers/DefaultSitemapUpdateHandler.cs.html#3f98523724a66eb6" class="t t">DefaultSitemapUpdateHandler</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#ce5ed6e205a18a01" class="t t">ISitemapTypeUpdateHandler</a>, <a href="Handlers/SitemapTypeUpdateHandler.cs.html#99beef910ec875b3" class="t t">SitemapTypeUpdateHandler</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#3aa952862ae28df0" class="t t">ISitemapTypeBuilder</a>, <a href="Builders/SitemapIndexTypeBuilder.cs.html#678e03ded4afec13" class="t t">SitemapIndexTypeBuilder</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#ce5ed6e205a18a01" class="t t">ISitemapTypeUpdateHandler</a>, <a href="Handlers/SitemapIndexTypeUpdateHandler.cs.html#9958d78d4090ca73" class="t t">SitemapIndexTypeUpdateHandler</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#517530660a65e3ec" class="t t">ISitemapModifiedDateProvider</a>, <a href="Builders/DefaultSitemapModifiedDateProvider.cs.html#7d6254bfca4977f5" class="t t">DefaultSitemapModifiedDateProvider</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#91e8da655b1749c6" class="t t">IRouteableContentTypeCoordinator</a>, <a href="Services/DefaultRouteableContentTypeCoordinator.cs.html#01550cf5c0d2819f" class="t t">DefaultRouteableContentTypeCoordinator</a>&gt;();
 
            <span class="c">// Sitemap Part.</span>
            <span class="r1 r">services</span>.<a href="/OrchardCore.ContentManagement.Abstractions/A.html#0019d3c1a0518f06" class="i method">AddContentPart</a>&lt;<a href="Models/SitemapPart.cs.html#48a8a2867eeec371" class="t t">SitemapPart</a>&gt;()
                .<span class="i">UseDisplayDriver</span>&lt;<a href="Drivers/SitemapPartDisplayDriver.cs.html#a2f909062833a571" class="t t">SitemapPartDisplayDriver</a>&gt;()
                .<span class="i">AddHandler</span>&lt;<a href="Handlers/SitemapPartHandler.cs.html#ab9e549d4f8224fe" class="t t">SitemapPartHandler</a>&gt;();
 
            <span class="c">// Custom sitemap path.</span>
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#5174b3263a00a3e1" class="t t">ISitemapSourceBuilder</a>, <a href="Builders/CustomPathSitemapSourceBuilder.cs.html#b6606bf201cb35ec" class="t t">CustomPathSitemapSourceBuilder</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#a338a4018237a902" class="t t">ISitemapSourceUpdateHandler</a>, <a href="Handlers/CustomPathSitemapSourceUpdateHandler.cs.html#9e0f30900638238f" class="t t">CustomPathSitemapSourceUpdateHandler</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#1e8c37bbcc2362e1" class="t t">ISitemapSourceModifiedDateProvider</a>, <a href="Builders/CustomPathSitemapSourceModifiedDateProvider.cs.html#4fbaf274746356c6" class="t t">CustomPathSitemapSourceModifiedDateProvider</a>&gt;();
            <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<span class="i">IDisplayDriver</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#33ed796289e6f6e8" class="t t">SitemapSource</a>&gt;, <a href="Drivers/CustomPathSitemapSourceDriver.cs.html#7e9cef660644d8b4" class="t t">CustomPathSitemapSourceDriver</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#f7708ee9378bd361" class="t t">ISitemapSourceFactory</a>, <a href="/OrchardCore.Sitemaps.Abstractions/A.html#7cbb51377d7df588" class="t t">SitemapSourceFactory</a>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#067ed82a0aae8777" class="t t">CustomPathSitemapSource</a>&gt;&gt;();
        }
 
        <b>public override void</b> <a id="7649af79a96f1c3a" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Configure</a>(<span class="t t">IApplicationBuilder</span> <span id="r3 rd" class="r3 r">app</span>, <span class="t t">IEndpointRouteBuilder</span> <span id="r4 rd" class="r4 r">routes</span>, <span class="t t">IServiceProvider</span> <span id="r5 rd" class="r5 r">serviceProvider</span>)
        {
            <b>var</b> <span id="r6 rd" class="r6 r">adminControllerName</span> = <b>typeof</b>(<a href="Controllers/AdminController.cs.html#61127a478794ee09" class="t t">AdminController</a>).<span class="i">ControllerName</span>();
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r7 r">name</span>: <span class="s">&quot;SitemapsList&quot;</span>,
                <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/Sitemaps/List&quot;</span>,
                <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r6 r">adminControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/AdminController.cs.html#61127a478794ee09" class="t t">AdminController</a>.<span class="i">List</span>) }
            );
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r7 r">name</span>: <span class="s">&quot;SitemapsDisplay&quot;</span>,
                <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/Sitemaps/Display/{id}&quot;</span>,
                <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r6 r">adminControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/AdminController.cs.html#61127a478794ee09" class="t t">AdminController</a>.<span class="i">Display</span>) }
            );
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r7 r">name</span>: <span class="s">&quot;SitemapsCreate&quot;</span>,
                <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/Sitemaps/Create&quot;</span>,
                <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r6 r">adminControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/AdminController.cs.html#61127a478794ee09" class="t t">AdminController</a>.<span class="i">Create</span>) }
            );
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r7 r">name</span>: <span class="s">&quot;SitemapsEdit&quot;</span>,
                <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/Sitemaps/Edit/{sitemapId}&quot;</span>,
                <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r6 r">adminControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/AdminController.cs.html#61127a478794ee09" class="t t">AdminController</a>.<span class="i">Edit</span>) }
            );
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r7 r">name</span>: <span class="s">&quot;SitemapsDelete&quot;</span>,
                <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/Sitemaps/Delete/{sitemapId}&quot;</span>,
                <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r6 r">adminControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/AdminController.cs.html#61127a478794ee09" class="t t">AdminController</a>.<span class="i">Delete</span>) }
            );
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r7 r">name</span>: <span class="s">&quot;SitemapsToggle&quot;</span>,
                <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/Sitemaps/Toggle/{sitemapId}&quot;</span>,
                <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r6 r">adminControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/AdminController.cs.html#61127a478794ee09" class="t t">AdminController</a>.<span class="i">Toggle</span>) }
            );
 
            <b>var</b> <span id="r11 rd" class="r11 r">sitemapIndexController</span> = <b>typeof</b>(<a href="Controllers/SitemapIndexController.cs.html#54203adec14b6f63" class="t t">SitemapIndexController</a>).<span class="i">ControllerName</span>();
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                 <span class="r7 r">name</span>: <span class="s">&quot;SitemapIndexesList&quot;</span>,
                 <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                 <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/SitemapIndexes/List&quot;</span>,
                 <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r11 r">sitemapIndexController</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/SitemapIndexController.cs.html#54203adec14b6f63" class="t t">SitemapIndexController</a>.<span class="i">List</span>) }
            );
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                 <span class="r7 r">name</span>: <span class="s">&quot;SitemapIndexesCreate&quot;</span>,
                 <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                 <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/SitemapIndexes/Create&quot;</span>,
                 <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r11 r">sitemapIndexController</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/SitemapIndexController.cs.html#54203adec14b6f63" class="t t">SitemapIndexController</a>.<span class="i">Create</span>) }
            );
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                 <span class="r7 r">name</span>: <span class="s">&quot;SitemapIndexesEdit&quot;</span>,
                 <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                 <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/SitemapIndexes/Edit/{sitemapId}&quot;</span>,
                 <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r11 r">sitemapIndexController</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/SitemapIndexController.cs.html#54203adec14b6f63" class="t t">SitemapIndexController</a>.<span class="i">Edit</span>) }
            );
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                 <span class="r7 r">name</span>: <span class="s">&quot;SitemapIndexesDelete&quot;</span>,
                 <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                 <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/SitemapIndexes/Delete/{sitemapId}&quot;</span>,
                 <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r11 r">sitemapIndexController</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/SitemapIndexController.cs.html#54203adec14b6f63" class="t t">SitemapIndexController</a>.<span class="i">Delete</span>) }
            );
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                 <span class="r7 r">name</span>: <span class="s">&quot;SitemapIndexesToggle&quot;</span>,
                 <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                 <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/SitemapIndexes/Toggle/{sitemapId}&quot;</span>,
                 <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r11 r">sitemapIndexController</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/SitemapIndexController.cs.html#54203adec14b6f63" class="t t">SitemapIndexController</a>.<span class="i">Toggle</span>) }
            );
 
            <b>var</b> <span id="r12 rd" class="r12 r">sourceController</span> = <b>typeof</b>(<a href="Controllers/SourceController.cs.html#96db4ffda7b2db55" class="t t">SourceController</a>).<span class="i">ControllerName</span>();
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                 <span class="r7 r">name</span>: <span class="s">&quot;SitemapsSourceCreate&quot;</span>,
                 <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                 <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/SitemapSource/Create/{sitemapId}/{sourceType}&quot;</span>,
                 <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r12 r">sourceController</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/SourceController.cs.html#96db4ffda7b2db55" class="t t">SourceController</a>.<span class="i">Create</span>) }
            );
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                 <span class="r7 r">name</span>: <span class="s">&quot;SitemapsSourceEdit&quot;</span>,
                 <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                 <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/SitemapSource/Edit/{sitemapId}/{sourceId}&quot;</span>,
                 <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r12 r">sourceController</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/SourceController.cs.html#96db4ffda7b2db55" class="t t">SourceController</a>.<span class="i">Edit</span>) }
            );
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                 <span class="r7 r">name</span>: <span class="s">&quot;SitemapsSourceDelete&quot;</span>,
                 <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                 <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/SitemapSource/Delete/{sitemapId}/{sourceId}&quot;</span>,
                 <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r12 r">sourceController</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/SourceController.cs.html#96db4ffda7b2db55" class="t t">SourceController</a>.<span class="i">Delete</span>) }
            );
 
 
            <b>var</b> <span id="r13 rd" class="r13 r">sitemapCacheController</span> = <b>typeof</b>(<a href="Controllers/SitemapCacheController.cs.html#372ebdef4f31d783" class="t t">SitemapCacheController</a>).<span class="i">ControllerName</span>();
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                 <span class="r7 r">name</span>: <span class="s">&quot;SitemapsCacheList&quot;</span>,
                 <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                 <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/SitemapsCache/List&quot;</span>,
                 <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r13 r">sitemapCacheController</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/SitemapCacheController.cs.html#372ebdef4f31d783" class="t t">SitemapCacheController</a>.<span class="i">List</span>) }
            );
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                 <span class="r7 r">name</span>: <span class="s">&quot;SitemapsCachePurgeAll&quot;</span>,
                 <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                 <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/SitemapsCache/PurgeAll&quot;</span>,
                 <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r13 r">sitemapCacheController</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/SitemapCacheController.cs.html#372ebdef4f31d783" class="t t">SitemapCacheController</a>.<span class="i">PurgeAll</span>) }
            );
 
            <span class="r4 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                 <span class="r7 r">name</span>: <span class="s">&quot;SitemapsCachePurge&quot;</span>,
                 <span class="r8 r">areaName</span>: <span class="s">&quot;OrchardCore.Sitemaps&quot;</span>,
                 <span class="r9 r">pattern</span>: <a href="#066eb197369967b6" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/SitemapsCache/Purge/{cacheFileName}&quot;</span>,
                 <span class="r10 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r13 r">sitemapCacheController</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/SitemapCacheController.cs.html#372ebdef4f31d783" class="t t">SitemapCacheController</a>.<span class="i">Purge</span>) }
            );
 
            <span class="r4 r">routes</span>.<span class="i method">MapDynamicControllerRoute</span>&lt;<a href="Routing/SitemapRouteTransformer.cs.html#75bea9db6c39eb48" class="t t">SitemapRouteTransformer</a>&gt;(<span class="s">&quot;/{**sitemap}&quot;</span>);
        }
    }
 
    [<span class="i">Feature</span>(<span class="s">&quot;OrchardCore.Sitemaps.RazorPages&quot;</span>)]
    <b>public class</b> <a id="6b7d00535838361f" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="20516a348f088ba8">SitemapsRazorPagesStartup</span></a> : <span class="i">StartupBase</span>
    {
        <b>public override void</b> <a id="37eb03452af4e039" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ConfigureServices</a>(<span class="t t">IServiceCollection</span> <span id="r14 rd" class="r14 r">services</span>)
        {
            <span class="r14 r">services</span>.<span class="i method">AddOptions</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#8dd6b1d3129af685" class="t t">SitemapsRazorPagesOptions</a>&gt;();
            <span class="r14 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Sitemaps.Abstractions/A.html#d079d511d11bcf42" class="t t">IRouteableContentTypeProvider</a>, <a href="Services/RazorPagesContentTypeProvider.cs.html#81ece459fa297223" class="t t">RazorPagesContentTypeProvider</a>&gt;();
        }
    }
 
    [<span class="i">Feature</span>(<span class="s">&quot;OrchardCore.Sitemaps.Cleanup&quot;</span>)]
    <b>public class</b> <a id="a6dac9a07580f7d8" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="84a1916fd95ffdb7">SitemapsCleanupStartup</span></a> : <span class="i">StartupBase</span>
    {
        <b>public override void</b> <a id="2d995ba27216d000" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ConfigureServices</a>(<span class="t t">IServiceCollection</span> <span id="r15 rd" class="r15 r">services</span>)
        {
            <span class="r15 r">services</span>.<span class="i">AddSingleton</span>&lt;<span class="i">IBackgroundTask</span>, <a href="Cache/SitemapCacheBackgroundTask.cs.html#81e852b8d7ca63e8" class="t t">SitemapCacheBackgroundTask</a>&gt;();
        }
    }
}
</pre></td></tr></table></div></body></html>
