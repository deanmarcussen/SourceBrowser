<!DOCTYPE html>
<html><head><title>ShapeAlterationBuilder.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(231);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#OrchardCore.DisplayManagement/Descriptors/ShapeAlterationBuilder.cs" target="_top">Descriptors\ShapeAlterationBuilder.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#OrchardCore.DisplayManagement" target="_top">src\OrchardCore\OrchardCore.DisplayManagement\OrchardCore.DisplayManagement.csproj</a> (OrchardCore.DisplayManagement)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">AspNetCore</span>.<span class="i n">Html</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Implementation</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Environment</span>.<span class="i">Extensions</span>.<span class="i">Features</span>;
 
<b>namespace</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Descriptors</span>
{
    <b>public class</b> <a id="a9b578011c2fdd31" href="../R/a9b578011c2fdd31.html" target="n" data-glyph="0,0" class="t t">ShapeAlterationBuilder</a>
    {
        <b>private</b> <span class="i">IFeatureInfo</span> <a id="a77a10cf9051698e" href="../R/a77a10cf9051698e.html" target="n" data-glyph="46,1" class="i field">_feature</a>;
        <b>private readonly string</b> <a id="bd2a1d3323f922de" href="../R/bd2a1d3323f922de.html" target="n" data-glyph="46,1" class="i field">_shapeType</a>;
        <b>private readonly string</b> <a id="8ec1e01be2409c71" href="../R/8ec1e01be2409c71.html" target="n" data-glyph="46,1" class="i field">_bindingName</a>;
        <b>private readonly</b> <a href="@1@System.Runtime/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="@1@System.Runtime/A.html#486d58da4553e12d" class="t t">Action</a>&lt;<a href="ShapeDescriptor.cs.html#46b3589c7e85dda7" class="t t">ShapeDescriptor</a>&gt;&gt; <a id="95b11f2d7c9244a1" href="../R/95b11f2d7c9244a1.html" target="n" data-glyph="46,1" class="i field">_configurations</a> = <b>new</b> <span class="t constructor">List</span>&lt;<a href="@1@System.Runtime/A.html#486d58da4553e12d" class="t t">Action</a>&lt;<a href="ShapeDescriptor.cs.html#46b3589c7e85dda7" class="t t">ShapeDescriptor</a>&gt;&gt;();
 
        <b>public</b> <a id="464df6dc135ebdb1" href="../R/464df6dc135ebdb1.html" target="n" data-glyph="72,1" class="t constructor">ShapeAlterationBuilder</a>(<span class="i">IFeatureInfo</span> <span id="r0 rd" class="r0 r">feature</span>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r1 rd" class="r1 r">shapeType</span>)
        {
            <a href="#a77a10cf9051698e" class="i field">_feature</a> = <span class="r0 r">feature</span>;
            <a href="#8ec1e01be2409c71" class="i field">_bindingName</a> = <span class="r1 r">shapeType</span>;
            <a href="@1@System.Runtime/A.html#225942ed7b7a3252" class="k">var</a> <span id="r2 rd" class="r2 r">delimiterIndex</span> = <span class="r1 r">shapeType</span>.<a href="@1@System.Runtime/A.html#7d6aed52d875ec59" class="i method">IndexOf</a>(<span class="s">&quot;__&quot;</span>, <a href="@1@System.Runtime/A.html#702797def97ecb7c" class="t t">StringComparison</a>.<a href="@1@System.Runtime/A.html#87891a6d28c64c9b" class="i field">Ordinal</a>);
 
            <b>if</b> (<span class="r2 r">delimiterIndex</span> &lt; 0)
            {
                <a href="#bd2a1d3323f922de" class="i field">_shapeType</a> = <span class="r1 r">shapeType</span>;
            }
            <b>else</b>
            {
                <a href="#bd2a1d3323f922de" class="i field">_shapeType</a> = <span class="r1 r">shapeType</span>.<a href="@1@System.Runtime/A.html#8124961f027d9ac9" class="i method">Substring</a>(0, <span class="r2 r">delimiterIndex</span>);
            }
        }
 
        <b>public</b> <a href="#a9b578011c2fdd31" class="t t">ShapeAlterationBuilder</a> <a id="38f17ced3e75bb85" href="../R/38f17ced3e75bb85.html" target="n" data-glyph="72,1" class="i method">From</a>(<span class="i">IFeatureInfo</span> <span id="r3 rd" class="r3 r">feature</span>)
        {
            <a href="#a77a10cf9051698e" class="i field">_feature</a> = <span class="r3 r">feature</span>;
            <b>return</b> <a href="#a9b578011c2fdd31" class="k">this</a>;
        }
 
        <b>public</b> <a href="#a9b578011c2fdd31" class="t t">ShapeAlterationBuilder</a> <a id="8073e9b8d75cb4df" href="../R/8073e9b8d75cb4df.html" target="n" data-glyph="72,1" class="i method">Configure</a>(<a href="@1@System.Runtime/A.html#486d58da4553e12d" class="t t">Action</a>&lt;<a href="ShapeDescriptor.cs.html#46b3589c7e85dda7" class="t t">ShapeDescriptor</a>&gt; <span id="r4 rd" class="r4 r">action</span>)
        {
            <a href="#95b11f2d7c9244a1" class="i field">_configurations</a>.<a href="@1@System.Runtime/A.html#a9319db8c62ae453" class="i method">Add</a>(<span class="r4 r">action</span>);
            <b>return</b> <a href="#a9b578011c2fdd31" class="k">this</a>;
        }
 
        <b>public</b> <a href="#a9b578011c2fdd31" class="t t">ShapeAlterationBuilder</a> <a id="08159412e05b71a7" href="../R/08159412e05b71a7.html" target="n" data-glyph="72,1" class="i method">BoundAs</a>(<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r5 rd" class="r5 r">bindingSource</span>, <a href="@1@System.Runtime/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="../Implementation/DisplayContext.cs.html#dc4c3fe34aa709f5" class="t t">DisplayContext</a>, <a href="@1@System.Runtime/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<span class="t t">IHtmlContent</span>&gt;&gt; <span id="r6 rd" class="r6 r">bindingDelegate</span>)
        {
            <span class="c">// schedule the configuration</span>
            <b>return</b> <a href="#8073e9b8d75cb4df" class="i method">Configure</a>(<span id="r7 rd" class="r7 r">descriptor</span> =&gt;
            {
                <a href="ShapeDescriptor.cs.html#5dd61aa084d14a8e" class="k">var</a> <span id="r8 rd" class="r8 r">binding</span> = <b>new</b> <a href="ShapeDescriptor.cs.html#5dd61aa084d14a8e" class="t constructor">ShapeBinding</a>
                {
                    <a href="ShapeDescriptor.cs.html#2e418e8409f7c38b" class="i property">BindingName</a> = <a href="#8ec1e01be2409c71" class="i field">_bindingName</a>,
                    <a href="ShapeDescriptor.cs.html#a97a764e41137663" class="i property">BindingSource</a> = <span class="r5 r">bindingSource</span>,
                };
 
                <span class="r8 r">binding</span>.<a href="ShapeDescriptor.cs.html#3736a5c0cbe2a35e" class="i property">BindingAsync</a> = <span class="r6 r">bindingDelegate</span>;
 
                <span class="c">// ShapeDescriptor.Bindings is a case insensitive dictionary</span>
                <span class="r7 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#be90628625beb4a1" class="i property">Bindings</a><a href="@1@System.Runtime/A.html#86884956b17e491a">[</a><a href="#8ec1e01be2409c71" class="i field">_bindingName</a>] = <span class="r8 r">binding</span>;
                <span class="r7 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#51ff4acfb3cbacd6" class="i property">BindingSources</a>.<a href="@1@System.Runtime/A.html#a9319db8c62ae453" class="i method">Add</a>(<span class="r5 r">bindingSource</span>);
            });
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called when the shape is being created.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="#a9b578011c2fdd31" class="t t">ShapeAlterationBuilder</a> <a id="d164d462c9ead0d3" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">OnCreating</a>(<a href="@1@System.Runtime/A.html#486d58da4553e12d" class="t t">Action</a>&lt;<a href="../Implementation/IShapeFactoryEvents.cs.html#e184f076ece2b759" class="t t">ShapeCreatingContext</a>&gt; <span id="r9 rd" class="r9 r">action</span>)
        {
            <b>return</b> <a href="#838f20ec50d8b0e7" class="i method">OnCreating</a>(<span id="r10 rd" class="r10 r">ctx</span> =&gt;
            {
                <span class="r9 r">action</span>(<span class="r10 r">ctx</span>);
                <b>return</b> <a href="@1@System.Runtime/A.html#045a746eb48cbaa9" class="t t">Task</a>.<a href="@1@System.Runtime/A.html#66f1c3e3e272f591" class="i property">CompletedTask</a>;
            });
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called when the shape is being created.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="#a9b578011c2fdd31" class="t t">ShapeAlterationBuilder</a> <a id="838f20ec50d8b0e7" href="../R/838f20ec50d8b0e7.html" target="n" data-glyph="72,1" class="i method">OnCreating</a>(<a href="@1@System.Runtime/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="../Implementation/IShapeFactoryEvents.cs.html#e184f076ece2b759" class="t t">ShapeCreatingContext</a>, <a href="@1@System.Runtime/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt; <span id="r11 rd" class="r11 r">actionAsync</span>)
        {
            <b>return</b> <a href="#8073e9b8d75cb4df" class="i method">Configure</a>(<span id="r12 rd" class="r12 r">descriptor</span> =&gt;
            {
                <a href="@1@System.Runtime/A.html#3acf01620172c7f0" class="k">var</a> <span id="r13 rd" class="r13 r">existing</span> = <span class="r12 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#4e214a2715cf0203" class="i property">CreatingAsync</a> ?? <span class="t t">Enumerable</span>.<span class="i method">Empty</span>&lt;<a href="@1@System.Runtime/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="../Implementation/IShapeFactoryEvents.cs.html#e184f076ece2b759" class="t t">ShapeCreatingContext</a>, <a href="@1@System.Runtime/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt;&gt;();
                <span class="r12 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#4e214a2715cf0203" class="i property">CreatingAsync</a> = <span class="r13 r">existing</span>.<span class="i method">Concat</span>(<b>new</b>[] { <span class="r11 r">actionAsync</span> });
            });
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called when the shape is created.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="#a9b578011c2fdd31" class="t t">ShapeAlterationBuilder</a> <a id="aedc6e730779be0c" href="../R/aedc6e730779be0c.html" target="n" data-glyph="72,1" class="i method">OnCreated</a>(<a href="@1@System.Runtime/A.html#486d58da4553e12d" class="t t">Action</a>&lt;<a href="../Implementation/IShapeFactoryEvents.cs.html#7e7c2294edc49faf" class="t t">ShapeCreatedContext</a>&gt; <span id="r14 rd" class="r14 r">action</span>)
        {
            <b>return</b> <a href="#884accb9b2454436" class="i method">OnCreated</a>(<span id="r15 rd" class="r15 r">ctx</span> =&gt;
            {
                <span class="r14 r">action</span>(<span class="r15 r">ctx</span>);
                <b>return</b> <a href="@1@System.Runtime/A.html#045a746eb48cbaa9" class="t t">Task</a>.<a href="@1@System.Runtime/A.html#66f1c3e3e272f591" class="i property">CompletedTask</a>;
            });
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called when the shape is being created.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="#a9b578011c2fdd31" class="t t">ShapeAlterationBuilder</a> <a id="884accb9b2454436" href="../R/884accb9b2454436.html" target="n" data-glyph="72,1" class="i method">OnCreated</a>(<a href="@1@System.Runtime/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="../Implementation/IShapeFactoryEvents.cs.html#7e7c2294edc49faf" class="t t">ShapeCreatedContext</a>, <a href="@1@System.Runtime/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt; <span id="r16 rd" class="r16 r">actionAsync</span>)
        {
            <b>return</b> <a href="#8073e9b8d75cb4df" class="i method">Configure</a>(<span id="r17 rd" class="r17 r">descriptor</span> =&gt;
            {
                <a href="@1@System.Runtime/A.html#3acf01620172c7f0" class="k">var</a> <span id="r18 rd" class="r18 r">existing</span> = <span class="r17 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#e7715b4f443d318c" class="i property">CreatedAsync</a> ?? <span class="t t">Enumerable</span>.<span class="i method">Empty</span>&lt;<a href="@1@System.Runtime/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="../Implementation/IShapeFactoryEvents.cs.html#7e7c2294edc49faf" class="t t">ShapeCreatedContext</a>, <a href="@1@System.Runtime/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt;&gt;();
                <span class="r17 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#e7715b4f443d318c" class="i property">CreatedAsync</a> = <span class="r18 r">existing</span>.<span class="i method">Concat</span>(<b>new</b>[] { <span class="r16 r">actionAsync</span> });
            });
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called whenever the shape is displayed, even if it&#39;s content is cached.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="#a9b578011c2fdd31" class="t t">ShapeAlterationBuilder</a> <a id="871bc6f8bb66342e" href="../R/871bc6f8bb66342e.html" target="n" data-glyph="72,1" class="i method">OnDisplaying</a>(<a href="@1@System.Runtime/A.html#486d58da4553e12d" class="t t">Action</a>&lt;<a href="../Implementation/ShapeDisplayContext.cs.html#0fe1137e8e1878e1" class="t t">ShapeDisplayContext</a>&gt; <span id="r19 rd" class="r19 r">action</span>)
        {
            <b>return</b> <a href="#1c5781f6a79ddfd1" class="i method">OnDisplaying</a>(<span id="r20 rd" class="r20 r">ctx</span> =&gt;
            {
                <span class="r19 r">action</span>(<span class="r20 r">ctx</span>);
                <b>return</b> <a href="@1@System.Runtime/A.html#045a746eb48cbaa9" class="t t">Task</a>.<a href="@1@System.Runtime/A.html#66f1c3e3e272f591" class="i property">CompletedTask</a>;
            });
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called whenever the shape is displayed, even if it&#39;s content is cached.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="#a9b578011c2fdd31" class="t t">ShapeAlterationBuilder</a> <a id="1c5781f6a79ddfd1" href="../R/1c5781f6a79ddfd1.html" target="n" data-glyph="72,1" class="i method">OnDisplaying</a>(<a href="@1@System.Runtime/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="../Implementation/ShapeDisplayContext.cs.html#0fe1137e8e1878e1" class="t t">ShapeDisplayContext</a>, <a href="@1@System.Runtime/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt; <span id="r21 rd" class="r21 r">actionAsync</span>)
        {
            <b>return</b> <a href="#8073e9b8d75cb4df" class="i method">Configure</a>(<span id="r22 rd" class="r22 r">descriptor</span> =&gt;
            {
                <a href="@1@System.Runtime/A.html#3acf01620172c7f0" class="k">var</a> <span id="r23 rd" class="r23 r">existing</span> = <span class="r22 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#f48f41895bff076c" class="i property">DisplayingAsync</a> ?? <span class="t t">Enumerable</span>.<span class="i method">Empty</span>&lt;<a href="@1@System.Runtime/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="../Implementation/ShapeDisplayContext.cs.html#0fe1137e8e1878e1" class="t t">ShapeDisplayContext</a>, <a href="@1@System.Runtime/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt;&gt;();
                <span class="r22 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#f48f41895bff076c" class="i property">DisplayingAsync</a> = <span class="r23 r">existing</span>.<span class="i method">Concat</span>(<b>new</b>[] { <span class="r21 r">actionAsync</span> });
            });
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called when the shape is actually rendered and state needs to be loaded.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="#a9b578011c2fdd31" class="t t">ShapeAlterationBuilder</a> <a id="d2c583aa3a38197f" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">OnProcessing</a>(<a href="@1@System.Runtime/A.html#486d58da4553e12d" class="t t">Action</a>&lt;<a href="../Implementation/ShapeDisplayContext.cs.html#0fe1137e8e1878e1" class="t t">ShapeDisplayContext</a>&gt; <span id="r24 rd" class="r24 r">action</span>)
        {
            <b>return</b> <a href="#127679b93b8b44c2" class="i method">OnProcessing</a>(<span id="r25 rd" class="r25 r">ctx</span> =&gt;
            {
                <span class="r24 r">action</span>(<span class="r25 r">ctx</span>);
                <b>return</b> <a href="@1@System.Runtime/A.html#045a746eb48cbaa9" class="t t">Task</a>.<a href="@1@System.Runtime/A.html#66f1c3e3e272f591" class="i property">CompletedTask</a>;
            });
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called when the shape is actually rendered and state needs to be loaded.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="#a9b578011c2fdd31" class="t t">ShapeAlterationBuilder</a> <a id="127679b93b8b44c2" href="../R/127679b93b8b44c2.html" target="n" data-glyph="72,1" class="i method">OnProcessing</a>(<a href="@1@System.Runtime/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="../Implementation/ShapeDisplayContext.cs.html#0fe1137e8e1878e1" class="t t">ShapeDisplayContext</a>, <a href="@1@System.Runtime/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt; <span id="r26 rd" class="r26 r">actionAsync</span>)
        {
            <b>return</b> <a href="#8073e9b8d75cb4df" class="i method">Configure</a>(<span id="r27 rd" class="r27 r">descriptor</span> =&gt;
            {
                <a href="@1@System.Runtime/A.html#3acf01620172c7f0" class="k">var</a> <span id="r28 rd" class="r28 r">existing</span> = <span class="r27 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#e9be5b0df4e3d411" class="i property">ProcessingAsync</a> ?? <span class="t t">Enumerable</span>.<span class="i method">Empty</span>&lt;<a href="@1@System.Runtime/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="../Implementation/ShapeDisplayContext.cs.html#0fe1137e8e1878e1" class="t t">ShapeDisplayContext</a>, <a href="@1@System.Runtime/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt;&gt;();
                <span class="r27 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#e9be5b0df4e3d411" class="i property">ProcessingAsync</a> = <span class="r28 r">existing</span>.<span class="i method">Concat</span>(<b>new</b>[] { <span class="r26 r">actionAsync</span> });
            });
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called when the shape is done being rendered.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="#a9b578011c2fdd31" class="t t">ShapeAlterationBuilder</a> <a id="f4137a087a2d486b" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">OnDisplayed</a>(<a href="@1@System.Runtime/A.html#486d58da4553e12d" class="t t">Action</a>&lt;<a href="../Implementation/ShapeDisplayContext.cs.html#0fe1137e8e1878e1" class="t t">ShapeDisplayContext</a>&gt; <span id="r29 rd" class="r29 r">action</span>)
        {
            <b>return</b> <a href="#1f6de11f0a4d2576" class="i method">OnDisplayed</a>(<span id="r30 rd" class="r30 r">ctx</span> =&gt;
            {
                <span class="r29 r">action</span>(<span class="r30 r">ctx</span>);
                <b>return</b> <a href="@1@System.Runtime/A.html#045a746eb48cbaa9" class="t t">Task</a>.<a href="@1@System.Runtime/A.html#66f1c3e3e272f591" class="i property">CompletedTask</a>;
            });
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Called when the shape is done being rendered.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public</b> <a href="#a9b578011c2fdd31" class="t t">ShapeAlterationBuilder</a> <a id="1f6de11f0a4d2576" href="../R/1f6de11f0a4d2576.html" target="n" data-glyph="72,1" class="i method">OnDisplayed</a>(<a href="@1@System.Runtime/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="../Implementation/ShapeDisplayContext.cs.html#0fe1137e8e1878e1" class="t t">ShapeDisplayContext</a>, <a href="@1@System.Runtime/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt; <span id="r31 rd" class="r31 r">actionAsync</span>)
        {
            <b>return</b> <a href="#8073e9b8d75cb4df" class="i method">Configure</a>(<span id="r32 rd" class="r32 r">descriptor</span> =&gt;
            {
                <a href="@1@System.Runtime/A.html#3acf01620172c7f0" class="k">var</a> <span id="r33 rd" class="r33 r">existing</span> = <span class="r32 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#d7848dcfcb76e69a" class="i property">DisplayedAsync</a> ?? <span class="t t">Enumerable</span>.<span class="i method">Empty</span>&lt;<a href="@1@System.Runtime/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="../Implementation/ShapeDisplayContext.cs.html#0fe1137e8e1878e1" class="t t">ShapeDisplayContext</a>, <a href="@1@System.Runtime/A.html#045a746eb48cbaa9" class="t t">Task</a>&gt;&gt;();
                <span class="r32 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#d7848dcfcb76e69a" class="i property">DisplayedAsync</a> = <span class="r33 r">existing</span>.<span class="i method">Concat</span>(<b>new</b>[] { <span class="r31 r">actionAsync</span> });
            });
        }
 
        <b>public</b> <a href="#a9b578011c2fdd31" class="t t">ShapeAlterationBuilder</a> <a id="ee9b64af3b0bcae9" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Placement</a>(<a href="@1@System.Runtime/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="#c9e3b8f174b6d011" class="t t">ShapePlacementContext</a>, <a href="PlacementInfo.cs.html#b3deb872be78af9d" class="t t">PlacementInfo</a>&gt; <span id="r34 rd" class="r34 r">action</span>)
        {
            <b>return</b> <a href="#8073e9b8d75cb4df" class="i method">Configure</a>(<span id="r35 rd" class="r35 r">descriptor</span> =&gt;
            {
                <a href="@1@System.Runtime/A.html#7a86aba051da82dd" class="k">var</a> <span id="r36 rd" class="r36 r">next</span> = <span class="r35 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#2e549b5b73b59362" class="i property">Placement</a>;
                <span class="r35 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#2e549b5b73b59362" class="i property">Placement</a> = <span id="r37 rd" class="r37 r">ctx</span> =&gt; <span class="r34 r">action</span>(<span class="r37 r">ctx</span>) ?? <span class="r36 r">next</span>(<span class="r37 r">ctx</span>);
            });
        }
 
        <b>public</b> <a href="#a9b578011c2fdd31" class="t t">ShapeAlterationBuilder</a> <a id="13c19f1c3c6b5673" href="../R/13c19f1c3c6b5673.html" target="n" data-glyph="72,1" class="i method">Placement</a>(<a href="@1@System.Runtime/A.html#7a86aba051da82dd" class="t t">Func</a>&lt;<a href="#c9e3b8f174b6d011" class="t t">ShapePlacementContext</a>, <b>bool</b>&gt; <span id="r38 rd" class="r38 r">predicate</span>, <a href="PlacementInfo.cs.html#b3deb872be78af9d" class="t t">PlacementInfo</a> <span id="r39 rd" class="r39 r">location</span>)
        {
            <b>return</b> <a href="#8073e9b8d75cb4df" class="i method">Configure</a>(<span id="r40 rd" class="r40 r">descriptor</span> =&gt;
            {
                <a href="@1@System.Runtime/A.html#7a86aba051da82dd" class="k">var</a> <span id="r41 rd" class="r41 r">next</span> = <span class="r40 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#2e549b5b73b59362" class="i property">Placement</a>;
                <span class="r40 r">descriptor</span>.<a href="ShapeDescriptor.cs.html#2e549b5b73b59362" class="i property">Placement</a> = <span id="r42 rd" class="r42 r">ctx</span> =&gt; <span class="r38 r">predicate</span>(<span class="r42 r">ctx</span>) ? <span class="r39 r">location</span> : <span class="r41 r">next</span>(<span class="r42 r">ctx</span>);
            });
        }
 
        <b>public</b> <a href="ShapeAlteration.cs.html#3003662ca188719c" class="t t">ShapeAlteration</a> <a id="1bc5a8f1a0558500" href="../R/1bc5a8f1a0558500.html" target="n" data-glyph="72,1" class="i method">Build</a>()
        {
            <b>return</b> <b>new</b> <a href="ShapeAlteration.cs.html#22afe135b2d4f15c" class="t constructor">ShapeAlteration</a>(<a href="#bd2a1d3323f922de" class="i field">_shapeType</a>, <a href="#a77a10cf9051698e" class="i field">_feature</a>, <a href="#95b11f2d7c9244a1" class="i field">_configurations</a>.<span class="i method">ToArray</span>());
        }
    }
 
    <b>public class</b> <a id="c9e3b8f174b6d011" href="../R/c9e3b8f174b6d011.html" target="n" data-glyph="0,0" class="t t">ShapePlacementContext</a>
    {
        <b>public</b> <a id="ae1cb477c7e8b437" href="../R/ae1cb477c7e8b437.html" target="n" data-glyph="72,1" class="t constructor">ShapePlacementContext</a>(<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r43 rd" class="r43 r">shapeType</span>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r44 rd" class="r44 r">displayType</span>, <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r45 rd" class="r45 r">differentiator</span>, <a href="../IShape.cs.html#1b6ae4719962ce25" class="t t">IShape</a> <span id="r46 rd" class="r46 r">zoneShape</span>)
        {
            <a href="#176d1115e8096f5d" class="i property">ShapeType</a> = <span class="r43 r">shapeType</span>;
            <a href="#f27bc0224192f69d" class="i property">DisplayType</a> = <span class="r44 r">displayType</span>;
            <a href="#4815fae8853aa0d0" class="i property">Differentiator</a> = <span class="r45 r">differentiator</span>;
            <a href="#0a17a3a189593101" class="i property">ZoneShape</a> = <span class="r46 r">zoneShape</span>;
        }
 
        <b>public</b> <a href="../IShape.cs.html#1b6ae4719962ce25" class="t t">IShape</a> <a id="0a17a3a189593101" href="../R/0a17a3a189593101.html" target="n" data-glyph="102,1" class="i property">ZoneShape</a> { <b>get</b>; <b>set</b>; }
        <b>public string</b> <a id="176d1115e8096f5d" href="../R/176d1115e8096f5d.html" target="n" data-glyph="102,1" class="i property">ShapeType</a> { <b>get</b>; <b>set</b>; }
        <b>public string</b> <a id="f27bc0224192f69d" href="../R/f27bc0224192f69d.html" target="n" data-glyph="102,1" class="i property">DisplayType</a> { <b>get</b>; <b>set</b>; }
        <b>public string</b> <a id="4815fae8853aa0d0" href="../R/4815fae8853aa0d0.html" target="n" data-glyph="102,1" class="i property">Differentiator</a> { <b>get</b>; <b>set</b>; }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Debug information explaining where the final placement is coming from.</span>
        <span class="c">///</span><span class="c"> Used by tooling.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public string</b> <a id="5be10974c2b338db" href="../R/5be10974c2b338db.html" target="n" data-glyph="102,1" class="i property">Source</a> { <b>get</b>; <b>set</b>; }
    }
}
</pre></td></tr></table></div></body></html>
