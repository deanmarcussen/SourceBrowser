<!DOCTYPE html>
<html><head><title>OrchardCore.Module.Targets.targets</title><link rel="stylesheet" href="../../../../../../../styles.css"><script src="../../../../../../../scripts.js"></script></head>
<body class="cB" onload="ix(93);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#MSBuildFiles/e/Repos/OrchardCore/src/OrchardCore/OrchardCore.Module.Targets/OrchardCore.Module.Targets.targets" target="_top">e\Repos\OrchardCore\src\OrchardCore\OrchardCore.Module.Targets\OrchardCore.Module.Targets.targets</a><br/></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="xd">&lt;</span><span class="xn">Project </span><span class="xan">xmlns</span><span class="xd">=</span>&quot;<span class="xav">http://schemas.microsoft.com/developer/msbuild/2003</span>&quot;<span class="xd">&gt;</span><span class="xd">
 
  &lt;!--</span><span class="c">
    This file is packaged with &quot;OrchardCore.Module.Targets.nupkg&quot; in &quot;./build&quot; such that any
    Module that references it will embed in its assembly all assets files and mapping infos.
    Here we use some msbuild properties that would not be evaluated in the `.props` file.
    It also prevents VS from adding / keeping some unnecessary lines in the project file.
  </span><span class="xd">--&gt;</span><span class="xd">
 
  &lt;</span><span class="xn">PropertyGroup</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/ModuleDefaultAssetExcludes.html" target="n" class="msbuildlink">ModuleDefaultAssetExcludes</a></span><span class="xd">&gt;</span>$(<a href="/MSBuildProperties/R/ModuleDefaultAssetExcludes.html" target="n" class="msbuildlink">ModuleDefaultAssetExcludes</a>);**\*$(<a href="/MSBuildProperties/R/DefaultLanguageSourceExtension.html" target="n" class="msbuildlink">DefaultLanguageSourceExtension</a>);**\*.resx<span class="xd">&lt;/</span><span class="xn">ModuleDefaultAssetExcludes</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/ModuleNoneExcludes.html" target="n" class="msbuildlink">ModuleNoneExcludes</a></span><span class="xd">&gt;</span>$(<a href="/MSBuildProperties/R/BaseIntermediateOutputPath.html" target="n" class="msbuildlink">BaseIntermediateOutputPath</a>)**\*.props;$(<a href="/MSBuildProperties/R/BaseIntermediateOutputPath.html" target="n" class="msbuildlink">BaseIntermediateOutputPath</a>)**\*.targets<span class="xd">&lt;/</span><span class="xn">ModuleNoneExcludes</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/ModuleNoneIncludes.html" target="n" class="msbuildlink">ModuleNoneIncludes</a></span><span class="xd">&gt;</span>$(<a href="/MSBuildProperties/R/ModuleAssetExcludes.html" target="n" class="msbuildlink">ModuleAssetExcludes</a>)<span class="xd">&lt;/</span><span class="xn">ModuleNoneIncludes</span><span class="xd">&gt;</span><span class="xd">
  &lt;/</span><span class="xn">PropertyGroup</span><span class="xd">&gt;</span><span class="xd">
 
  &lt;</span><span class="xn">PropertyGroup </span><span class="xan">Condition</span><span class="xd">=</span>&quot;<span class="xav">&#39;$(<a href="/MSBuildProperties/R/AppDesignerFolder.html" target="n" class="msbuildlink">AppDesignerFolder</a>)&#39; != &#39;&#39;</span>&quot;<span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/ModuleDefaultAssetExcludes.html" target="n" class="msbuildlink">ModuleDefaultAssetExcludes</a></span><span class="xd">&gt;</span>$(<a href="/MSBuildProperties/R/ModuleDefaultAssetExcludes.html" target="n" class="msbuildlink">ModuleDefaultAssetExcludes</a>);$(<a href="/MSBuildProperties/R/AppDesignerFolder.html" target="n" class="msbuildlink">AppDesignerFolder</a>)\**<span class="xd">&lt;/</span><span class="xn">ModuleDefaultAssetExcludes</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/ModuleNoneExcludes.html" target="n" class="msbuildlink">ModuleNoneExcludes</a></span><span class="xd">&gt;</span>$(<a href="/MSBuildProperties/R/ModuleNoneExcludes.html" target="n" class="msbuildlink">ModuleNoneExcludes</a>);$(<a href="/MSBuildProperties/R/AppDesignerFolder.html" target="n" class="msbuildlink">AppDesignerFolder</a>)\**\*$(<a href="/MSBuildProperties/R/DefaultLanguageSourceExtension.html" target="n" class="msbuildlink">DefaultLanguageSourceExtension</a>)<span class="xd">&lt;/</span><span class="xn">ModuleNoneExcludes</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/ModuleNoneExcludes.html" target="n" class="msbuildlink">ModuleNoneExcludes</a></span><span class="xd">&gt;</span>$(<a href="/MSBuildProperties/R/ModuleNoneExcludes.html" target="n" class="msbuildlink">ModuleNoneExcludes</a>);$(<a href="/MSBuildProperties/R/AppDesignerFolder.html" target="n" class="msbuildlink">AppDesignerFolder</a>)\**\*.resx<span class="xd">&lt;/</span><span class="xn">ModuleNoneExcludes</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/ModuleNoneIncludes.html" target="n" class="msbuildlink">ModuleNoneIncludes</a></span><span class="xd">&gt;</span>$(<a href="/MSBuildProperties/R/ModuleNoneIncludes.html" target="n" class="msbuildlink">ModuleNoneIncludes</a>);$(<a href="/MSBuildProperties/R/AppDesignerFolder.html" target="n" class="msbuildlink">AppDesignerFolder</a>)\**<span class="xd">&lt;/</span><span class="xn">ModuleNoneIncludes</span><span class="xd">&gt;</span><span class="xd">
  &lt;/</span><span class="xn">PropertyGroup</span><span class="xd">&gt;</span><span class="xd">
 
  &lt;</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildItems/R/None.html" target="n" class="msbuildlink">None</a> </span><span class="xan">Remove</span><span class="xd">=</span>&quot;<span class="xav">**\*.cshtml</span>&quot; <span class="xd">/&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildItems/R/None.html" target="n" class="msbuildlink">None</a> </span><span class="xan">Update</span><span class="xd">=</span>&quot;<span class="xav">@(<a href="/MSBuildItems/R/None.html" target="n" class="msbuildlink">None</a>)</span>&quot; <span class="xan">CopyToPublishDirectory</span><span class="xd">=</span>&quot;<span class="xav">Never</span>&quot; <span class="xd">/&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildItems/R/EmbeddedResource.html" target="n" class="msbuildlink">EmbeddedResource</a> </span><span class="xan">Update</span><span class="xd">=</span>&quot;<span class="xav">@(<a href="/MSBuildItems/R/EmbeddedResource.html" target="n" class="msbuildlink">EmbeddedResource</a>)</span>&quot; <span class="xan">CopyToPublishDirectory</span><span class="xd">=</span>&quot;<span class="xav">Never</span>&quot; <span class="xd">/&gt;</span><span class="xd">
  &lt;/</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
 
  &lt;</span><span class="xn">Target </span><span class="xan">Name</span><span class="xd">=</span>&quot;<span class="xav"><a href="/MSBuildTargets/R/EnsureRazorSdk.html" target="n" class="msbuildlink">EnsureRazorSdk</a></span>&quot; <span class="xan">BeforeTargets</span><span class="xd">=</span>&quot;<span class="xav"><a href="/MSBuildTargets/R/BeforeBuild.html" target="n" class="msbuildlink">BeforeBuild</a></span>&quot;<span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildTasks/R/Error.html" target="n" class="msbuildlink">Error</a></span><span class="xan">
      Condition</span><span class="xd">=</span>&quot;<span class="xav">&#39;@(<a href="/MSBuildItems/R/RazorGenerate.html" target="n" class="msbuildlink">RazorGenerate</a>)&#39; != &#39;&#39; and &#39;$(<a href="/MSBuildProperties/R/ResolvedRazorCompileToolset.html" target="n" class="msbuildlink">ResolvedRazorCompileToolset</a>)&#39; != &#39;RazorSdk&#39;</span>&quot;<span class="xan">
      Text</span><span class="xd">=</span>&quot;<span class="xav">The &#39;Microsoft.NET.Sdk.Razor&#39; SDK is required on Themes and Modules for Razor files to be precompiled.</span>&quot; <span class="xd">/&gt;</span><span class="xd">
  &lt;/</span><span class="xn">Target</span><span class="xd">&gt;</span><span class="xd">
 
  &lt;</span><span class="xn">Target </span><span class="xan">Name</span><span class="xd">=</span>&quot;<span class="xav"><a href="/MSBuildTargets/R/NoWarnOnRazorViewImportedTypeConflicts.html" target="n" class="msbuildlink">NoWarnOnRazorViewImportedTypeConflicts</a></span>&quot; <span class="xan">BeforeTargets</span><span class="xd">=</span>&quot;<span class="xav"><a href="/MSBuildTargets/R/RazorCoreCompile.html" target="n" class="msbuildlink">RazorCoreCompile</a></span>&quot;<span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn">PropertyGroup</span><span class="xd">&gt;</span><span class="xd">
      &lt;</span><span class="xn"><a href="/MSBuildProperties/R/NoWarn.html" target="n" class="msbuildlink">NoWarn</a></span><span class="xd">&gt;</span>$(<a href="/MSBuildProperties/R/NoWarn.html" target="n" class="msbuildlink">NoWarn</a>);0436<span class="xd">&lt;/</span><span class="xn">NoWarn</span><span class="xd">&gt;</span><span class="xd">
    &lt;/</span><span class="xn">PropertyGroup</span><span class="xd">&gt;</span><span class="xd">
  &lt;/</span><span class="xn">Target</span><span class="xd">&gt;</span><span class="xd">
 
  &lt;</span><span class="xn">Target </span><span class="xan">Name</span><span class="xd">=</span>&quot;<span class="xav"><a href="/MSBuildTargets/R/EmbeddModuleAssets.html" target="n" class="msbuildlink">EmbeddModuleAssets</a></span>&quot; <span class="xan">AfterTargets</span><span class="xd">=</span>&quot;<span class="xav"><a href="/MSBuildTargets/R/AfterResolveReferences.html" target="n" class="msbuildlink">AfterResolveReferences</a></span>&quot;<span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildTasks/R/RemoveDuplicates.html" target="n" class="msbuildlink">RemoveDuplicates</a> </span><span class="xan">Inputs</span><span class="xd">=</span>&quot;<span class="xav">@(<a href="/MSBuildItems/R/EmbeddedResource.html" target="n" class="msbuildlink">EmbeddedResource</a>)</span>&quot;<span class="xd">&gt;</span><span class="xd">
      &lt;</span><span class="xn">Output </span><span class="xan">TaskParameter</span><span class="xd">=</span>&quot;<span class="xav">Filtered</span>&quot; <span class="xan">ItemName</span><span class="xd">=</span>&quot;<span class="xav"><a href="/MSBuildItems/R/ModuleAssetFiles.html" target="n" class="msbuildlink">ModuleAssetFiles</a></span>&quot;<span class="xd">/&gt;</span><span class="xd">
    &lt;/</span><span class="xn">RemoveDuplicates</span><span class="xd">&gt;</span><span class="xd">
 
    &lt;</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
      &lt;</span><span class="xn"><a href="/MSBuildItems/R/ModuleAssets.html" target="n" class="msbuildlink">ModuleAssets</a></span><span class="xan">
        Include</span><span class="xd">=</span>&quot;<span class="xav">Areas\$(<a href="/MSBuildProperties/R/AssemblyName.html" target="n" class="msbuildlink">AssemblyName</a>)\%(ModuleAssetFiles.RelativeDir)%(Filename)%(Extension)|%(ModuleAssetFiles.FullPath)</span>&quot;<span class="xan">
        Condition</span><span class="xd">=</span>&quot;<span class="xav">&#39;%(ModuleAssetFiles.Link)&#39; == &#39;&#39; and &#39;%(ModuleAssetFiles.Filename)&#39; != &#39;&#39;</span>&quot;<span class="xd">/&gt;</span><span class="xd">
 
      &lt;</span><span class="xn"><a href="/MSBuildItems/R/ModuleAssets.html" target="n" class="msbuildlink">ModuleAssets</a></span><span class="xan">
        Include</span><span class="xd">=</span>&quot;<span class="xav">Areas\$(<a href="/MSBuildProperties/R/AssemblyName.html" target="n" class="msbuildlink">AssemblyName</a>)\%(ModuleAssetFiles.Link)|%(ModuleAssetFiles.FullPath)</span>&quot;<span class="xan">
        Condition</span><span class="xd">=</span>&quot;<span class="xav">&#39;%(ModuleAssetFiles.Link)&#39; != &#39;&#39; and &#39;%(ModuleAssetFiles.Filename)&#39; != &#39;&#39;</span>&quot; <span class="xd">/&gt;</span><span class="xd">
    &lt;/</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
 
    &lt;</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
      &lt;</span><span class="xn"><a href="/MSBuildItems/R/EmbeddedResource.html" target="n" class="msbuildlink">EmbeddedResource</a> </span><span class="xan">Remove</span><span class="xd">=</span>&quot;<span class="xav">@(<a href="/MSBuildItems/R/EmbeddedResource.html" target="n" class="msbuildlink">EmbeddedResource</a>)</span>&quot; <span class="xd">/&gt;</span><span class="xd">
      &lt;</span><span class="xn"><a href="/MSBuildItems/R/EmbeddedResource.html" target="n" class="msbuildlink">EmbeddedResource</a> </span><span class="xan">Include</span><span class="xd">=</span>&quot;<span class="xav">@(<a href="/MSBuildItems/R/ModuleAssetFiles.html" target="n" class="msbuildlink">ModuleAssetFiles</a>)</span>&quot; <span class="xd">/&gt;</span><span class="xd">
      &lt;</span><span class="xn"><a href="/MSBuildItems/R/EmbeddedResource.html" target="n" class="msbuildlink">EmbeddedResource</a> </span><span class="xan">Update</span><span class="xd">=</span>&quot;<span class="xav">@(<a href="/MSBuildItems/R/EmbeddedResource.html" target="n" class="msbuildlink">EmbeddedResource</a>)</span>&quot; <span class="xan">Condition</span><span class="xd">=</span>&quot;<span class="xav">&#39;%(EmbeddedResource.Link)&#39; == &#39;&#39; and &#39;%(Extension)&#39; != &#39;.resx&#39;</span>&quot;<span class="xd">&gt;</span><span class="xd">
        &lt;</span><span class="xn">LogicalName</span><span class="xd">&gt;</span>$([System.String]::new(&#39;$(<a href="/MSBuildProperties/R/AssemblyName.html" target="n" class="msbuildlink">AssemblyName</a>).%(RelativeDir)%(FileName)%(Extension)&#39;).Replace(&#39;\&#39;, &#39;&gt;&#39;).Replace(&#39;/&#39;, &#39;&gt;&#39;))<span class="xd">&lt;/</span><span class="xn">LogicalName</span><span class="xd">&gt;</span><span class="xd">
      &lt;/</span><span class="xn">EmbeddedResource</span><span class="xd">&gt;</span><span class="xd">
      &lt;</span><span class="xn"><a href="/MSBuildItems/R/EmbeddedResource.html" target="n" class="msbuildlink">EmbeddedResource</a> </span><span class="xan">Update</span><span class="xd">=</span>&quot;<span class="xav">@(<a href="/MSBuildItems/R/EmbeddedResource.html" target="n" class="msbuildlink">EmbeddedResource</a>)</span>&quot; <span class="xan">Condition</span><span class="xd">=</span>&quot;<span class="xav">&#39;%(EmbeddedResource.Link)&#39; != &#39;&#39; and &#39;%(Extension)&#39; != &#39;.resx&#39;</span>&quot;<span class="xd">&gt;</span><span class="xd">
        &lt;</span><span class="xn">LogicalName</span><span class="xd">&gt;</span>$([System.String]::new(&#39;$(<a href="/MSBuildProperties/R/AssemblyName.html" target="n" class="msbuildlink">AssemblyName</a>).%(EmbeddedResource.Link)&#39;).Replace(&#39;\&#39;, &#39;&gt;&#39;).Replace(&#39;/&#39;, &#39;&gt;&#39;))<span class="xd">&lt;/</span><span class="xn">LogicalName</span><span class="xd">&gt;</span><span class="xd">
      &lt;/</span><span class="xn">EmbeddedResource</span><span class="xd">&gt;</span><span class="xd">
    &lt;/</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
 
    &lt;</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
      &lt;</span><span class="xn"><a href="/MSBuildItems/R/AssemblyAttribute.html" target="n" class="msbuildlink">AssemblyAttribute</a> </span><span class="xan">Include</span><span class="xd">=</span>&quot;<span class="xav">OrchardCore.Modules.Manifest.ModuleMarkerAttribute</span>&quot;<span class="xd">&gt;</span><span class="xd">
        &lt;</span><span class="xn">_Parameter1</span><span class="xd">&gt;</span>$(<a href="/MSBuildProperties/R/AssemblyName.html" target="n" class="msbuildlink">AssemblyName</a>)<span class="xd">&lt;/</span><span class="xn">_Parameter1</span><span class="xd">&gt;</span><span class="xd">
        &lt;</span><span class="xn">_Parameter2</span><span class="xd">&gt;</span>$(<a href="/MSBuildProperties/R/ModuleType.html" target="n" class="msbuildlink">ModuleType</a>)<span class="xd">&lt;/</span><span class="xn">_Parameter2</span><span class="xd">&gt;</span><span class="xd">
      &lt;/</span><span class="xn">AssemblyAttribute</span><span class="xd">&gt;</span><span class="xd">
      &lt;</span><span class="xn"><a href="/MSBuildItems/R/AssemblyAttribute.html" target="n" class="msbuildlink">AssemblyAttribute</a> </span><span class="xan">Include</span><span class="xd">=</span>&quot;<span class="xav">OrchardCore.Modules.Manifest.ModuleAssetAttribute</span>&quot;<span class="xd">&gt;</span><span class="xd">
        &lt;</span><span class="xn">_Parameter1</span><span class="xd">&gt;</span>%(ModuleAssets.Identity)<span class="xd">&lt;/</span><span class="xn">_Parameter1</span><span class="xd">&gt;</span><span class="xd">
      &lt;/</span><span class="xn">AssemblyAttribute</span><span class="xd">&gt;</span><span class="xd">
    &lt;/</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
  &lt;/</span><span class="xn">Target</span><span class="xd">&gt;</span><span class="xd">
 
  &lt;</span><span class="xn">Target </span><span class="xan">Name</span><span class="xd">=</span>&quot;<span class="xav"><a href="/MSBuildTargets/R/UpdateModuleAssets.html" target="n" class="msbuildlink">UpdateModuleAssets</a></span>&quot; <span class="xan">AfterTargets</span><span class="xd">=</span>&quot;<span class="xav"><a href="/MSBuildTargets/R/CreateManifestResourceNames.html" target="n" class="msbuildlink">CreateManifestResourceNames</a></span>&quot;<span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
      &lt;</span><span class="xn"><a href="/MSBuildItems/R/EmbeddedResource.html" target="n" class="msbuildlink">EmbeddedResource</a> </span><span class="xan">Update</span><span class="xd">=</span>&quot;<span class="xav">@(<a href="/MSBuildItems/R/EmbeddedResource.html" target="n" class="msbuildlink">EmbeddedResource</a>)</span>&quot; <span class="xan">Condition</span><span class="xd">=</span>&quot;<span class="xav">&#39;%(EmbeddedResource.WithCulture)&#39; == &#39;true&#39;</span>&quot;<span class="xd">&gt;</span><span class="xd">
        &lt;</span><span class="xn">WithCulture</span><span class="xd">&gt;</span>false<span class="xd">&lt;/</span><span class="xn">WithCulture</span><span class="xd">&gt;</span><span class="xd">
        &lt;</span><span class="xn">Culture</span><span class="xd">&gt;</span><span class="xd">&lt;/</span><span class="xn">Culture</span><span class="xd">&gt;</span><span class="xd">
      &lt;/</span><span class="xn">EmbeddedResource</span><span class="xd">&gt;</span><span class="xd">
    &lt;/</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
  &lt;/</span><span class="xn">Target</span><span class="xd">&gt;</span><span class="xd">
 
  &lt;</span><span class="xn">Target </span><span class="xan">Name</span><span class="xd">=</span>&quot;<span class="xav"><a href="/MSBuildTargets/R/GetModuleProjectName.html" target="n" class="msbuildlink">GetModuleProjectName</a></span>&quot; <span class="xan">Returns</span><span class="xd">=</span>&quot;<span class="xav">@(<a href="/MSBuildItems/R/ModuleProjectName.html" target="n" class="msbuildlink">ModuleProjectName</a>)</span>&quot;<span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
      &lt;</span><span class="xn"><a href="/MSBuildItems/R/ModuleProjectName.html" target="n" class="msbuildlink">ModuleProjectName</a> </span><span class="xan">Include</span><span class="xd">=</span>&quot;<span class="xav">$(<a href="/MSBuildProperties/R/AssemblyName.html" target="n" class="msbuildlink">AssemblyName</a>)</span>&quot; <span class="xd">/&gt;</span><span class="xd">
    &lt;/</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
  &lt;/</span><span class="xn">Target</span><span class="xd">&gt;</span><span class="xd">
 
&lt;/</span><span class="xn">Project</span><span class="xd">&gt;</span>
</pre></td></tr></table></div></body></html>
