<!DOCTYPE html>
<html><head><title>ShellOrchardCoreBuilderExtensions.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(45);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#OrchardCore.Infrastructure/Shell/ShellOrchardCoreBuilderExtensions.cs" target="_top">Shell\ShellOrchardCoreBuilderExtensions.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#OrchardCore.Infrastructure" target="_top">src\OrchardCore\OrchardCore.Infrastructure\OrchardCore.Infrastructure.csproj</a> (OrchardCore.Infrastructure)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">Options</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Environment</span>.<span class="i n">Shell</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Environment</span>.<span class="i n">Shell</span>.<span class="i n">Configuration</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Environment</span>.<span class="i n">Shell</span>.<span class="i n">Data</span>.<span class="i n">Descriptors</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Environment</span>.<span class="i n">Shell</span>.<span class="i n">Descriptor</span>;
 
<b>namespace</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">DependencyInjection</span>
{
    <b>public static class</b> <a id="1705a040b1dd8098" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">ShellOrchardCoreBuilderExtensions</a>
    {
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Adds services at the host level to load site settings from the file system</span>
        <span class="c">///</span><span class="c"> and tenant level services to store states and descriptors in the database.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static</b> <span class="i">OrchardCoreBuilder</span> <a id="f45de46f4414da53" href="../R/../../0000000000.html" target="n" data-glyph="220,1" class="i method">AddDataStorage</a>(<b>this</b> <span class="i">OrchardCoreBuilder</span> <span id="r0 rd" class="r0 r">builder</span>)
        {
            <span class="r0 r">builder</span>.<a href="#16a8fe75b05aa902" class="i method">AddSitesFolder</a>()
                .<span class="i">ConfigureServices</span>(<span id="r1 rd" class="r1 r">services</span> =&gt;
                {
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<span class="i">IShellDescriptorManager</span>, <a href="ShellDescriptorManager.cs.html#341f23a1efca81ef" class="t t">ShellDescriptorManager</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<span class="i">IShellFeaturesManager</span>, <a href="/OrchardCore/A.html#f96e2ff681287ae1" class="t t">ShellFeaturesManager</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<span class="i">IShellDescriptorFeaturesManager</span>, <a href="/OrchardCore/A.html#34326996cc67ed56" class="t t">ShellDescriptorFeaturesManager</a>&gt;();
                });
 
            <b>return</b> <span class="r0 r">builder</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Host services to load site settings from the file system</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static</b> <span class="i">OrchardCoreBuilder</span> <a id="16a8fe75b05aa902" href="../R/16a8fe75b05aa902.html" target="n" data-glyph="220,1" class="i method">AddSitesFolder</a>(<b>this</b> <span class="i">OrchardCoreBuilder</span> <span id="r2 rd" class="r2 r">builder</span>)
        {
            <b>var</b> <span id="r3 rd" class="r3 r">services</span> = <span class="r2 r">builder</span>.<span class="i">ApplicationServices</span>;
 
            <span class="r3 r">services</span>.<span class="i">AddSingleton</span>&lt;<span class="i">IShellsSettingsSources</span>, <a href="/OrchardCore/A.html#ddbb14d4b75f56ab" class="t t">ShellsSettingsSources</a>&gt;();
            <span class="r3 r">services</span>.<span class="i">AddSingleton</span>&lt;<span class="i">IShellsConfigurationSources</span>, <a href="/OrchardCore/A.html#0305d7856ea4f08e" class="t t">ShellsConfigurationSources</a>&gt;();
            <span class="r3 r">services</span>.<span class="i">AddSingleton</span>&lt;<span class="i">IShellConfigurationSources</span>, <a href="/OrchardCore/A.html#0dd78d28a651df3a" class="t t">ShellConfigurationSources</a>&gt;();
            <span class="r3 r">services</span>.<span class="i">AddTransient</span>&lt;<span class="t t">IConfigureOptions</span>&lt;<span class="i">ShellOptions</span>&gt;, <a href="/OrchardCore/A.html#300a3f42a60d2001" class="t t">ShellOptionsSetup</a>&gt;();
            <span class="r3 r">services</span>.<span class="i">AddSingleton</span>&lt;<span class="i">IShellSettingsManager</span>, <a href="/OrchardCore/A.html#96201bb399206230" class="t t">ShellSettingsManager</a>&gt;();
 
            <b>return</b> <span class="r2 r">builder</span>;
        }
    }
}
</pre></td></tr></table></div></body></html>
