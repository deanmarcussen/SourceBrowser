<!DOCTYPE html>
<html><head><title>ModularPageRazorPagesOptionsSetup.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(40);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#OrchardCore.Mvc.Core/RazorPages/ModularPageRazorPagesOptionsSetup.cs" target="_top">RazorPages\ModularPageRazorPagesOptionsSetup.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#OrchardCore.Mvc.Core" target="_top">src\OrchardCore\OrchardCore.Mvc.Core\OrchardCore.Mvc.Core.csproj</a> (OrchardCore.Mvc.Core)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">AspNetCore</span>.<span class="i n">Mvc</span>.<span class="i n">ApplicationModels</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">AspNetCore</span>.<span class="i n">Mvc</span>.<span class="i n">RazorPages</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">Options</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Environment</span>.<span class="i n">Shell</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Environment</span>.<span class="i n">Shell</span>.<span class="i n">Models</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Modules</span>;
 
<b>namespace</b> <span class="i n">OrchardCore</span>.<span class="i n">Mvc</span>.<span class="i n">RazorPages</span>
{
    <b>public class</b> <a id="6c5f1d4dcd410d7d" href="../R/6c5f1d4dcd410d7d.html" target="n" data-glyph="0,0" class="t t">ModularPageRazorPagesOptionsSetup</a> : <span class="t t">IConfigureOptions</span>&lt;<span class="t t">RazorPagesOptions</span>&gt;
    {
        <b>private readonly</b> <a href="/OrchardCore.Abstractions/A.html#545200e60bc52bf1" class="t t">IApplicationContext</a> <a id="88fccee046bb535d" href="../R/88fccee046bb535d.html" target="n" data-glyph="46,1" class="i field">_applicationContext</a>;
        <b>private readonly</b> <a href="/OrchardCore.Abstractions/A.html#368947b748b893a0" class="t t">ShellSettings</a> <a id="c9637ae8827ed2bb" href="../R/c9637ae8827ed2bb.html" target="n" data-glyph="46,1" class="i field">_shellSettings</a>;
 
        <b>public</b> <a id="a4309500602a5afd" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">ModularPageRazorPagesOptionsSetup</a>(<a href="/OrchardCore.Abstractions/A.html#545200e60bc52bf1" class="t t">IApplicationContext</a> <span id="r0 rd" class="r0 r">applicationContext</span>, <a href="/OrchardCore.Abstractions/A.html#368947b748b893a0" class="t t">ShellSettings</a> <span id="r1 rd" class="r1 r">shellSettings</span>)
        {
            <a href="#88fccee046bb535d" class="i field">_applicationContext</a> = <span class="r0 r">applicationContext</span>;
            <a href="#c9637ae8827ed2bb" class="i field">_shellSettings</a> = <span class="r1 r">shellSettings</span>;
        }
 
        <b>public void</b> <a id="979757542f9b39c2" href="../R/979757542f9b39c2.html" target="n" data-glyph="72,1" class="i method">Configure</a>(<span class="t t">RazorPagesOptions</span> <span id="r2 rd" class="r2 r">options</span>)
        {
            <span class="c">// Only serve pages under the &quot;Areas&quot; folder and whose routes have an area name.</span>
            <span class="r2 r">options</span>.<span class="i property">Conventions</span>.<span class="i method">AddFolderRouteModelConvention</span>(<span class="s">&quot;/&quot;</span>, <span id="r3 rd" class="r3 r">model</span> =&gt; <span class="r3 r">model</span>.<span class="i property">Selectors</span>.<a href="@1@System.Runtime/A.html#6144bc2a22ce28c4" class="i method">Clear</a>());
 
            <b>if</b> (<a href="#c9637ae8827ed2bb" class="i field">_shellSettings</a>.<a href="/OrchardCore.Abstractions/A.html#42a6610d7f01c165" class="i property">State</a> != <a href="/OrchardCore.Abstractions/A.html#386ecd81b926aa48" class="t t">TenantState</a>.<a href="/OrchardCore.Abstractions/A.html#7466a57979de4d92" class="i field">Running</a>)
            {
                <span class="c">// Don&#39;t serve any page of the application&#39;module which is enabled during a setup.</span>
                <span class="r2 r">options</span>.<span class="i property">Conventions</span>.<span class="i method">AddAreaFolderRouteModelConvention</span>(<a href="#88fccee046bb535d" class="i field">_applicationContext</a>.<a href="/OrchardCore.Abstractions/A.html#99a608bfb7e2ccd2" class="i property">Application</a>.<a href="/OrchardCore.Abstractions/A.html#08ec73d4a56226e9" class="i property">Name</a>, <span class="s">&quot;/&quot;</span>,
                    <span id="r4 rd" class="r4 r">model</span> =&gt; <span class="r4 r">model</span>.<span class="i property">Selectors</span>.<a href="@1@System.Runtime/A.html#6144bc2a22ce28c4" class="i method">Clear</a>());
            }
            <b>else</b>
            {
                <span class="c">// Add a custom folder route to serve the application&#39;s module pages from the root.</span>
                <span class="r2 r">options</span>.<span class="i property">Conventions</span>.<a href="PageConventionCollectionExtensions.cs.html#6f3ad14eaaa15d0f" class="i method">AddAreaFolderRoute</a>(<a href="#88fccee046bb535d" class="i field">_applicationContext</a>.<a href="/OrchardCore.Abstractions/A.html#99a608bfb7e2ccd2" class="i property">Application</a>.<a href="/OrchardCore.Abstractions/A.html#08ec73d4a56226e9" class="i property">Name</a>, <span class="s">&quot;/&quot;</span>, <span class="s">&quot;&quot;</span>);
            }
        }
    }
}
</pre></td></tr></table></div></body></html>
