<!DOCTYPE html>
<html><head><title>Startup.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(70);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#OrchardCore.Workflows/Http/Startup.cs" target="_top">Http\Startup.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#OrchardCore.Workflows" target="_top">src\OrchardCore.Modules\OrchardCore.Workflows\OrchardCore.Workflows.csproj</a> (OrchardCore.Workflows)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">AspNetCore</span>.<span class="i n">Builder</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">AspNetCore</span>.<span class="i n">Mvc</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">AspNetCore</span>.<span class="i n">Routing</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">DependencyInjection</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Liquid</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Modules</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Scripting</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Workflows</span>.<span class="i n">Helpers</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Workflows</span>.<span class="i n">Http</span>.<span class="i n">Activities</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Workflows</span>.<span class="i n">Http</span>.<span class="i n">Drivers</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Workflows</span>.<span class="i n">Http</span>.<span class="i n">Filters</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Workflows</span>.<span class="i n">Http</span>.<span class="i n">Handlers</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Workflows</span>.<span class="i n">Http</span>.<span class="i n">Liquid</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Workflows</span>.<span class="i n">Http</span>.<span class="i n">Scripting</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Workflows</span>.<span class="i n">Http</span>.<span class="i n">Services</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Workflows</span>.<span class="i n">Http</span>.<span class="i n">WorkflowContextProviders</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Workflows</span>.<span class="i n">Services</span>;
 
<b>namespace</b> <span class="i n">OrchardCore</span>.<span class="i n">Workflows</span>.<span class="i n">Http</span>
{
    [<span class="i">Feature</span>(<span class="s">&quot;OrchardCore.Workflows.Http&quot;</span>)]
    <b>public class</b> <a id="144c8d31db91a081" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="a3f614cf8b639c60">Startup</span></a> : <span class="i">StartupBase</span>
    {
        <b>public override void</b> <a id="bfa858a45b1e2081" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ConfigureServices</a>(<span class="t t">IServiceCollection</span> <span id="r0 rd" class="r0 r">services</span>)
        {
            <span class="r0 r">services</span>.<span class="i method">Configure</span>&lt;<span class="t t">MvcOptions</span>&gt;(<span id="r1 rd" class="r1 r">o</span> =&gt;
            {
                <span class="r1 r">o</span>.<span class="i property">Filters</span>.<span class="i method">Add</span>(<b>typeof</b>(<a href="Filters/WorkflowActionFilter.cs.html#a663a08e8446a756" class="t t">WorkflowActionFilter</a>));
            });
 
            <span class="r0 r">services</span>.<a href="/OrchardCore.Liquid.Abstractions/A.html#a30788fe9ebeec96" class="i method">AddLiquidFilter</a>&lt;<a href="Liquid/SignalUrlFilter.cs.html#ba7b215195968a2c" class="t t">SignalUrlFilter</a>&gt;(<span class="s">&quot;signal_url&quot;</span>);
 
            <span class="r0 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Workflows.Abstractions/A.html#3a4faaddc2902aef" class="t t">IWorkflowTypeEventHandler</a>, <a href="Handlers/WorkflowTypeRoutesHandler.cs.html#8a573ad859308e27" class="t t">WorkflowTypeRoutesHandler</a>&gt;();
            <span class="r0 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Workflows.Abstractions/A.html#afc3132670d265ca" class="t t">IWorkflowHandler</a>, <a href="Handlers/WorkflowInstanceRoutesHandler.cs.html#12bb65d179c177d9" class="t t">WorkflowRoutesHandler</a>&gt;();
 
            <span class="r0 r">services</span>.<span class="i method">AddSingleton</span>&lt;<a href="Services/IWorkflowTypeRouteEntries.cs.html#7599defaf16d1b37" class="t t">IWorkflowTypeRouteEntries</a>, <a href="Services/WorkflowTypeRouteEntries.cs.html#fd1d333fb6c2a02c" class="t t">WorkflowTypeRouteEntries</a>&gt;();
            <span class="r0 r">services</span>.<span class="i method">AddSingleton</span>&lt;<a href="Services/IWorkflowInstanceRouteEntries.cs.html#1fb37a0a73d0b348" class="t t">IWorkflowInstanceRouteEntries</a>, <a href="Services/WorkflowInstanceRouteEntries.cs.html#4b2f619b9c844c71" class="t t">WorkflowInstanceRouteEntries</a>&gt;();
            <span class="r0 r">services</span>.<span class="i">AddSingleton</span>&lt;<span class="i">IGlobalMethodProvider</span>, <a href="Scripting/HttpMethodsProvider.cs.html#c9cf58a782f7a4e6" class="t t">HttpMethodsProvider</a>&gt;();
            <span class="r0 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Workflows.Abstractions/A.html#40daf921a8c842e2" class="t t">IWorkflowExecutionContextHandler</a>, <a href="Handlers/SignalWorkflowExecutionContextHandler.cs.html#cd56a23f2844a1e3" class="t t">SignalWorkflowExecutionContextHandler</a>&gt;();
 
            <span class="r0 r">services</span>.<span class="i">AddActivity</span>&lt;<a href="Activities/HttpRequestEvent.cs.html#66093e2804cc9d3b" class="t t">HttpRequestEvent</a>, <a href="Drivers/HttpRequestEventDisplayDriver.cs.html#38e544bbb6a4c97b" class="t t">HttpRequestEventDisplayDriver</a>&gt;();
            <span class="r0 r">services</span>.<span class="i">AddActivity</span>&lt;<a href="Activities/HttpRequestFilterEvent.cs.html#6f6af5f8b83af6f7" class="t t">HttpRequestFilterEvent</a>, <a href="Drivers/HttpRequestFilterEventDisplayDriver.cs.html#60ca646172ad9059" class="t t">HttpRequestFilterEventDisplayDriver</a>&gt;();
            <span class="r0 r">services</span>.<span class="i">AddActivity</span>&lt;<a href="Activities/HttpRedirectTask.cs.html#b30168f0440dd822" class="t t">HttpRedirectTask</a>, <a href="Drivers/HttpRedirectTaskDisplayDriver.cs.html#29f800e9d68c50e9" class="t t">HttpRedirectTaskDisplayDriver</a>&gt;();
            <span class="r0 r">services</span>.<span class="i">AddActivity</span>&lt;<a href="Activities/HttpRequestTask.cs.html#89b247818b64f268" class="t t">HttpRequestTask</a>, <a href="Drivers/HttpRequestTaskDisplayDriver.cs.html#44eda7402ca21c0b" class="t t">HttpRequestTaskDisplayDriver</a>&gt;();
            <span class="r0 r">services</span>.<span class="i">AddActivity</span>&lt;<a href="Activities/HttpResponseTask.cs.html#d71920fa033711d7" class="t t">HttpResponseTask</a>, <a href="Drivers/HttpResponseTaskDisplayDriver.cs.html#b2771d0f12a32e71" class="t t">HttpResponseTaskDisplayDriver</a>&gt;();
            <span class="r0 r">services</span>.<span class="i">AddActivity</span>&lt;<a href="Activities/SignalEvent.cs.html#8dfa433b83c96324" class="t t">SignalEvent</a>, <a href="Drivers/SignalEventDisplayDriver.cs.html#7418068ba27042e9" class="t t">SignalEventDisplayDriver</a>&gt;();
 
            <span class="r0 r">services</span>.<span class="i">AddSingleton</span>&lt;<span class="i">IGlobalMethodProvider</span>, <a href="Scripting/SignalMethodProvider.cs.html#5a9b802a6088e6fb" class="t t">TokenMethodProvider</a>&gt;();
        }
 
        <b>public override void</b> <a id="03259974726d8ed0" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Configure</a>(<span class="t t">IApplicationBuilder</span> <span id="r2 rd" class="r2 r">app</span>, <span class="t t">IEndpointRouteBuilder</span> <span id="r3 rd" class="r3 r">routes</span>, <span class="t t">IServiceProvider</span> <span id="r4 rd" class="r4 r">serviceProvider</span>)
        {
            <span class="r3 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r5 r">name</span>: <span class="s">&quot;HttpWorkflow&quot;</span>,
                <span class="r6 r">areaName</span>: <span class="s">&quot;OrchardCore.Workflows&quot;</span>,
                <span class="r7 r">pattern</span>: <span class="s">&quot;workflows/{action}&quot;</span>,
                <span class="r8 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="s">&quot;HttpWorkflow&quot;</span> }
            );
 
            <span class="r3 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r5 r">name</span>: <span class="s">&quot;InvokeWorkflow&quot;</span>,
                <span class="r6 r">areaName</span>: <span class="s">&quot;OrchardCore.Workflows&quot;</span>,
                <span class="r7 r">pattern</span>: <span class="s">&quot;workflows/invoke/{token}&quot;</span>,
                <span class="r8 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="s">&quot;HttpWorkflow&quot;</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <span class="s">&quot;Invoke&quot;</span> }
            );
        }
    }
}
</pre></td></tr></table></div></body></html>
