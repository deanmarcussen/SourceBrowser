<!DOCTYPE html>
<html><head><title>Startup.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(138);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#OrchardCore.AdminMenu/Startup.cs" target="_top">Startup.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#OrchardCore.AdminMenu" target="_top">src\OrchardCore.Modules\OrchardCore.AdminMenu\OrchardCore.AdminMenu.csproj</a> (OrchardCore.AdminMenu)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">AspNetCore</span>.<span class="i n">Builder</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">AspNetCore</span>.<span class="i n">Routing</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">DependencyInjection</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">Options</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Admin</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">AdminMenu</span>.<span class="i n">AdminNodes</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">AdminMenu</span>.<span class="i n">Controllers</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">AdminMenu</span>.<span class="i n">Deployment</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">AdminMenu</span>.<span class="i n">Recipes</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">AdminMenu</span>.<span class="i n">Services</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Deployment</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">DisplayManagement</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">DisplayManagement</span>.<span class="i">Handlers</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Modules</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Mvc</span>.<span class="i">Core</span>.<span class="i">Utilities</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Navigation</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Recipes</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Security</span>.<span class="i">Permissions</span>;
 
<b>namespace</b> <span class="i n">OrchardCore</span>.<span class="i n">AdminMenu</span>
{
    <b>public class</b> <a id="13220bc8076cc377" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">Startup</a> : <span class="i">StartupBase</span>
    {
        <b>private readonly</b> <a href="/OrchardCore.Admin.Abstractions/A.html#ce010d95061d963d" class="t t">AdminOptions</a> <a id="630c1b0a0035cec8" href="R/630c1b0a0035cec8.html" target="n" data-glyph="46,1" class="i field">_adminOptions</a>;
 
        <b>public</b> <a id="cddf3137ecb78af8" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">Startup</a>(<span class="t t">IOptions</span>&lt;<a href="/OrchardCore.Admin.Abstractions/A.html#ce010d95061d963d" class="t t">AdminOptions</a>&gt; <span id="r0 rd" class="r0 r">adminOptions</span>)
        {
            <a href="#630c1b0a0035cec8" class="i field">_adminOptions</a> = <span class="r0 r">adminOptions</span>.<span class="i property">Value</span>;
        }
 
        <b>public override void</b> <a id="364ce5ae181a955d" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ConfigureServices</a>(<span class="t t">IServiceCollection</span> <span id="r1 rd" class="r1 r">services</span>)
        {
            <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<span class="i">IPermissionProvider</span>, <a href="Permissions.cs.html#8dd34a0b6ca71a99" class="t t">Permissions</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Navigation.Core/A.html#9919a71a2815e0c1" class="t t">INavigationProvider</a>, <a href="AdminMenu.cs.html#d55e92c494a6ebee" class="t t">AdminMenu</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.AdminMenu.Abstractions/A.html#411eb350ef0df087" class="t t">IAdminMenuPermissionService</a>, <a href="Services/AdminMenuPermissionService.cs.html#d92fa905e6deb035" class="t t">AdminMenuPermissionService</a>&gt;();
 
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="Services/IAdminMenuService.cs.html#22745452da53e06e" class="t t">IAdminMenuService</a>, <a href="Services/AdminMenuService.cs.html#ede6bb19e1a39762" class="t t">AdminMenuService</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="Services/AdminMenuNavigationProvidersCoordinator.cs.html#cf1153374b270a15" class="t t">AdminMenuNavigationProvidersCoordinator</a>, <a href="Services/AdminMenuNavigationProvidersCoordinator.cs.html#cf1153374b270a15" class="t t">AdminMenuNavigationProvidersCoordinator</a>&gt;();
 
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<span class="i">IDisplayManager</span>&lt;<a href="/OrchardCore.Navigation.Core/A.html#bf7f80a8e1a4549e" class="t t">MenuItem</a>&gt;, <span class="i">DisplayManager</span>&lt;<a href="/OrchardCore.Navigation.Core/A.html#bf7f80a8e1a4549e" class="t t">MenuItem</a>&gt;&gt;();
 
            <span class="r1 r">services</span>.<span class="i">AddRecipeExecutionStep</span>&lt;<a href="Recipes/AdminMenuStep.cs.html#03b83fbac5454152" class="t t">AdminMenuStep</a>&gt;();
 
            <span class="r1 r">services</span>.<span class="i method">AddTransient</span>&lt;<a href="/OrchardCore.Deployment.Abstractions/A.html#3725c29c555aae4b" class="t t">IDeploymentSource</a>, <a href="Deployment/AdminMenuDeploymentSource.cs.html#2653299c2bb4b4a7" class="t t">AdminMenuDeploymentSource</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddSingleton</span>&lt;<a href="/OrchardCore.Deployment.Abstractions/A.html#0278b1c515109d6f" class="t t">IDeploymentStepFactory</a>&gt;(<b>new</b> <a href="/OrchardCore.Deployment.Abstractions/A.html#1d89e786df97171c" class="t constructor">DeploymentStepFactory</a>&lt;<a href="Deployment/AdminMenuDeploymentStep.cs.html#39d32d34319b0a01" class="t t">AdminMenuDeploymentStep</a>&gt;());
            <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<span class="i">IDisplayDriver</span>&lt;<a href="/OrchardCore.Deployment.Abstractions/A.html#a7c74fedc1e66f4c" class="t t">DeploymentStep</a>&gt;, <a href="Deployment/AdminMenuDeploymentStepDriver.cs.html#a1d2bec361274df4" class="t t">AdminMenuDeploymentStepDriver</a>&gt;();
 
            <span class="c">// placeholder treeNode</span>
            <span class="r1 r">services</span>.<span class="i method">AddSingleton</span>&lt;<a href="/OrchardCore.AdminMenu.Abstractions/A.html#83bcbd69660f37ff" class="t t">IAdminNodeProviderFactory</a>&gt;(<b>new</b> <a href="/OrchardCore.AdminMenu.Abstractions/A.html#f9f036ea0b6b4b70" class="t constructor">AdminNodeProviderFactory</a>&lt;<a href="AdminNodes/PlaceholderAdminNode.cs.html#318fd9411ea25457" class="t t">PlaceholderAdminNode</a>&gt;());
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.AdminMenu.Abstractions/A.html#576c9f53cddc0450" class="t t">IAdminNodeNavigationBuilder</a>, <a href="AdminNodes/PlaceholderAdminNodeNavigationBuilder.cs.html#bcc588a1254409fa" class="t t">PlaceholderAdminNodeNavigationBuilder</a>&gt;();
            <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<span class="i">IDisplayDriver</span>&lt;<a href="/OrchardCore.Navigation.Core/A.html#bf7f80a8e1a4549e" class="t t">MenuItem</a>&gt;, <a href="AdminNodes/PlaceholderAdminNodeDriver.cs.html#b04c661db0b6e438" class="t t">PlaceholderAdminNodeDriver</a>&gt;();
 
            <span class="c">// link treeNode</span>
            <span class="r1 r">services</span>.<span class="i method">AddSingleton</span>&lt;<a href="/OrchardCore.AdminMenu.Abstractions/A.html#83bcbd69660f37ff" class="t t">IAdminNodeProviderFactory</a>&gt;(<b>new</b> <a href="/OrchardCore.AdminMenu.Abstractions/A.html#f9f036ea0b6b4b70" class="t constructor">AdminNodeProviderFactory</a>&lt;<a href="AdminNodes/LinkAdminNode.cs.html#48558f7829ef356e" class="t t">LinkAdminNode</a>&gt;());
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.AdminMenu.Abstractions/A.html#576c9f53cddc0450" class="t t">IAdminNodeNavigationBuilder</a>, <a href="AdminNodes/LinkAdminNodeNavigationBuilder.cs.html#0d256fcf641a2a8c" class="t t">LinkAdminNodeNavigationBuilder</a>&gt;();
            <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<span class="i">IDisplayDriver</span>&lt;<a href="/OrchardCore.Navigation.Core/A.html#bf7f80a8e1a4549e" class="t t">MenuItem</a>&gt;, <a href="AdminNodes/LinkAdminNodeDriver.cs.html#7eebb77e11901dbe" class="t t">LinkAdminNodeDriver</a>&gt;();
        }
 
        <b>public override void</b> <a id="259837a384dc632f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Configure</a>(<span class="t t">IApplicationBuilder</span> <span id="r2 rd" class="r2 r">builder</span>, <span class="t t">IEndpointRouteBuilder</span> <span id="r3 rd" class="r3 r">routes</span>, <span class="t t">IServiceProvider</span> <span id="r4 rd" class="r4 r">serviceProvider</span>)
        {
            <span class="c">// Menu</span>
            <b>var</b> <span id="r5 rd" class="r5 r">menuControllerName</span> = <b>typeof</b>(<a href="Controllers/MenuController.cs.html#71551b2f1f3c3aaa" class="t t">MenuController</a>).<span class="i">ControllerName</span>();
 
            <span class="r3 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r6 r">name</span>: <span class="s">&quot;AdminMenuList&quot;</span>,
                <span class="r7 r">areaName</span>: <span class="s">&quot;OrchardCore.AdminMenu&quot;</span>,
                <span class="r8 r">pattern</span>: <a href="#630c1b0a0035cec8" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/AdminMenu/List&quot;</span>,
                <span class="r9 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r5 r">menuControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/MenuController.cs.html#71551b2f1f3c3aaa" class="t t">MenuController</a>.<span class="i">List</span>) }
            );
            <span class="r3 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r6 r">name</span>: <span class="s">&quot;AdminMenuCreate&quot;</span>,
                <span class="r7 r">areaName</span>: <span class="s">&quot;OrchardCore.AdminMenu&quot;</span>,
                <span class="r8 r">pattern</span>: <a href="#630c1b0a0035cec8" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/AdminMenu/Create&quot;</span>,
                <span class="r9 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r5 r">menuControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/MenuController.cs.html#71551b2f1f3c3aaa" class="t t">MenuController</a>.<span class="i">Create</span>) }
            );
            <span class="r3 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r6 r">name</span>: <span class="s">&quot;AdminMenuDelete&quot;</span>,
                <span class="r7 r">areaName</span>: <span class="s">&quot;OrchardCore.AdminMenu&quot;</span>,
                <span class="r8 r">pattern</span>: <a href="#630c1b0a0035cec8" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/AdminMenu/Delete/{id}&quot;</span>,
                <span class="r9 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r5 r">menuControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/MenuController.cs.html#71551b2f1f3c3aaa" class="t t">MenuController</a>.<span class="i">Delete</span>) }
            );
            <span class="r3 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r6 r">name</span>: <span class="s">&quot;AdminMenuEdit&quot;</span>,
                <span class="r7 r">areaName</span>: <span class="s">&quot;OrchardCore.AdminMenu&quot;</span>,
                <span class="r8 r">pattern</span>: <a href="#630c1b0a0035cec8" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/AdminMenu/Edit/{id}&quot;</span>,
                <span class="r9 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r5 r">menuControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/MenuController.cs.html#71551b2f1f3c3aaa" class="t t">MenuController</a>.<span class="i">Edit</span>) }
            );
            <span class="r3 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r6 r">name</span>: <span class="s">&quot;AdminMenuToggle&quot;</span>,
                <span class="r7 r">areaName</span>: <span class="s">&quot;OrchardCore.AdminMenu&quot;</span>,
                <span class="r8 r">pattern</span>: <a href="#630c1b0a0035cec8" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/AdminMenu/Toggle/{id}&quot;</span>,
                <span class="r9 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r5 r">menuControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/MenuController.cs.html#71551b2f1f3c3aaa" class="t t">MenuController</a>.<span class="i">Toggle</span>) }
            );
 
            <span class="c">// Node</span>
            <b>var</b> <span id="r10 rd" class="r10 r">nodeControllerName</span> = <b>typeof</b>(<a href="Controllers/NodeController.cs.html#f0bf837f2300d455" class="t t">NodeController</a>).<span class="i">ControllerName</span>();
 
            <span class="r3 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r6 r">name</span>: <span class="s">&quot;AdminMenuNodeList&quot;</span>,
                <span class="r7 r">areaName</span>: <span class="s">&quot;OrchardCore.AdminMenu&quot;</span>,
                <span class="r8 r">pattern</span>: <a href="#630c1b0a0035cec8" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/AdminMenu/Node/List&quot;</span>,
                <span class="r9 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r10 r">nodeControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/NodeController.cs.html#f0bf837f2300d455" class="t t">NodeController</a>.<span class="i">List</span>) }
            );
            <span class="r3 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r6 r">name</span>: <span class="s">&quot;AdminMenuNodeCreate&quot;</span>,
                <span class="r7 r">areaName</span>: <span class="s">&quot;OrchardCore.AdminMenu&quot;</span>,
                <span class="r8 r">pattern</span>: <a href="#630c1b0a0035cec8" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/AdminMenu/Node/Create&quot;</span>,
                <span class="r9 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r10 r">nodeControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/NodeController.cs.html#f0bf837f2300d455" class="t t">NodeController</a>.<span class="i">Create</span>) }
            );
            <span class="r3 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r6 r">name</span>: <span class="s">&quot;AdminMenuNodeDelete&quot;</span>,
                <span class="r7 r">areaName</span>: <span class="s">&quot;OrchardCore.AdminMenu&quot;</span>,
                <span class="r8 r">pattern</span>: <a href="#630c1b0a0035cec8" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/AdminMenu/Node/Delete&quot;</span>,
                <span class="r9 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r10 r">nodeControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/NodeController.cs.html#f0bf837f2300d455" class="t t">NodeController</a>.<span class="i">Delete</span>) }
            );
            <span class="r3 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r6 r">name</span>: <span class="s">&quot;AdminMenuNodeEdit&quot;</span>,
                <span class="r7 r">areaName</span>: <span class="s">&quot;OrchardCore.AdminMenu&quot;</span>,
                <span class="r8 r">pattern</span>: <a href="#630c1b0a0035cec8" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/AdminMenu/Node/Edit&quot;</span>,
                <span class="r9 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r10 r">nodeControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/NodeController.cs.html#f0bf837f2300d455" class="t t">NodeController</a>.<span class="i">Edit</span>) }
            );
            <span class="r3 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r6 r">name</span>: <span class="s">&quot;AdminMenuNodeToggle&quot;</span>,
                <span class="r7 r">areaName</span>: <span class="s">&quot;OrchardCore.AdminMenu&quot;</span>,
                <span class="r8 r">pattern</span>: <a href="#630c1b0a0035cec8" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/AdminMenu/Node/Toggle&quot;</span>,
                <span class="r9 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r10 r">nodeControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/NodeController.cs.html#f0bf837f2300d455" class="t t">NodeController</a>.<span class="i">Toggle</span>) }
            );
            <span class="r3 r">routes</span>.<span class="i method">MapAreaControllerRoute</span>(
                <span class="r6 r">name</span>: <span class="s">&quot;AdminMenuNodeMoveNode&quot;</span>,
                <span class="r7 r">areaName</span>: <span class="s">&quot;OrchardCore.AdminMenu&quot;</span>,
                <span class="r8 r">pattern</span>: <a href="#630c1b0a0035cec8" class="i field">_adminOptions</a>.<a href="/OrchardCore.Admin.Abstractions/A.html#16eba6a799ca33d5" class="i property">AdminUrlPrefix</a> + <span class="s">&quot;/AdminMenu/Node/MoveNode&quot;</span>,
                <span class="r9 r">defaults</span>: <b>new</b> { <a href="#1c8758d845f4a816" class="i property">controller</a> = <span class="r10 r">nodeControllerName</span>, <a href="#4ce42354c8f69fc1" class="i property">action</a> = <b>nameof</b>(<a href="Controllers/NodeController.cs.html#f0bf837f2300d455" class="t t">NodeController</a>.<span class="i">MoveNode</span>) }
            );
        }
    }
}
</pre></td></tr></table></div></body></html>
