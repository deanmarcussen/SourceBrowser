<!DOCTYPE html>
<html><head><title>LiquidViewParser.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(89);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#OrchardCore.DisplayManagement.Liquid/LiquidViewParser.cs" target="_top">LiquidViewParser.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#OrchardCore.DisplayManagement.Liquid" target="_top">src\OrchardCore\OrchardCore.DisplayManagement.Liquid\OrchardCore.DisplayManagement.Liquid.csproj</a> (OrchardCore.DisplayManagement.Liquid)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">IO</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Text</span>.<span class="i n">Encodings</span>.<span class="i n">Web</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i">Fluid</span>;
<b>using</b> <span class="i">Fluid</span>.<span class="i">Ast</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">Options</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Liquid</span>.<span class="i n">Tags</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DynamicCache</span>.<span class="i n">Liquid</span>;
<b>using</b> <span class="i">Parlot</span>.<span class="i">Fluent</span>;
 
<b>namespace</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Liquid</span>
{
    <b>public class</b> <a id="10c79fc080ed5f86" href="R/10c79fc080ed5f86.html" target="n" data-glyph="0,0" class="t t">LiquidViewParser</a> : <span class="i">FluidParser</span>
    {
        <b>public</b> <a id="f183c518bbba8a0f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">LiquidViewParser</a>(<span class="t t">IOptions</span>&lt;<a href="LiquidViewOptions.cs.html#fd8f7b03c25fdca3" class="t t">LiquidViewOptions</a>&gt; <span id="r0 rd" class="r0 r">liquidViewOptions</span>)
        {
            <span class="i">RegisterEmptyTag</span>(<span class="s">&quot;render_body&quot;</span>, <a href="Tags/RenderBodyTag.cs.html#3b3da421986c8e6f" class="t t">RenderBodyTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;render_section&quot;</span>, <span class="i">ArgumentsList</span>, <a href="Tags/RenderSectionTag.cs.html#2411cc538986e6b7" class="t t">RenderSectionTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;page_title&quot;</span>, <span class="i">ArgumentsList</span>, <a href="Tags/RenderTitleSegmentsTag.cs.html#c7ca4aa6f41c1340" class="t t">RenderTitleSegmentsTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterEmptyTag</span>(<span class="s">&quot;antiforgerytoken&quot;</span>, <a href="Tags/AntiForgeryTokenTag.cs.html#367190ae31c6500d" class="t t">AntiForgeryTokenTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterExpressionTag</span>(<span class="s">&quot;layout&quot;</span>, <a href="Tags/LayoutTag.cs.html#7a406c25b09370bc" class="t t">LayoutTag</a>.<span class="i">WriteToAsync</span>);
 
            <span class="i">RegisterExpressionTag</span>(<span class="s">&quot;shape_clear_alternates&quot;</span>, <a href="Tags/ClearAlternatesTag.cs.html#a295d697670feda6" class="t t">ClearAlternatesTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;shape_add_alternates&quot;</span>, <span class="i">Primary</span>.<span class="i">And</span>(<span class="i">Primary</span>), <a href="Tags/AddAlternatesTag.cs.html#4b5828f27ad22baf" class="t t">AddAlternatesTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterExpressionTag</span>(<span class="s">&quot;shape_clear_wrappers&quot;</span>, <a href="Tags/ClearWrappersTag.cs.html#85b70fda20fbf09b" class="t t">ClearWrappers</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;shape_add_wrappers&quot;</span>, <span class="i">Primary</span>.<span class="i">And</span>(<span class="i">Primary</span>), <a href="Tags/AddWrappersTag.cs.html#b974475957910960" class="t t">AddWrappersTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterExpressionTag</span>(<span class="s">&quot;shape_clear_classes&quot;</span>, <a href="Tags/ClearClassesTag.cs.html#7999b732270c0af8" class="t t">ClearClassesTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;shape_add_classes&quot;</span>, <span class="i">Primary</span>.<span class="i">And</span>(<span class="i">Primary</span>), <a href="Tags/AddClassesTag.cs.html#4acdc7ad69e54642" class="t t">AddClassesTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterExpressionTag</span>(<span class="s">&quot;shape_clear_attributes&quot;</span>, <a href="Tags/ClearAttributesTag.cs.html#fc040166fc428974" class="t t">ClearAttributesTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;shape_add_attributes&quot;</span>, <span class="i">Primary</span>.<span class="i">And</span>(<span class="i">ArgumentsList</span>), <a href="Tags/AddAttributesTag.cs.html#c50cd1b38dfafb8c" class="t t">AddAttributesTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;shape_type&quot;</span>, <span class="i">Primary</span>.<span class="i">And</span>(<span class="i">Primary</span>), <a href="Tags/ShapeTypeTag.cs.html#5e7c1bf3a9b2e7bb" class="t t">ShapeTypeTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;shape_display_type&quot;</span>, <span class="i">Primary</span>.<span class="i">And</span>(<span class="i">Primary</span>), <a href="Tags/ShapeDisplayTypeTag.cs.html#418ec33a66c8871e" class="t t">ShapeDisplayTypeTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;shape_position&quot;</span>, <span class="i">Primary</span>.<span class="i">And</span>(<span class="i">Primary</span>), <a href="Tags/ShapePositionTag.cs.html#15b1b72eadbd254a" class="t t">ShapePositionTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;shape_cache&quot;</span>, <span class="i">Primary</span>.<span class="i">And</span>(<span class="i">ArgumentsList</span>), <a href="Tags/ShapeCacheTag.cs.html#6fbaa8913e8a98f5" class="t t">ShapeCacheTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;shape_tab&quot;</span>, <span class="i">Primary</span>.<span class="i">And</span>(<span class="i">Primary</span>), <a href="Tags/ShapeTabTag.cs.html#7c58e0eeb7b2f47d" class="t t">ShapeTabTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;shape_remove_item&quot;</span>, <span class="i">Primary</span>.<span class="i">And</span>(<span class="i">Primary</span>), <a href="Tags/ShapeRemoveItemTag.cs.html#e2dd7eadb7815147" class="t t">ShapeRemoveItemTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;shape_add_properties&quot;</span>, <span class="i">Primary</span>.<span class="i">And</span>(<span class="i">ArgumentsList</span>), <a href="Tags/ShapeAddPropertyTag.cs.html#44bddcd49853273e" class="t t">ShapeAddPropertyTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;shape_remove_property&quot;</span>, <span class="i">Primary</span>.<span class="i">And</span>(<span class="i">Primary</span>), <a href="Tags/ShapeRemovePropertyTag.cs.html#d9276415f29920e7" class="t t">ShapeRemovePropertyTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;shape_pager&quot;</span>, <span class="i">Primary</span>.<span class="i">And</span>(<span class="i">ArgumentsList</span>), <a href="Tags/ShapePagerTag.cs.html#fb4842b5410fb041" class="t t">ShapePagerTag</a>.<span class="i">WriteToAsync</span>);
 
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;httpcontext_add_items&quot;</span>, <span class="i">ArgumentsList</span>, <a href="Tags/HttpContextAddItemTag.cs.html#f510a4227578de35" class="t t">HttpContextAddItemTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;httpcontext_remove_items&quot;</span>, <span class="i">Primary</span>, <a href="Tags/HttpContextRemoveItemTag.cs.html#06dac64a9c40dad5" class="t t">HttpContextRemoveItemTag</a>.<span class="i">WriteToAsync</span>);
 
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;helper&quot;</span>, <span class="i">ArgumentsList</span>, <a href="Tags/FluidTagHelper.cs.html#2be209d31b4d8766" class="t t">FluidTagHelper</a>.<span class="i">WriteArgumentsTagHelperAsync</span>);
            <span class="i">RegisterParserBlock</span>(<span class="s">&quot;block&quot;</span>, <span class="i">ArgumentsList</span>, <a href="Tags/FluidTagHelper.cs.html#2be209d31b4d8766" class="t t">FluidTagHelper</a>.<span class="i">WriteArgumentsBlockHelperAsync</span>);
 
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;shape&quot;</span>, <span class="i">ArgumentsList</span>, <a href="Tags/ShapeTag.cs.html#9fc412c498c955ba" class="t t">ShapeTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserBlock</span>(<span class="s">&quot;zone&quot;</span>, <span class="i">ArgumentsList</span>, <a href="Tags/ZoneTag.cs.html#dd4b30933c2a2ba4" class="t t">ZoneTag</a>.<span class="i">WriteToAsync</span>);
 
            <span class="i">RegisteredTags</span>[<span class="s">&quot;a&quot;</span>] = <span class="i">ArgumentsList</span>.<span class="i">AndSkip</span>(<span class="i">TagEnd</span>).<span class="i">And</span>(<span class="i">Parsers</span>.<span class="i">ZeroOrOne</span>(<span class="i">AnyTagsList</span>.<span class="i">AndSkip</span>(<span class="i">CreateTag</span>(<span class="s">&quot;enda&quot;</span>)))).<span class="i">Then</span>&lt;<span class="i">Statement</span>&gt;(<span id="r1 rd" class="r1 r">x</span> =&gt; <b>new</b> <span class="t">ParserBlockStatement</span>&lt;<span class="t t">List</span>&lt;<span class="i">FilterArgument</span>&gt;&gt;(<span class="r1 r">x</span>.<span class="i">Item1</span>, <span class="r1 r">x</span>.<span class="i">Item2</span>, <a href="Tags/DefaultAnchorTag.cs.html#3d62d8c6dc6bcec7" class="t t">DefaultAnchorTag</a>.<span class="i">WriteToAsync</span>));
            <span class="i">RegisterParserBlock</span>(<span class="s">&quot;form&quot;</span>, <span class="i">ArgumentsList</span>, (<span id="r2 rd" class="r2 r">list</span>, <span id="r3 rd" class="r3 r">statements</span>, <span id="r4 rd" class="r4 r">writer</span>, <span id="r5 rd" class="r5 r">encoder</span>, <span id="r6 rd" class="r6 r">context</span>) =&gt; <a href="Tags/FluidTagHelper.cs.html#2be209d31b4d8766" class="t t">FluidTagHelper</a>.<span class="i">WriteToAsync</span>(<span class="s">&quot;form&quot;</span>, <span class="r2 r">list</span>, <span class="r3 r">statements</span>, <span class="r4 r">writer</span>, <span class="r5 r">encoder</span>, <span class="r6 r">context</span>));
 
            <span class="c">// Dynamic caching</span>
            <span class="i">RegisterParserBlock</span>(<span class="s">&quot;cache&quot;</span>, <span class="i">ArgumentsList</span>, <a href="Cache/CacheTag.cs.html#c8e6e65778177b3f" class="t t">CacheTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;cache_dependency&quot;</span>, <span class="i">Primary</span>, <a href="Cache/CacheDependencyTag.cs.html#8e564b2c73be06b9" class="t t">CacheDependencyTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;cache_expires_on&quot;</span>, <span class="i">Primary</span>, <a href="Cache/CacheExpiresOnTag.cs.html#20c4d3a8ed6197f4" class="t t">CacheExpiresOnTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;cache_expires_after&quot;</span>, <span class="i">Primary</span>, <a href="Cache/CacheExpiresAfterTag.cs.html#ec41080603b29ae0" class="t t">CacheExpiresAfterTag</a>.<span class="i">WriteToAsync</span>);
            <span class="i">RegisterParserTag</span>(<span class="s">&quot;cache_expires_sliding&quot;</span>, <span class="i">Primary</span>, <a href="Cache/CacheExpiresSlidingTag.cs.html#6c4374fd65cbfbfc" class="t t">CacheExpiresSlidingTag</a>.<span class="i">WriteToAsync</span>);
 
            <b>foreach</b> (<a href="@1@System.Runtime/A.html#486d58da4553e12d" class="k">var</a> <span id="r7 rd" class="r7 r">configuration</span> <b>in</b> <span class="r0 r">liquidViewOptions</span>.<span class="i property">Value</span>.<a href="LiquidViewOptions.cs.html#40a5b1a4dca6d7da" class="i property">LiquidViewParserConfiguration</a>)
            {
                <span class="r7 r">configuration</span>(<a href="#10c79fc080ed5f86" class="k">this</a>);
            }
        }
 
        <b>public</b> <span class="i">Parser</span>&lt;<span class="t t">List</span>&lt;<span class="i">FilterArgument</span>&gt;&gt; <a id="8f2785986cad404e" href="R/8f2785986cad404e.html" target="n" data-glyph="102,1" class="i property">ArgumentsListParser</a> =&gt; <span class="i">ArgumentsList</span>;
 
        <b>internal sealed class</b> <a id="7f043aedc64a0300" href="R/../../0000000000.html" target="n" data-glyph="2,1" class="t t">ParserBlockStatement</a>&lt;<span id="r8 rd t" class="r8 r t">T</span>&gt; : <span class="i">TagStatement</span>
        {
            <b>private readonly</b> <a href="@1@System.Runtime/A.html#fdd2ca45a177b5fd" class="t t">Func</a>&lt;<span class="r8 r t">T</span>, <a href="@1@System.Runtime/A.html#b040fb780bdd59f4" class="t t">IReadOnlyList</a>&lt;<span class="i">Statement</span>&gt;, <a href="@1@System.Runtime/A.html#6e84a88dc2be46e3" class="t t">TextWriter</a>, <span class="t t">TextEncoder</span>, <span class="i">TemplateContext</span>, <a href="@1@System.Runtime/A.html#77a292425839ae85" class="t t">ValueTask</a>&lt;<span class="i">Completion</span>&gt;&gt; <a id="4330d9f45519b2d9" href="R/4330d9f45519b2d9.html" target="n" data-glyph="46,2" class="i field">_render</a>;
 
            <b>public</b> <a id="9caa433f82eaffd7" href="R/../../0000000000.html" target="n" data-glyph="72,2" class="t constructor">ParserBlockStatement</a>(<span class="r8 r t">T</span> <span id="r9 rd" class="r9 r">value</span>, <span class="t t">List</span>&lt;<span class="i">Statement</span>&gt; <span id="r10 rd" class="r10 r">statements</span>, <a href="@1@System.Runtime/A.html#fdd2ca45a177b5fd" class="t t">Func</a>&lt;<span class="r8 r t">T</span>, <a href="@1@System.Runtime/A.html#b040fb780bdd59f4" class="t t">IReadOnlyList</a>&lt;<span class="i">Statement</span>&gt;, <a href="@1@System.Runtime/A.html#6e84a88dc2be46e3" class="t t">TextWriter</a>, <span class="t t">TextEncoder</span>, <span class="i">TemplateContext</span>, <a href="@1@System.Runtime/A.html#77a292425839ae85" class="t t">ValueTask</a>&lt;<span class="i">Completion</span>&gt;&gt; <span id="r11 rd" class="r11 r">render</span>) : <b>base</b>(<span class="r10 r">statements</span>)
            {
                <a href="#c595703f5782e615" class="i property">Value</a> = <span class="r9 r">value</span>;
                <a href="#4330d9f45519b2d9" class="i field">_render</a> = <span class="r11 r">render</span> ?? <b>throw</b> <b>new</b> <a href="@1@System.Runtime/A.html#8314938388254d5a" class="t constructor">ArgumentNullException</a>(<b>nameof</b>(<span class="r11 r">render</span>));
            }
 
            <b>public</b> <span class="r8 r t">T</span> <a id="c595703f5782e615" href="R/c595703f5782e615.html" target="n" data-glyph="102,2" class="i property">Value</a> { <b>get</b>; }
 
            <b>public override</b> <a href="@1@System.Runtime/A.html#77a292425839ae85" class="t t">ValueTask</a>&lt;<span class="i">Completion</span>&gt; <a id="6159c47598fff438" href="R/../../0000000000.html" target="n" data-glyph="72,2" class="i method">WriteToAsync</a>(<a href="@1@System.Runtime/A.html#6e84a88dc2be46e3" class="t t">TextWriter</a> <span id="r12 rd" class="r12 r">writer</span>, <span class="t t">TextEncoder</span> <span id="r13 rd" class="r13 r">encoder</span>, <span class="i">TemplateContext</span> <span id="r14 rd" class="r14 r">context</span>)
            {
                <b>return</b> <a href="#4330d9f45519b2d9" class="i field">_render</a>(<a href="#c595703f5782e615" class="i property">Value</a>, <span class="i">Statements</span>, <span class="r12 r">writer</span>, <span class="r13 r">encoder</span>, <span class="r14 r">context</span>);
            }
        }
    }
}
</pre></td></tr></table></div></body></html>
