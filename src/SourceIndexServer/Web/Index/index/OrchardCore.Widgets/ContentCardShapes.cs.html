<!DOCTYPE html>
<html><head><title>ContentCardShapes.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(145);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#OrchardCore.Widgets/ContentCardShapes.cs" target="_top">ContentCardShapes.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#OrchardCore.Widgets" target="_top">src\OrchardCore.Modules\OrchardCore.Widgets\OrchardCore.Widgets.csproj</a> (OrchardCore.Widgets)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">DisplayManagement</span>.<span class="i">Descriptors</span>;
 
<b>namespace</b> <span class="i n">OrchardCore</span>.<span class="i n">Widgets</span>
{
    <b>public class</b> <a id="969538d8890526bf" href="R/969538d8890526bf.html" target="n" data-glyph="0,0" class="t t"><span id="530edc91b4ae93d1">ContentCardShapes</span></a> : <span class="i">IShapeTableProvider</span>
    {
        <span class="c">//Card Shape</span>
        <b>private const string</b> <a id="e3865dfa78cf6ec9" href="R/e3865dfa78cf6ec9.html" target="n" data-glyph="10,1" class="i field">ContentCardEdit</a> = <span class="s">&quot;ContentCard_Edit&quot;</span>;
 
        <span class="c">//Frame shape</span>
        <b>private const string</b> <a id="83627de58fef0317" href="R/83627de58fef0317.html" target="n" data-glyph="10,1" class="i field">ContentCardFrame</a> = <span class="s">&quot;ContentCard_Frame&quot;</span>;
 
        <span class="c">//Card Editor Fields</span>
        <b>private const string</b> <a id="de79bc6517089ad4" href="R/de79bc6517089ad4.html" target="n" data-glyph="10,1" class="i field">ContentCardFieldsEdit</a> = <span class="s">&quot;ContentCard_Fields_Edit&quot;</span>;
 
        <b>public void</b> <a id="9b6b64cc1e4c8cac" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Discover</a>(<span class="i">ShapeTableBuilder</span> <span id="r0 rd" class="r0 r">builder</span>)
        {
            <span class="r0 r">builder</span>.<span class="i">Describe</span>(<a href="#e3865dfa78cf6ec9" class="i field">ContentCardEdit</a>)
                .<span class="i">OnDisplaying</span>(<span id="r1 rd" class="r1 r">context</span> =&gt;
                {
                    <span class="c">//Defines Edit Alternates for the Content Item being edited.</span>
                    <b>dynamic</b> <span id="r2 rd" class="r2 r">contentCardEditor</span> = <span class="r1 r">context</span>.<span class="i">Shape</span>;
                    <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r3 rd" class="r3 r">collectionType</span> = <span class="r2 r">contentCardEditor</span>.<span class="i">CollectionShapeType</span>;
                    <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r4 rd" class="r4 r">contentType</span> = <span class="r2 r">contentCardEditor</span>.<span class="i">ContentTypeValue</span>;
                    <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r5 rd" class="r5 r">parentContentType</span> = <span class="r2 r">contentCardEditor</span>.<span class="i">ParentContentType</span>;
                    <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r6 rd" class="r6 r">namedPart</span> = <span class="r2 r">contentCardEditor</span>.<span class="i">CollectionPartName</span>;
                    <b>if</b> (<span class="r2 r">contentCardEditor</span>.<span class="i">BuildEditor</span> == <b>true</b>)
                    {
                        <span class="c">//Define edit card shape per collection type</span>
                        <span class="c">//ContentCard_Edit__[CollectionType]</span>
                        <span class="c">//e.g. ContentCard_Edit__FlowPart, ContentCard_Edit__BagPart, ContentCard_Edit__WidgetsListPart</span>
                        <span class="r2 r">contentCardEditor</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#e3865dfa78cf6ec9" class="i field">ContentCardEdit</a>}<span class="s">__</span>{<span class="r3 r">collectionType</span>}<span class="s">&quot;</span>);
 
                        <span class="c">//Define edit card shape per content type</span>
                        <span class="c">// ContentCard_Edit__[ContentType] e.g. ContentCard_Edit__Paragraph, ContentCard_Edit__Form, ContentCard_Edit__Input</span>
                        <span class="r2 r">contentCardEditor</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#e3865dfa78cf6ec9" class="i field">ContentCardEdit</a>}<span class="s">__</span>{<span class="r4 r">contentType</span>}<span class="s">&quot;</span>);
 
                        <span class="c">//Define edit card shape per content type per collection type</span>
                        <span class="c">//ContentCard_Edit__[CollectionType]__[ContentType]</span>
                        <span class="c">//e.g. ContentCard_Edit__FlowPart__Paragraph, ContentCard_Edit__BagPart__Form, ContentCard_Edit__FlowPart__Input</span>
                        <span class="r2 r">contentCardEditor</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#e3865dfa78cf6ec9" class="i field">ContentCardEdit</a>}<span class="s">__</span>{<span class="r3 r">collectionType</span>}<span class="s">__</span>{<span class="r4 r">contentType</span>}<span class="s">&quot;</span>);
 
                        <span class="c">//If we have Parent Content Type,</span>
                        <b>if</b> (!<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@System.Runtime/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r5 r">parentContentType</span>))
                        {
                            <span class="c">//Define edit card shape for all child  in collection per parent content type</span>
                            <span class="c">//ContentCard_Edit__[ParentContentType]__[CollectionType]</span>
                            <span class="c">//e.g. ContentCard_Edit__Page__FlowPart, ContentCard_Edit__Form__FlowPart, ContentCard_Edit__Services__BagPart</span>
                            <span class="r2 r">contentCardEditor</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#e3865dfa78cf6ec9" class="i field">ContentCardEdit</a>}<span class="s">__</span>{<span class="r5 r">parentContentType</span>}<span class="s">__</span>{<span class="r3 r">collectionType</span>}<span class="s">&quot;</span>);
 
                            <span class="c">//Define edit card shape for selected child  with specific type per parent content type</span>
                            <span class="c">//ContentCard_Edit__[ParentContentType]__[ContentType]</span>
                            <span class="c">//e.g. ContentCard_Edit__Page__Form, ContentCard_Edit__Form__Label, ContentCard_Edit__LandingPage__Service</span>
                            <span class="r2 r">contentCardEditor</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#e3865dfa78cf6ec9" class="i field">ContentCardEdit</a>}<span class="s">__</span>{<span class="r5 r">parentContentType</span>}<span class="s">__</span>{<span class="r4 r">contentType</span>}<span class="s">&quot;</span>);
 
                            <span class="c">//Define edit card shape for selected child  with specific type per parent content type for given collection</span>
                            <span class="c">//ContentCard_Edit__[ParentContentType]__[CollectionType]__[ContentType] e.g. ContentCard_Edit__LandingPage__FlowPart__Service,</span>
                            <span class="c">//ContentCard_Edit__LandingPage__BagPart__Service, ContentCard_Edit__Form__FlowPart__Label</span>
                            <span class="r2 r">contentCardEditor</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#e3865dfa78cf6ec9" class="i field">ContentCardEdit</a>}<span class="s">__</span>{<span class="r5 r">parentContentType</span>}<span class="s">__</span>{<span class="r3 r">collectionType</span>}<span class="s">__</span>{<span class="r4 r">contentType</span>}<span class="s">&quot;</span>);
 
                            <b>if</b> (!<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a>.<a href="@1@System.Runtime/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r6 r">namedPart</span>) &amp;&amp; !(<span class="r6 r">namedPart</span>.<a href="@1@System.Runtime/A.html#31b307b02a3bd6b9" class="i method">Equals</a>(<span class="r3 r">collectionType</span>)))
                            {
                                <span class="c">//Define edit card shape for selected child  with specific type and partname per parent content type</span>
                                <span class="c">//ContentCard_Edit__[ParentContentType]__[PartName]</span>
                                <span class="c">//e.g. ContentCard_Edit__Grid__LeftColumn, ContentCard_Edit__LandingPage__Services</span>
                                <span class="r2 r">contentCardEditor</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#e3865dfa78cf6ec9" class="i field">ContentCardEdit</a>}<span class="s">__</span>{<span class="r5 r">parentContentType</span>}<span class="s">__</span>{<span class="r6 r">namedPart</span>}<span class="s">&quot;</span>);
 
                                <span class="c">//Define edit card shape for selected child  with specific type and partname per parent content type</span>
                                <span class="c">//ContentCard_Edit__[ContentType]__[ContentType]</span>
                                <span class="c">//e.g. ContentCard_Edit__Grid__LeftColumn__Client, ContentCard_Edit__LandingPage__Services__Service</span>
                                <span class="r2 r">contentCardEditor</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#e3865dfa78cf6ec9" class="i field">ContentCardEdit</a>}<span class="s">__</span>{<span class="r5 r">parentContentType</span>}<span class="s">__</span>{<span class="r6 r">namedPart</span>}<span class="s">__</span>{<span class="r4 r">contentType</span>}<span class="s">&quot;</span>);
                            }
                        }
                    }
                });
 
            <span class="r0 r">builder</span>.<span class="i">Describe</span>(<a href="#83627de58fef0317" class="i field">ContentCardFrame</a>)
                .<span class="i">OnDisplaying</span>(<span id="r7 rd" class="r7 r">context</span> =&gt;
                {
                    <span class="c">// Alternates for Outer Frame of ContentCard</span>
                    <b>dynamic</b> <span id="r8 rd" class="r8 r">contentCardFrame</span> = <span class="r7 r">context</span>.<span class="i">Shape</span>;
                    <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r9 rd" class="r9 r">collectionType</span> = <span class="r8 r">contentCardFrame</span>.<span class="i">ChildContent</span>.<span class="i">CollectionShapeType</span>;
                    <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r10 rd" class="r10 r">contentType</span> = <span class="r8 r">contentCardFrame</span>.<span class="i">ChildContent</span>.<span class="i">ContentTypeValue</span> <b>as string</b>;
                    <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r11 rd" class="r11 r">parentContentType</span> = <span class="r8 r">contentCardFrame</span>.<span class="i">ChildContent</span>.<span class="i">ParentContentType</span>;
                    <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r12 rd" class="r12 r">namedPart</span> = <span class="r8 r">contentCardFrame</span>.<span class="i">ChildContent</span>.<span class="i">CollectionPartName</span>;
 
                    <span class="c">//Define Frame card shape per collection type</span>
                    <span class="c">//ContentCard_Frame__[CollectionType]</span>
                    <span class="c">//e.g. ContentCard_Frame__FlowPart, ContentCard_Frame__BagPart, ContentCard_Frame__WidgetsListPart</span>
                    <span class="r8 r">contentCardFrame</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#83627de58fef0317" class="i field">ContentCardFrame</a>}<span class="s">__</span>{<span class="r9 r">collectionType</span>}<span class="s">&quot;</span>);
 
                    <span class="c">//Define Frame card shape per content type</span>
                    <span class="c">//ContentCard_Frame__[ContentType]</span>
                    <span class="c">//e.g. ContentCard_Frame__Paragraph, ContentCard_Frame__Form, ContentCard_Frame__Input</span>
                    <span class="r8 r">contentCardFrame</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#83627de58fef0317" class="i field">ContentCardFrame</a>}<span class="s">__</span>{<span class="r10 r">contentType</span>}<span class="s">&quot;</span>);
 
                    <span class="c">//Define Frame card shape per content type per collection type</span>
                    <span class="c">//ContentCard_Frame__[CollectionType]__[ContentType]</span>
                    <span class="c">//e.g. ContentCard_Frame__FlowPart__Paragraph, ContentCard_Frame__BagPart__Form, ContentCard_Frame__FlowPart__Input</span>
                    <span class="r8 r">contentCardFrame</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#83627de58fef0317" class="i field">ContentCardFrame</a>}<span class="s">__</span>{<span class="r9 r">collectionType</span>}<span class="s">__</span>{<span class="r10 r">contentType</span>}<span class="s">&quot;</span>);
 
                    <b>if</b> (!<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@1@System.Runtime/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r11 r">parentContentType</span>))
                    {
                        <span class="c">//Define frame card shape for children per parent content type for given collection</span>
                        <span class="c">//ContentCard_Frame__[ParentContentType]__[CollectionType]</span>
                        <span class="c">//e.g. ContentCard_Frame__Page__FlowPart, ContentCard_Frame__LandingPage__BagPart, ContentCard_Frame__Form__FlowPart</span>
                        <span class="r8 r">contentCardFrame</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#83627de58fef0317" class="i field">ContentCardFrame</a>}<span class="s">__</span>{<span class="r11 r">parentContentType</span>}<span class="s">__</span>{<span class="r9 r">collectionType</span>}<span class="s">&quot;</span>);
 
                        <span class="c">//Define frame card shape for child with specific type per parent content type</span>
                        <span class="c">//ContentCard_Frame__[ParentContentType]__[ContentType]</span>
                        <span class="c">//e.g. ContentCard_Frame__Page__Form, ContentCard_Frame__Form__Label</span>
                        <span class="r8 r">contentCardFrame</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#83627de58fef0317" class="i field">ContentCardFrame</a>}<span class="s">__</span>{<span class="r11 r">parentContentType</span>}<span class="s">__</span>{<span class="r10 r">contentType</span>}<span class="s">&quot;</span>);
 
                        <span class="c">//Define edit frame shape for selected child  with specific type per parent content type for given collection</span>
                        <span class="c">//ContentCard_Frame__[ParentContentType]__[CollectionType]__[ContentType]</span>
                        <span class="c">//e.g. ContentCard_Frame__Page__FlowPart__Container, ContentCard_Frame__LandingPage__BagPart__Service, ContentCard_Frame__Form__FlowPart__Label</span>
                        <span class="r8 r">contentCardFrame</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#83627de58fef0317" class="i field">ContentCardFrame</a>}<span class="s">__</span>{<span class="r11 r">parentContentType</span>}<span class="s">__</span>{<span class="r9 r">collectionType</span>}<span class="s">__</span>{<span class="r10 r">contentType</span>}<span class="s">&quot;</span>);
 
                        <b>if</b> (!<a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="t t">String</a>.<a href="@1@System.Runtime/A.html#55e241b6143365ef" class="i method">IsNullOrWhiteSpace</a>(<span class="r12 r">namedPart</span>) &amp;&amp; !<span class="r12 r">namedPart</span>.<a href="@1@System.Runtime/A.html#31b307b02a3bd6b9" class="i method">Equals</a>(<span class="r9 r">collectionType</span>))
                        {
                            <span class="c">//Define frame card shape for child  with specific partname and parent content type</span>
                            <span class="c">//ContentCard_Frame__[ParentContentType]__[PartName]</span>
                            <span class="c">//e.g. ContentCard_Frame__Grid__LeftColumn, ContentCard_Frame__LandingPage__Services</span>
                            <span class="r8 r">contentCardFrame</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#83627de58fef0317" class="i field">ContentCardFrame</a>}<span class="s">__</span>{<span class="r11 r">parentContentType</span>}<span class="s">__</span>{<span class="r12 r">namedPart</span>}<span class="s">&quot;</span>);
 
                            <span class="c">//Define edit card shape for selected child with specific type per parent content type</span>
                            <span class="c">//ContentCard_Frame__[ParentContentType]__[NamedPart]__[ContentType]</span>
                            <span class="c">//e.g. ContentCard_Frame__Grid__LeftColumn__Client, ContentCard_Frame__LandingPage__Clients__Client</span>
                            <span class="r8 r">contentCardFrame</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<a href="#83627de58fef0317" class="i field">ContentCardFrame</a>}<span class="s">__</span>{<span class="r11 r">parentContentType</span>}<span class="s">__</span>{<span class="r12 r">namedPart</span>}<span class="s">__</span>{<span class="r10 r">contentType</span>}<span class="s">&quot;</span>);
                        }
                    }
                });
 
            <span class="r0 r">builder</span>.<span class="i">Describe</span>(<a href="#de79bc6517089ad4" class="i field">ContentCardFieldsEdit</a>)
               .<span class="i">OnDisplaying</span>(<span id="r13 rd" class="r13 r">context</span> =&gt;
               {
                   <b>dynamic</b> <span id="r14 rd" class="r14 r">contentCardEditorFields</span> = <span class="r13 r">context</span>.<span class="i">Shape</span>;
                   <a href="@1@System.Runtime/A.html#8281103e6f23cb5c" class="k">string</a> <span id="r15 rd" class="r15 r">collectionType</span> = <span class="r14 r">contentCardEditorFields</span>.<span class="i">CardShape</span>.<span class="i">CollectionShapeType</span> <b>as string</b>;
                   <span class="r14 r">contentCardEditorFields</span>.<span class="i">Metadata</span>.<span class="i">Alternates</span>.<span class="i">Add</span>(<span class="s">$&quot;</span>{<span class="r15 r">collectionType</span>}<span class="s">_Fields_Edit</span><span class="s">&quot;</span>);
               });
        }
    }
}
</pre></td></tr></table></div></body></html>
