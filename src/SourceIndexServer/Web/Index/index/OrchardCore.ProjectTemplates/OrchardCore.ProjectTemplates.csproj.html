<!DOCTYPE html>
<html><head><title>OrchardCore.ProjectTemplates.csproj</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="ix(98);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#OrchardCore.ProjectTemplates/OrchardCore.ProjectTemplates.csproj" target="_top">OrchardCore.ProjectTemplates.csproj</a><br/></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="xd">&lt;</span><span class="xn">Project </span><span class="xan">Sdk</span><span class="xd">=</span>&quot;<span class="xav">Microsoft.NET.Sdk</span>&quot;<span class="xd">&gt;</span><span class="xd">
  &lt;</span><span class="xn">Import </span><span class="xan"><a href="/MSBuildFiles/e/Repos/OrchardCore/src/OrchardCore.Build/OrchardCore.Commons.props.html" class="msbuildlink">Project</a></span><span class="xd">=</span>&quot;<span class="xav">..\..\OrchardCore.Build\OrchardCore.Commons.props</span>&quot; <span class="xd">/&gt;</span><span class="xd">
  &lt;</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildItems/R/PackageReference.html" target="n" class="msbuildlink">PackageReference</a> </span><span class="xan">Remove</span><span class="xd">=</span>&quot;<span class="xav">Microsoft.SourceLink.GitHub</span>&quot; <span class="xd">/&gt;</span><span class="xd">
  &lt;/</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
  &lt;</span><span class="xn">PropertyGroup</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/TargetFrameworks.html" target="n" class="msbuildlink">TargetFrameworks</a></span><span class="xd">&gt;</span>$(<a href="/MSBuildProperties/R/AspNetCoreTargetFrameworks.html" target="n" class="msbuildlink">AspNetCoreTargetFrameworks</a>)<span class="xd">&lt;/</span><span class="xn">TargetFrameworks</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/IncludeBuildOutput.html" target="n" class="msbuildlink">IncludeBuildOutput</a></span><span class="xd">&gt;</span>False<span class="xd">&lt;/</span><span class="xn">IncludeBuildOutput</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/IncludeSource.html" target="n" class="msbuildlink">IncludeSource</a></span><span class="xd">&gt;</span>False<span class="xd">&lt;/</span><span class="xn">IncludeSource</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/GenerateAssemblyInfo.html" target="n" class="msbuildlink">GenerateAssemblyInfo</a></span><span class="xd">&gt;</span>False<span class="xd">&lt;/</span><span class="xn">GenerateAssemblyInfo</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/EnableDefaultItems.html" target="n" class="msbuildlink">EnableDefaultItems</a></span><span class="xd">&gt;</span>False<span class="xd">&lt;/</span><span class="xn">EnableDefaultItems</span><span class="xd">&gt;</span><span class="xd">
    &lt;!--</span><span class="c">
      By default, nuget will not pack files / folders that being with a &#39;.&#39;.
      This setting changes that so that the .template.config folder will be included.
    </span><span class="xd">--&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/NoDefaultExcludes.html" target="n" class="msbuildlink">NoDefaultExcludes</a></span><span class="xd">&gt;</span>True<span class="xd">&lt;/</span><span class="xn">NoDefaultExcludes</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/TreatWarningsAsErrors.html" target="n" class="msbuildlink">TreatWarningsAsErrors</a></span><span class="xd">&gt;</span>False<span class="xd">&lt;/</span><span class="xn">TreatWarningsAsErrors</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/PackageType.html" target="n" class="msbuildlink">PackageType</a></span><span class="xd">&gt;</span>Template<span class="xd">&lt;/</span><span class="xn">PackageType</span><span class="xd">&gt;</span><span class="xd">
    &lt;!--</span><span class="c">
      The previous code used a nuget package to allow the &#39;RoslynCodeTaskFactory&#39; (see the ReplaceFileText task definition below) to be used.
      The latest versions of the build tooling have now incorporated the &#39;RoslynCodeTaskFactory&#39; into its own codebase, and thus no package references are needed now.
      This led to the NU5128 warning, which is now being ignored. See the following error message.
      The error message is not accurate, as it indicates there is no content. It should say assemblies instead, since we have content but no assemblies.
        NU5128 warning: Ignore since the project template package doesn&#39;t contain content or references to other packages.
    </span><span class="xd">--&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/NoWarn.html" target="n" class="msbuildlink">NoWarn</a></span><span class="xd">&gt;</span>CS8021,CS2008,NU5128<span class="xd">&lt;/</span><span class="xn">NoWarn</span><span class="xd">&gt;</span><span class="xd">
    &lt;!--</span><span class="c">
      Prevent the symbol package from being created as this nuget package doesn&#39;t have package refs or assemblies.
      Otherwise, the following error will be thrown by `dotnet pack`: error NU5017: Cannot create a package that has no dependencies nor content.
    </span><span class="xd">--&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/IncludeSymbols.html" target="n" class="msbuildlink">IncludeSymbols</a></span><span class="xd">&gt;</span>False<span class="xd">&lt;/</span><span class="xn">IncludeSymbols</span><span class="xd">&gt;</span><span class="xd">
    &lt;!--</span><span class="c"> NuGet properties</span><span class="xd">--&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/Title.html" target="n" class="msbuildlink">Title</a></span><span class="xd">&gt;</span>OrchardCore Code Generation Templates<span class="xd">&lt;/</span><span class="xn">Title</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/Description.html" target="n" class="msbuildlink">Description</a></span><span class="xd">&gt;</span>$(<a href="/MSBuildProperties/R/OCFrameworkDescription.html" target="n" class="msbuildlink">OCFrameworkDescription</a>)
 
    OrchardCore Code Templates for dotnet new template configurations for creating new websites, themes and modules from the command shell.<span class="xd">&lt;/</span><span class="xn">Description</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildProperties/R/PackageTags.html" target="n" class="msbuildlink">PackageTags</a></span><span class="xd">&gt;</span>$(<a href="/MSBuildProperties/R/PackageTags.html" target="n" class="msbuildlink">PackageTags</a>) OrchardCoreFramework<span class="xd">&lt;/</span><span class="xn">PackageTags</span><span class="xd">&gt;</span><span class="xd">
  &lt;/</span><span class="xn">PropertyGroup</span><span class="xd">&gt;</span><span class="xd">
 
  &lt;</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildItems/R/None.html" target="n" class="msbuildlink">None</a> </span><span class="xan">Include</span><span class="xd">=</span>&quot;<span class="xav">content\**</span>&quot; <span class="xan">Exclude</span><span class="xd">=</span>&quot;<span class="xav">**\.template.config.src\**</span>&quot; <span class="xan">Pack</span><span class="xd">=</span>&quot;<span class="xav">true</span>&quot;<span class="xd">&gt;</span><span class="xd">
      &lt;</span><span class="xn">PackagePath</span><span class="xd">&gt;</span>content\%(RecursiveDir)%(FileName)%(Extension)<span class="xd">&lt;/</span><span class="xn">PackagePath</span><span class="xd">&gt;</span><span class="xd">
    &lt;/</span><span class="xn">None</span><span class="xd">&gt;</span><span class="xd">
  &lt;/</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
 
  &lt;</span><span class="xn"><a href="/MSBuildTasks/R/ReplaceFileText.html" target="n" class="msbuildlink">UsingTask</a> </span><span class="xan">TaskName</span><span class="xd">=</span>&quot;<span class="xav"><a href="/Microsoft.Build.Tasks.Core/A.html#57e9b568cf0a512f" class="msbuildlink">ReplaceFileText</a></span>&quot; <span class="xan">TaskFactory</span><span class="xd">=</span>&quot;<span class="xav">RoslynCodeTaskFactory</span>&quot; <span class="xan">AssemblyFile</span><span class="xd">=</span>&quot;<span class="xav">$(<a href="/MSBuildProperties/R/MSBuildToolsPath.html" target="n" class="msbuildlink">MSBuildToolsPath</a>)\Microsoft.Build.Tasks.Core.dll</span>&quot;<span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn">ParameterGroup</span><span class="xd">&gt;</span><span class="xd">
      &lt;</span><span class="xn">InputFilename </span><span class="xan">ParameterType</span><span class="xd">=</span>&quot;<span class="xav">System.String</span>&quot; <span class="xan">Required</span><span class="xd">=</span>&quot;<span class="xav">true</span>&quot; <span class="xd">/&gt;</span><span class="xd">
      &lt;</span><span class="xn">OutputFilename </span><span class="xan">ParameterType</span><span class="xd">=</span>&quot;<span class="xav">System.String</span>&quot; <span class="xan">Required</span><span class="xd">=</span>&quot;<span class="xav">true</span>&quot; <span class="xd">/&gt;</span><span class="xd">
      &lt;</span><span class="xn">MatchExpression </span><span class="xan">ParameterType</span><span class="xd">=</span>&quot;<span class="xav">System.String</span>&quot; <span class="xan">Required</span><span class="xd">=</span>&quot;<span class="xav">true</span>&quot; <span class="xd">/&gt;</span><span class="xd">
      &lt;</span><span class="xn">ReplacementText </span><span class="xan">ParameterType</span><span class="xd">=</span>&quot;<span class="xav">System.String</span>&quot; <span class="xan">Required</span><span class="xd">=</span>&quot;<span class="xav">true</span>&quot; <span class="xd">/&gt;</span><span class="xd">
    &lt;/</span><span class="xn">ParameterGroup</span><span class="xd">&gt;</span><span class="xd">
    &lt;</span><span class="xn">Task</span><span class="xd">&gt;</span><span class="xd">
      &lt;</span><span class="xn">Using </span><span class="xan">Namespace</span><span class="xd">=</span>&quot;<span class="xav">System</span>&quot; <span class="xd">/&gt;</span><span class="xd">
      &lt;</span><span class="xn">Using </span><span class="xan">Namespace</span><span class="xd">=</span>&quot;<span class="xav">System.IO</span>&quot; <span class="xd">/&gt;</span><span class="xd">
      &lt;</span><span class="xn">Using </span><span class="xan">Namespace</span><span class="xd">=</span>&quot;<span class="xav">System.Text.RegularExpressions</span>&quot; <span class="xd">/&gt;</span><span class="xd">
      &lt;</span><span class="xn">Code </span><span class="xan">Type</span><span class="xd">=</span>&quot;<span class="xav">Fragment</span>&quot; <span class="xan">Language</span><span class="xd">=</span>&quot;<span class="xav">cs</span>&quot;<span class="xd">&gt;</span><span class="xd">
        &lt;![CDATA[</span><span class="xcs">
            File.WriteAllText(
                OutputFilename,
                Regex.Replace(File.ReadAllText(InputFilename), MatchExpression, ReplacementText)
                );
          </span><span class="xd">]]&gt;</span><span class="xd">
      &lt;/</span><span class="xn">Code</span><span class="xd">&gt;</span><span class="xd">
    &lt;/</span><span class="xn">Task</span><span class="xd">&gt;</span><span class="xd">
  &lt;/</span><span class="xn">UsingTask</span><span class="xd">&gt;</span><span class="xd">
 
  &lt;</span><span class="xn">Target </span><span class="xan">Name</span><span class="xd">=</span>&quot;<span class="xav"><a href="/MSBuildTargets/R/TransformTemplateConfigs.html" target="n" class="msbuildlink">TransformTemplateConfigs</a></span>&quot; <span class="xan">BeforeTargets</span><span class="xd">=</span>&quot;<span class="xav"><a href="/MSBuildTargets/R/Build.html" target="n" class="msbuildlink">Build</a></span>&quot; <span class="xan">Condition</span><span class="xd">=</span>&quot;<span class="xav">&#39;$(<a href="/MSBuildProperties/R/TargetFramework.html" target="n" class="msbuildlink">TargetFramework</a>)&#39; == &#39;$(<a href="/MSBuildProperties/R/DefaultTargetFramework.html" target="n" class="msbuildlink">DefaultTargetFramework</a>)&#39;</span>&quot;<span class="xd">&gt;</span><span class="xd">
    &lt;!--</span><span class="c">
      For each template, copy its &#39;.template.config.src&#39; directory to &#39;.template.config&#39;,
      removing any earlier output at that location.
    </span><span class="xd">--&gt;</span><span class="xd">
    &lt;</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
      &lt;</span><span class="xn"><a href="/MSBuildItems/R/_TemplateProjectFile.html" target="n" class="msbuildlink">_TemplateProjectFile</a> </span><span class="xan">Include</span><span class="xd">=</span>&quot;<span class="xav">content\**\*.csproj</span>&quot; <span class="xd">/&gt;</span><span class="xd">
      &lt;</span><span class="xn"><a href="/MSBuildItems/R/_TemplateProjectDir.html" target="n" class="msbuildlink">_TemplateProjectDir</a> </span><span class="xan">Include</span><span class="xd">=</span>&quot;<span class="xav">%(_TemplateProjectFile.RootDir)%(Directory)</span>&quot; <span class="xd">/&gt;</span><span class="xd">
      &lt;</span><span class="xn"><a href="/MSBuildItems/R/_TemplateConfigFileToCopy.html" target="n" class="msbuildlink">_TemplateConfigFileToCopy</a> </span><span class="xan">Include</span><span class="xd">=</span>&quot;<span class="xav">%(_TemplateProjectDir.Identity).template.config.src\**</span>&quot;<span class="xd">&gt;</span><span class="xd">
        &lt;</span><span class="xn">DestDir</span><span class="xd">&gt;</span>%(Identity).template.config\<span class="xd">&lt;/</span><span class="xn">DestDir</span><span class="xd">&gt;</span><span class="xd">
      &lt;/</span><span class="xn">_TemplateConfigFileToCopy</span><span class="xd">&gt;</span><span class="xd">
    &lt;/</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
 
    &lt;</span><span class="xn"><a href="/MSBuildTasks/R/RemoveDir.html" target="n" class="msbuildlink">RemoveDir</a> </span><span class="xan">Directories</span><span class="xd">=</span>&quot;<span class="xav">%(_TemplateConfigFileToCopy.DestDir)</span>&quot; <span class="xd">/&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildTasks/R/Copy.html" target="n" class="msbuildlink">Copy</a> </span><span class="xan">SourceFiles</span><span class="xd">=</span>&quot;<span class="xav">@(<a href="/MSBuildItems/R/_TemplateConfigFileToCopy.html" target="n" class="msbuildlink">_TemplateConfigFileToCopy</a>)</span>&quot; <span class="xan">DestinationFolder</span><span class="xd">=</span>&quot;<span class="xav">%(DestDir)</span>&quot; <span class="xd">/&gt;</span><span class="xd">
 
    &lt;!--</span><span class="c">
      Modify the .json files in the .template.config dirs to stamp MSBuild properties into them.
    </span><span class="xd">--&gt;</span><span class="xd">
    &lt;</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
      &lt;</span><span class="xn"><a href="/MSBuildItems/R/GeneratedContent.html" target="n" class="msbuildlink">GeneratedContent</a> </span><span class="xan">Include</span><span class="xd">=</span>&quot;<span class="xav">@(<a href="/MSBuildItems/R/_TemplateConfigFileToCopy.html" target="n" class="msbuildlink">_TemplateConfigFileToCopy</a>)</span>&quot; <span class="xan">Condition</span><span class="xd">=</span>&quot;<span class="xav">&#39;%(Extension)&#39;==&#39;.json&#39;</span>&quot;<span class="xd">&gt;</span><span class="xd">
        &lt;</span><span class="xn">OutputPath</span><span class="xd">&gt;</span>%(DestDir)%(RecursiveDir)%(Filename)%(Extension)<span class="xd">&lt;/</span><span class="xn">OutputPath</span><span class="xd">&gt;</span><span class="xd">
      &lt;/</span><span class="xn">GeneratedContent</span><span class="xd">&gt;</span><span class="xd">
    &lt;/</span><span class="xn">ItemGroup</span><span class="xd">&gt;</span><span class="xd">
 
    &lt;!--</span><span class="c"> Update the OrchardVersion in the templates to reflect the newly built version number. </span><span class="xd">--&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildTasks/R/ReplaceFileText.html" target="n" class="msbuildlink">ReplaceFileText</a> </span><span class="xan">InputFilename</span><span class="xd">=</span>&quot;<span class="xav">%(GeneratedContent.OutputPath)</span>&quot; <span class="xan">OutputFilename</span><span class="xd">=</span>&quot;<span class="xav">%(GeneratedContent.OutputPath)</span>&quot; <span class="xan">MatchExpression</span><span class="xd">=</span>&quot;<span class="xav">\$\{TemplateOrchardVersion\}</span>&quot; <span class="xan">ReplacementText</span><span class="xd">=</span>&quot;<span class="xav">$(<a href="/MSBuildProperties/R/Version.html" target="n" class="msbuildlink">Version</a>)</span>&quot; <span class="xd">/&gt;</span><span class="xd">
    &lt;!--</span><span class="c"> Replace the default target framework for the template based on which TFM is being built. The resulting nuget package should have templates with the correct corresponding TFM defaulted in the template. </span><span class="xd">--&gt;</span><span class="xd">
    &lt;</span><span class="xn"><a href="/MSBuildTasks/R/ReplaceFileText.html" target="n" class="msbuildlink">ReplaceFileText</a> </span><span class="xan">InputFilename</span><span class="xd">=</span>&quot;<span class="xav">%(GeneratedContent.OutputPath)</span>&quot; <span class="xan">OutputFilename</span><span class="xd">=</span>&quot;<span class="xav">%(GeneratedContent.OutputPath)</span>&quot; <span class="xan">MatchExpression</span><span class="xd">=</span>&quot;<span class="xav">\$\{TemplateTargetFramework\}</span>&quot; <span class="xan">ReplacementText</span><span class="xd">=</span>&quot;<span class="xav">$(<a href="/MSBuildProperties/R/TargetFramework.html" target="n" class="msbuildlink">TargetFramework</a>)</span>&quot; <span class="xd">/&gt;</span><span class="xd">
  &lt;/</span><span class="xn">Target</span><span class="xd">&gt;</span><span class="xd">
&lt;/</span><span class="xn">Project</span><span class="xd">&gt;</span>
</pre></td></tr></table></div></body></html>
