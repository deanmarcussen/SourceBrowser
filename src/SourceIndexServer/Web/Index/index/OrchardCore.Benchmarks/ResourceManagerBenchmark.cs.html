<!DOCTYPE html>
<html><head><title>ResourceManagerBenchmark.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(60);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#OrchardCore.Benchmarks/ResourceManagerBenchmark.cs" target="_top">ResourceManagerBenchmark.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#OrchardCore.Benchmarks" target="_top">test\OrchardCore.Benchmarks\OrchardCore.Benchmarks.csproj</a> (OrchardCore.Benchmarks)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>.<span class="i n">IO</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i">BenchmarkDotNet</span>.<span class="i">Attributes</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">Caching</span>.<span class="i n">Memory</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">Options</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Benchmark</span>.<span class="i n">Support</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Modules</span>.<span class="i">FileProviders</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Mvc</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">ResourceManagement</span>;
 
<b>namespace</b> <span class="i n">OrchardCore</span>.<span class="i n">Benchmark</span>
{
    [<span class="i">MemoryDiagnoser</span>]
    <b>public class</b> <a id="005d8b5c564c2073" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="2252e31d6768eca8">ResourceManagerBenchmark</span></a>
    {
        <b>private static readonly</b> <span class="i">ShellFileVersionProvider</span> <a id="6551c1864b99ab1f" href="R/6551c1864b99ab1f.html" target="n" data-glyph="46,1" class="i field">_fileVersionProvider</a> = <b>new</b> <span class="i">ShellFileVersionProvider</span>(
            <span class="t t">Enumerable</span>.<span class="i method">Empty</span>&lt;<span class="i">IStaticFileProvider</span>&gt;(),
            <b>new</b> <a href="Support/FakeWebHostEnvironment.cs.html#0a5da4b94a265571" class="t constructor">FakeWebHostEnvironment</a>(),
            <b>new</b> <span class="t constructor">MemoryCache</span>(<span class="t t">Options</span>.<span class="i method">Create</span>(<b>new</b> <span class="t constructor">MemoryCacheOptions</span>())));
 
        <b>private static readonly</b> <span class="t t">OptionsWrapper</span>&lt;<span class="i">ResourceManagementOptions</span>&gt; <a id="d60aa27ac45ea910" href="R/d60aa27ac45ea910.html" target="n" data-glyph="46,1" class="i field">_options</a>;
 
        <b>static</b> <a id="7147de0abe5a178f" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="t method">ResourceManagerBenchmark</a>()
        {
            <b>var</b> <span id="r0 rd" class="r0 r">options</span> = <b>new</b> <span class="i">ResourceManagementOptions</span>();
 
            <b>var</b> <span id="r1 rd" class="r1 r">manifest1</span> = <b>new</b> <span class="i">ResourceManifest</span>();
            <span class="r1 r">manifest1</span>.<span class="i">DefineStyle</span>(<span class="s">&quot;some1&quot;</span>).<span class="i">SetDependencies</span>(<span class="s">&quot;dependency1&quot;</span>).<span class="i">SetUrl</span>(<span class="s">&quot;file://some1.txt&quot;</span>).<span class="i">SetVersion</span>(<span class="s">&quot;1.0.0&quot;</span>);
            <span class="r0 r">options</span>.<span class="i">ResourceManifests</span>.<span class="i">Add</span>(<span class="r1 r">manifest1</span>);
 
            <b>var</b> <span id="r2 rd" class="r2 r">manifest2</span> = <b>new</b> <span class="i">ResourceManifest</span>();
            <span class="r2 r">manifest2</span>.<span class="i">DefineStyle</span>(<span class="s">&quot;some2&quot;</span>).<span class="i">SetDependencies</span>(<span class="s">&quot;dependency2&quot;</span>).<span class="i">SetUrl</span>(<span class="s">&quot;file://some2.txt&quot;</span>).<span class="i">SetVersion</span>(<span class="s">&quot;1.0.0&quot;</span>);
            <span class="r0 r">options</span>.<span class="i">ResourceManifests</span>.<span class="i">Add</span>(<span class="r2 r">manifest2</span>);
 
            <b>var</b> <span id="r3 rd" class="r3 r">dependency1</span> = <b>new</b> <span class="i">ResourceManifest</span>();
            <span class="r3 r">dependency1</span>.<span class="i">DefineStyle</span>(<span class="s">&quot;dependency1&quot;</span>).<span class="i">SetUrl</span>(<span class="s">&quot;file://dependency1.txt&quot;</span>).<span class="i">SetVersion</span>(<span class="s">&quot;1.0.0&quot;</span>);
            <span class="r0 r">options</span>.<span class="i">ResourceManifests</span>.<span class="i">Add</span>(<span class="r3 r">dependency1</span>);
 
            <b>var</b> <span id="r4 rd" class="r4 r">dependency2</span> = <b>new</b> <span class="i">ResourceManifest</span>();
            <span class="r4 r">dependency2</span>.<span class="i">DefineStyle</span>(<span class="s">&quot;dependency2&quot;</span>).<span class="i">SetUrl</span>(<span class="s">&quot;file://dependency2.txt&quot;</span>).<span class="i">SetVersion</span>(<span class="s">&quot;1.0.0&quot;</span>);
            <span class="r0 r">options</span>.<span class="i">ResourceManifests</span>.<span class="i">Add</span>(<span class="r4 r">dependency2</span>);
 
            <a href="#d60aa27ac45ea910" class="i field">_options</a> = <b>new</b> <span class="t constructor">OptionsWrapper</span>&lt;<span class="i">ResourceManagementOptions</span>&gt;(<span class="r0 r">options</span>);
        }
 
        [<span class="i">Benchmark</span>]
        <b>public void</b> <a id="585c0c6325bd1ac7" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">RenderStylesheet</a>()
        {
            <b>var</b> <span id="r5 rd" class="r5 r">manager</span> = <b>new</b> <span class="i">ResourceManager</span>(
                <span class="i">options</span>: <a href="#d60aa27ac45ea910" class="i field">_options</a>,
                <span class="i">fileVersionProvider</span>: <a href="#6551c1864b99ab1f" class="i field">_fileVersionProvider</a>);
 
            <span class="r5 r">manager</span>.<span class="i">RegisterResource</span>(<span class="s">&quot;stylesheet&quot;</span>, <span class="s">&quot;some1&quot;</span>).<span class="i">UseVersion</span>(<span class="s">&quot;1.0.0&quot;</span>).<span class="i">ShouldAppendVersion</span>(<b>true</b>);
            <span class="r5 r">manager</span>.<span class="i">RegisterResource</span>(<span class="s">&quot;stylesheet&quot;</span>, <span class="s">&quot;some2&quot;</span>).<span class="i">UseVersion</span>(<span class="s">&quot;1.0.0&quot;</span>).<span class="i">ShouldAppendVersion</span>(<b>true</b>);
            <b>using</b> <a href="@1@System.Runtime/A.html#fd76db5d443fe076" class="k">var</a> <span id="r6 rd" class="r6 r">sw</span> = <b>new</b> <a href="@1@System.Runtime/A.html#23770c70900ea7f0" class="t constructor">StringWriter</a>();
            <span class="r5 r">manager</span>.<span class="i">RenderStylesheet</span>(<span class="r6 r">sw</span>);
        }
    }
}
</pre></td></tr></table></div></body></html>
