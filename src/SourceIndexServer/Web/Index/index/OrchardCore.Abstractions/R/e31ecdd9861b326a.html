<!DOCTYPE html>
<html><head><title>ShellContext</title><link rel="stylesheet" href="../../styles.css"/><script src="../../scripts.js"></script></head><body onload="ro();">
<div class="rH">1 write to ShellContext</div><div class="rA">OrchardCore.Abstractions (1)</div><div class="rG" id="OrchardCore.Abstractions"><div class="rF"><div class="rN">Shell\Scope\ShellScope.cs (1)</div>
<a href="../Shell/Scope/ShellScope.cs.html#38"><b>38</b><i>ShellContext</i> = shellContext;</a>
</div>
</div>
<div class="rH">25 references to ShellContext</div><div class="rA">OrchardCore (4)</div><div class="rG" id="OrchardCore"><div class="rF"><div class="rN">Modules\ModularBackgroundService.cs (3)</div>
<a href="../../OrchardCore/Modules/ModularBackgroundService.cs.html#110"><b>110</b>if (shellScope.<i>ShellContext</i>.Pipeline == null)</a>
<a href="../../OrchardCore/Modules/ModularBackgroundService.cs.html#115"><b>115</b>var distributedLock = shellScope.<i>ShellContext</i>.ServiceProvider.GetRequiredService&lt;IDistributedLock&gt;();</a>
<a href="../../OrchardCore/Modules/ModularBackgroundService.cs.html#196"><b>196</b>if (shellScope.<i>ShellContext</i>.Pipeline == null)</a>
</div>
<div class="rF"><div class="rN">Modules\ModularTenantContainerMiddleware.cs (1)</div>
<a href="../../OrchardCore/Modules/ModularTenantContainerMiddleware.cs.html#55"><b>55</b>ShellContext = shellScope.<i>ShellContext</i>,</a>
</div>
</div>
<div class="rA">OrchardCore.Abstractions (21)</div><div class="rG" id="OrchardCore.Abstractions"><div class="rF"><div class="rN">BackgroundTasks\BackgroundTaskEventContext.cs (1)</div>
<a href="../BackgroundTasks/BackgroundTaskEventContext.cs.html#11"><b>11</b>Tenant = scope.<i>ShellContext</i>.Settings.Name;</a>
</div>
<div class="rF"><div class="rN">Shell\Scope\ShellScope.cs (20)</div>
<a href="../Shell/Scope/ShellScope.cs.html#61"><b>61</b>public static ShellContext Context =&gt; Current?.<i>ShellContext</i>;</a>
<a href="../Shell/Scope/ShellScope.cs.html#281"><b>281</b>if (<i>ShellContext</i>.IsActivated)</a>
<a href="../Shell/Scope/ShellScope.cs.html#292"><b>292</b>(var locker, var locked) = await <i>ShellContext</i>.TryAcquireShellActivateLockAsync();</a>
<a href="../Shell/Scope/ShellScope.cs.html#295"><b>295</b>throw new TimeoutException($&quot;Fails to acquire a lock before activating the tenant: {<i>ShellContext</i>.Settings.Name}&quot;);</a>
<a href="../Shell/Scope/ShellScope.cs.html#301"><b>301</b>if (!<i>ShellContext</i>.IsActivated)</a>
<a href="../Shell/Scope/ShellScope.cs.html#303"><b>303</b>await new ShellScope(<i>ShellContext</i>).UsingAsync(async scope =&gt;</a>
<a href="../Shell/Scope/ShellScope.cs.html#317"><b>317</b><i>ShellContext</i>.IsActivated = true;</a>
<a href="../Shell/Scope/ShellScope.cs.html#383"><b>383</b>var signal = <i>ShellContext</i>.ServiceProvider.GetRequiredService&lt;ISignal&gt;();</a>
<a href="../Shell/Scope/ShellScope.cs.html#392"><b>392</b>var shellHost = <i>ShellContext</i>.ServiceProvider.GetRequiredService&lt;IShellHost&gt;();</a>
<a href="../Shell/Scope/ShellScope.cs.html#401"><b>401</b>scope = await shellHost.GetScopeAsync(<i>ShellContext</i>.Settings);</a>
<a href="../Shell/Scope/ShellScope.cs.html#406"><b>406</b>scope = new ShellScope(<i>ShellContext</i>);</a>
<a href="../Shell/Scope/ShellScope.cs.html#423"><b>423</b>task.GetType().FullName, <i>ShellContext</i>.Settings.Name);</a>
<a href="../Shell/Scope/ShellScope.cs.html#450"><b>450</b>if (Interlocked.Decrement(ref <i>ShellContext</i>._refCount) == 0)</a>
<a href="../Shell/Scope/ShellScope.cs.html#453"><b>453</b>if (<i>ShellContext</i>.Settings.State == TenantState.Disabled)</a>
<a href="../Shell/Scope/ShellScope.cs.html#455"><b>455</b><i>ShellContext</i>.ReleaseFromLastScope();</a>
<a href="../Shell/Scope/ShellScope.cs.html#458"><b>458</b>if (!<i>ShellContext</i>._released)</a>
<a href="../Shell/Scope/ShellScope.cs.html#464"><b>464</b>if (Interlocked.CompareExchange(ref <i>ShellContext</i>._refCount, 0, 0) != 0)</a>
<a href="../Shell/Scope/ShellScope.cs.html#470"><b>470</b>if (Interlocked.Exchange(ref <i>ShellContext</i>._terminated, 1) == 1)</a>
<a href="../Shell/Scope/ShellScope.cs.html#503"><b>503</b><i>ShellContext</i>.Dispose();</a>
<a href="../Shell/Scope/ShellScope.cs.html#509"><b>509</b>Interlocked.Decrement(ref <i>ShellContext</i>._refCount);</a>
</div>
</div>
</body></html>