<!DOCTYPE html>
<html><head><title>OrchardCoreBuilderExtensions.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(123);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#OrchardCore.DisplayManagement/OrchardCoreBuilderExtensions.cs" target="_top">OrchardCoreBuilderExtensions.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#OrchardCore.DisplayManagement" target="_top">src\OrchardCore\OrchardCore.DisplayManagement\OrchardCore.DisplayManagement.csproj</a> (OrchardCore.DisplayManagement)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">AspNetCore</span>.<span class="i n">Mvc</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">AspNetCore</span>.<span class="i n">Mvc</span>.<span class="i n">ApplicationParts</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">AspNetCore</span>.<span class="i n">Mvc</span>.<span class="i n">Razor</span>.<span class="i n">Compilation</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">DependencyInjection</span>.<span class="i n">Extensions</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">Options</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Descriptors</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Descriptors</span>.<span class="i n">ShapeAttributeStrategy</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Descriptors</span>.<span class="i n">ShapePlacementStrategy</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Descriptors</span>.<span class="i n">ShapeTemplateStrategy</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Events</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Extensions</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Implementation</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Layout</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">LocationExpander</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">ModelBinding</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Notify</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Razor</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Shapes</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">TagHelpers</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Theming</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Title</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">DisplayManagement</span>.<span class="i n">Zones</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Environment</span>.<span class="i">Extensions</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Environment</span>.<span class="i">Extensions</span>.<span class="i">Features</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Mvc</span>.<span class="i n">LocationExpander</span>;
 
<b>namespace</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">DependencyInjection</span>
{
    <b>public static class</b> <a id="45743e528f452e8f" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">OrchardCoreBuilderExtensions</a>
    {
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Adds host and tenant level services for managing themes.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static</b> <span class="i">OrchardCoreBuilder</span> <a id="35b8b914b868e9c6" href="R/../../0000000000.html" target="n" data-glyph="220,1" class="i method">AddTheming</a>(<b>this</b> <span class="i">OrchardCoreBuilder</span> <span id="r0 rd" class="r0 r">builder</span>)
        {
            <span class="r0 r">builder</span>.<a href="#41ec5f38ee8715b1" class="i method">AddThemingHost</a>()
                .<span class="i">ConfigureServices</span>(<span id="r1 rd" class="r1 r">services</span> =&gt;
                {
                    <span class="r1 r">services</span>.<span class="i">Configure</span>&lt;<span class="t t">MvcOptions</span>&gt;((<span id="r2 rd" class="r2 r">options</span>) =&gt;
                    {
                        <span class="r2 r">options</span>.<span class="i">Filters</span>.<span class="i">Add</span>(<b>typeof</b>(<a href="ModelBinding/ModelBinderAccessorFilter.cs.html#bbba9236370606a4" class="t t">ModelBinderAccessorFilter</a>));
                        <span class="r2 r">options</span>.<span class="i">Filters</span>.<span class="i">Add</span>(<b>typeof</b>(<a href="Notify/NotifyFilter.cs.html#c3c8e49dce3cafd1" class="t t">NotifyFilter</a>));
                        <span class="r2 r">options</span>.<span class="i">Filters</span>.<span class="i">Add</span>(<b>typeof</b>(<a href="Razor/RazorViewActionFilter.cs.html#54c5d5f02dac5791" class="t t">RazorViewActionFilter</a>));
                    });
 
                    <span class="c">// Used as a service when we create a fake &#39;ActionContext&#39;.</span>
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="IAsyncViewActionFilter.cs.html#22215d5c17a3bd24" class="t t">IAsyncViewActionFilter</a>, <a href="Razor/RazorViewActionFilter.cs.html#54c5d5f02dac5791" class="t t">RazorViewActionFilter</a>&gt;();
 
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="/OrchardCore.DisplayManagement.Abstractions/A.html#576e35eea3505296" class="t t">IUpdateModelAccessor</a>, <a href="ModelBinding/LocalModelBinderAccessor.cs.html#663c6897b622e596" class="t t">LocalModelBinderAccessor</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="ViewContextAccessor.cs.html#e4beefc493c22244" class="t t">ViewContextAccessor</a>&gt;();
 
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="Descriptors/ShapeTemplateStrategy/IShapeTemplateViewEngine.cs.html#a1d8f4748f26c68e" class="t t">IShapeTemplateViewEngine</a>, <a href="Razor/RazorShapeTemplateViewEngine.cs.html#15b2b4e03a0007e4" class="t t">RazorShapeTemplateViewEngine</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddSingleton</span>&lt;<span class="t t">IApplicationFeatureProvider</span>&lt;<span class="t t">ViewsFeature</span>&gt;, <a href="Theming/ThemingViewsFeatureProvider.cs.html#2bfb3e3be6881b14" class="t t">ThemingViewsFeatureProvider</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="/OrchardCore.Mvc.Core/A.html#b13c00f1ee9a8a59" class="t t">IViewLocationExpanderProvider</a>, <a href="LocationExpander/ThemeViewLocationExpanderProvider.cs.html#cee71baff71fc01c" class="t t">ThemeViewLocationExpanderProvider</a>&gt;();
 
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="Descriptors/ShapeTemplateStrategy/IShapeTemplateHarvester.cs.html#2e77008b73d6eabd" class="t t">IShapeTemplateHarvester</a>, <a href="Descriptors/ShapeTemplateStrategy/BasicShapeTemplateHarvester.cs.html#28252a135ba81a57" class="t t">BasicShapeTemplateHarvester</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddTransient</span>&lt;<a href="Descriptors/Interfaces.cs.html#f66024a4d4149e8d" class="t t">IShapeTableManager</a>, <a href="Descriptors/DefaultShapeTableManager.cs.html#210f06bcde0d997a" class="t t">DefaultShapeTableManager</a>&gt;();
 
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="Descriptors/Interfaces.cs.html#e6c9b4ce50036bee" class="t t">IShapeTableProvider</a>, <a href="Descriptors/ShapeAttributeStrategy/ShapeAttributeBindingStrategy.cs.html#82db9100d20c1736" class="t t">ShapeAttributeBindingStrategy</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="Descriptors/Interfaces.cs.html#e6c9b4ce50036bee" class="t t">IShapeTableProvider</a>, <a href="Descriptors/ShapePlacementStrategy/ShapePlacementParsingStrategy.cs.html#4b150ed52411a6f1" class="t t">ShapePlacementParsingStrategy</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="Descriptors/Interfaces.cs.html#e6c9b4ce50036bee" class="t t">IShapeTableProvider</a>, <a href="Descriptors/ShapeTemplateStrategy/ShapeTemplateBindingStrategy.cs.html#674e0ade07d9a3ec" class="t t">ShapeTemplateBindingStrategy</a>&gt;();
 
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="Descriptors/ShapePlacementStrategy/IPlacementNodeFilterProvider.cs.html#70724ce3d6aa5a20" class="t t">IPlacementNodeFilterProvider</a>, <a href="Descriptors/ShapePlacementStrategy/PathPlacementNodeFilterProvider.cs.html#fa48c11426d53d1b" class="t t">PathPlacementNodeFilterProvider</a>&gt;();
 
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="Descriptors/Interfaces.cs.html#dc8c39d7e3c9418a" class="t t">IShapePlacementProvider</a>, <a href="Descriptors/ShapeTablePlacementProvider.cs.html#0e7a53f835424dd7" class="t t">ShapeTablePlacementProvider</a>&gt;();
 
                    <span class="r1 r">services</span>.<span class="i">TryAddEnumerable</span>(
                        <span class="t t">ServiceDescriptor</span>.<span class="i method">Transient</span>&lt;<span class="t t">IConfigureOptions</span>&lt;<a href="Descriptors/ShapeTemplateStrategy/ShapeTemplateOptions.cs.html#447b62b5f28bb822" class="t t">ShapeTemplateOptions</a>&gt;, <a href="Descriptors/ShapeTemplateStrategy/ShapeTemplateOptionsSetup.cs.html#4cf9ec04e09a9ac3" class="t t">ShapeTemplateOptionsSetup</a>&gt;());
                    <span class="r1 r">services</span>.<span class="i">TryAddSingleton</span>&lt;<a href="Descriptors/ShapeTemplateStrategy/IShapeTemplateFileProviderAccessor.cs.html#75cb94110be19792" class="t t">IShapeTemplateFileProviderAccessor</a>, <a href="Descriptors/ShapeTemplateStrategy/ShapeTemplateFileProviderAccessor.cs.html#9da3a8efd920b6b7" class="t t">ShapeTemplateFileProviderAccessor</a>&gt;();
 
                    <span class="r1 r">services</span>.<span class="i">AddShapeAttributes</span>&lt;<a href="Shapes/CoreShapes.cs.html#e3a60d382c04fb85" class="t t">CoreShapes</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="Descriptors/Interfaces.cs.html#e6c9b4ce50036bee" class="t t">IShapeTableProvider</a>, <a href="Shapes/CoreShapes.cs.html#04318ef97690177d" class="t t">CoreShapesTableProvider</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddShapeAttributes</span>&lt;<a href="Zones/ZoneShapes.cs.html#e41d7c3041e371b4" class="t t">ZoneShapes</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddShapeAttributes</span>&lt;<a href="Shapes/GroupShapes.cs.html#92d001697dad289f" class="t t">GroupShapes</a>&gt;();
 
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="Implementation/IHtmlDisplay.cs.html#676feffb90cb6045" class="t t">IHtmlDisplay</a>, <a href="Implementation/DefaultHtmlDisplay.cs.html#31e602367b81f430" class="t t">DefaultHtmlDisplay</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="Layout/ILayoutAccessor.cs.html#1db760e65443bcbe" class="t t">ILayoutAccessor</a>, <a href="Layout/LayoutAccessor.cs.html#9c7d619f17378112" class="t t">LayoutAccessor</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="Theming/IThemeManager.cs.html#1a73ced9421ccec3" class="t t">IThemeManager</a>, <a href="Theming/ThemeManager.cs.html#3ae53b5da44e85ff" class="t t">ThemeManager</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="Title/IPageTitleBuilder.cs.html#52e8e3f97c75779b" class="t t">IPageTitleBuilder</a>, <a href="Title/PageTitleBuilder.cs.html#ff92a256c75c5bdd" class="t t">PageTitleBuilder</a>&gt;();
 
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="IShapeFactory.cs.html#b93d6db1df498056" class="t t">IShapeFactory</a>, <a href="Implementation/DefaultShapeFactory.cs.html#b3797d9aa52a5bb5" class="t t">DefaultShapeFactory</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="IDisplayHelper.cs.html#873b3e4bef8a4bdf" class="t t">IDisplayHelper</a>, <a href="Implementation/DisplayHelper.cs.html#d497dc94a75de59e" class="t t">DisplayHelper</a>&gt;();
 
                    <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="Notify/INotifier.cs.html#ec932247fd25e4dd" class="t t">INotifier</a>, <a href="Notify/Notifier.cs.html#5facabcf444329eb" class="t t">Notifier</a>&gt;();
 
                    <span class="r1 r">services</span>.<span class="i">AddShapeAttributes</span>&lt;<a href="Shapes/DateTimeShapes.cs.html#2dd80bafd5dd96d4" class="t t">DateTimeShapes</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddShapeAttributes</span>&lt;<a href="Shapes/PageTitleShapes.cs.html#0425469f3068a922" class="t t">PageTitleShapes</a>&gt;();
 
                    <span class="r1 r">services</span>.<span class="i">AddTagHelpers</span>&lt;<a href="TagHelpers/AddAlternateTagHelper.cs.html#1fb2aa38cee9579f" class="t t">AddAlternateTagHelper</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddTagHelpers</span>&lt;<a href="TagHelpers/AddClassTagHelper.cs.html#40be930fdff599f8" class="t t">AddClassTagHelper</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddTagHelpers</span>&lt;<a href="TagHelpers/AddWrapperTagHelper.cs.html#30ec7aeddc3baabb" class="t t">AddWrapperTagHelper</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddTagHelpers</span>&lt;<a href="TagHelpers/ClearAlternatesTagHelper.cs.html#6dd6e1137056d9b7" class="t t">ClearAlternatesTagHelper</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddTagHelpers</span>&lt;<a href="TagHelpers/ClearClassesTagHelper.cs.html#0481a33f360da8e9" class="t t">ClearClassesTagHelper</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddTagHelpers</span>&lt;<a href="TagHelpers/ClearWrappersTagHelper.cs.html#602b54a92edd2324" class="t t">ClearWrappersTagHelper</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddTagHelpers</span>&lt;<a href="TagHelpers/InputIsDisabledTagHelper.cs.html#932c8c467105bcc0" class="t t">InputIsDisabledTagHelper</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddTagHelpers</span>&lt;<a href="TagHelpers/RemoveAlternateTagHelper.cs.html#6779ec9ba45ad1b4" class="t t">RemoveAlternateTagHelper</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddTagHelpers</span>&lt;<a href="TagHelpers/RemoveClassTagHelper.cs.html#c3f0311c87a2627a" class="t t">RemoveClassTagHelper</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddTagHelpers</span>&lt;<a href="TagHelpers/RemoveWrapperTagHelper.cs.html#3dc54a18346e3b9c" class="t t">RemoveWrapperTagHelper</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddTagHelpers</span>&lt;<a href="TagHelpers/ShapeMetadataTagHelper.cs.html#aeea7c60b3287226" class="t t">ShapeMetadataTagHelper</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddTagHelpers</span>&lt;<a href="TagHelpers/ShapeTagHelper.cs.html#c28885b6ef42ed9e" class="t t">ShapeTagHelper</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddTagHelpers</span>&lt;<a href="TagHelpers/ValidationMessageTagHelper.cs.html#16f0f63cc2384231" class="t t">ValidationMessageTagHelper</a>&gt;();
                    <span class="r1 r">services</span>.<span class="i">AddTagHelpers</span>&lt;<a href="TagHelpers/ZoneTagHelper.cs.html#91fc6e12c446d6e8" class="t t">ZoneTagHelper</a>&gt;();
                });
 
            <b>return</b> <span class="r0 r">builder</span>;
        }
 
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
        <span class="c">///</span><span class="c"> Adds host level services for managing themes.</span>
        <span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
        <b>public static</b> <span class="i">OrchardCoreBuilder</span> <a id="41ec5f38ee8715b1" href="R/41ec5f38ee8715b1.html" target="n" data-glyph="220,1" class="i method">AddThemingHost</a>(<b>this</b> <span class="i">OrchardCoreBuilder</span> <span id="r3 rd" class="r3 r">builder</span>)
        {
            <b>var</b> <span id="r4 rd" class="r4 r">services</span> = <span class="r3 r">builder</span>.<span class="i">ApplicationServices</span>;
 
            <span class="r4 r">services</span>.<span class="i">AddSingleton</span>&lt;<span class="i">IExtensionDependencyStrategy</span>, <a href="Extensions/ThemeExtensionDependencyStrategy.cs.html#9e9b6173460079aa" class="t t">ThemeExtensionDependencyStrategy</a>&gt;();
            <span class="r4 r">services</span>.<span class="i">AddSingleton</span>&lt;<span class="i">IFeatureBuilderEvents</span>, <a href="Events/ThemeFeatureBuilderEvents.cs.html#349924b208508e93" class="t t">ThemeFeatureBuilderEvents</a>&gt;();
 
            <b>return</b> <span class="r3 r">builder</span>;
        }
    }
}
</pre></td></tr></table></div></body></html>
