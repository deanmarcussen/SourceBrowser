<!DOCTYPE html>
<html><head><title>Startup.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(72);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#OrchardCore.Markdown/Startup.cs" target="_top">Startup.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#OrchardCore.Markdown" target="_top">src\OrchardCore.Modules\OrchardCore.Markdown\OrchardCore.Markdown.csproj</a> (OrchardCore.Markdown)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i">Fluid</span>;
<b>using</b> <span class="i">Markdig</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">Configuration</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">Extensions</span>.<span class="i n">DependencyInjection</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">ContentManagement</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">ContentManagement</span>.<span class="i n">Display</span>.<span class="i n">ContentDisplay</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">ContentTypes</span>.<span class="i n">Editors</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Data</span>.<span class="i n">Migration</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Environment</span>.<span class="i">Shell</span>.<span class="i">Configuration</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Indexing</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Liquid</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Markdown</span>.<span class="i n">Drivers</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Markdown</span>.<span class="i n">Fields</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Markdown</span>.<span class="i n">Filters</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Markdown</span>.<span class="i n">Handlers</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Markdown</span>.<span class="i n">Indexing</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Markdown</span>.<span class="i n">Models</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Markdown</span>.<span class="i n">Services</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Markdown</span>.<span class="i n">Settings</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i n">Markdown</span>.<span class="i n">ViewModels</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Modules</span>;
 
<b>namespace</b> <span class="i n">OrchardCore</span>.<span class="i n">Markdown</span>
{
    <b>public class</b> <a id="5d47446ee580e2ad" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t">Startup</a> : <span class="i">StartupBase</span>
    {
        <b>private static readonly string</b> <a id="4ba0218e2224d1e6" href="R/4ba0218e2224d1e6.html" target="n" data-glyph="46,1" class="i field">DefaultMarkdownExtensions</a> = <span class="s">&quot;nohtml+advanced&quot;</span>;
 
        <b>private readonly</b> <span class="i">IShellConfiguration</span> <a id="b394b53ac7d6efdf" href="R/b394b53ac7d6efdf.html" target="n" data-glyph="46,1" class="i field">_shellConfiguration</a>;
 
        <b>public</b> <a id="1bd867ecfab2227c" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="t constructor">Startup</a>(<span class="i">IShellConfiguration</span> <span id="r0 rd" class="r0 r">shellConfiguration</span>)
        {
            <a href="#b394b53ac7d6efdf" class="i field">_shellConfiguration</a> = <span class="r0 r">shellConfiguration</span>;
        }
 
        <b>public override void</b> <a id="e3ab592468251395" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ConfigureServices</a>(<span class="t t">IServiceCollection</span> <span id="r1 rd" class="r1 r">services</span>)
        {
            <span class="r1 r">services</span>.<span class="i method">Configure</span>&lt;<span class="i">TemplateOptions</span>&gt;(<span id="r2 rd" class="r2 r">o</span> =&gt;
            {
                <span class="r2 r">o</span>.<span class="i">MemberAccessStrategy</span>.<span class="i">Register</span>&lt;<a href="ViewModels/MarkdownBodyPartViewModel.cs.html#5c7768e720d6a385" class="t t">MarkdownBodyPartViewModel</a>&gt;();
                <span class="r2 r">o</span>.<span class="i">MemberAccessStrategy</span>.<span class="i">Register</span>&lt;<a href="ViewModels/MarkdownFieldViewModel.cs.html#49acb8fc295ef2ab" class="t t">MarkdownFieldViewModel</a>&gt;();
            })
            .<a href="/OrchardCore.Liquid.Abstractions/A.html#a30788fe9ebeec96" class="i method">AddLiquidFilter</a>&lt;<a href="Filters/Markdownify.cs.html#0ea7cd3956ac7eb1" class="t t">Markdownify</a>&gt;(<span class="s">&quot;markdownify&quot;</span>);
 
            <span class="c">// Markdown Part</span>
            <span class="r1 r">services</span>.<a href="/OrchardCore.ContentManagement.Abstractions/A.html#0019d3c1a0518f06" class="i method">AddContentPart</a>&lt;<a href="Models/MarkdownBodyPart.cs.html#530a39ade44d769d" class="t t">MarkdownBodyPart</a>&gt;()
                .<a href="/OrchardCore.ContentManagement.Display/A.html#ad60073d392a87da" class="i method">UseDisplayDriver</a>&lt;<a href="Drivers/MarkdownBodyPartDisplayDriver.cs.html#84b306a1eb9daa6d" class="t t">MarkdownBodyPartDisplayDriver</a>&gt;()
                .<a href="/OrchardCore.ContentManagement.Abstractions/A.html#f915f4dc775e0b30" class="i method">AddHandler</a>&lt;<a href="Handlers/MarkdownBodyPartHandler.cs.html#c874dd9a39210ab1" class="t t">MarkdownBodyPartHandler</a>&gt;();
 
            <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="/OrchardCore.ContentTypes.Abstractions/A.html#dd1845d853c10401" class="t t">IContentTypePartDefinitionDisplayDriver</a>, <a href="Settings/MarkdownBodyPartSettingsDisplayDriver.cs.html#7fa4938f34bf1337" class="t t">MarkdownBodyPartSettingsDisplayDriver</a>&gt;();
            <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<span class="i">IDataMigration</span>, <a href="Migrations.cs.html#231e4ace2372c4ae" class="t t">Migrations</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Indexing.Abstractions/A.html#d17781887b83d515" class="t t">IContentPartIndexHandler</a>, <a href="Indexing/MarkdownBodyPartIndexHandler.cs.html#14918700685e1166" class="t t">MarkdownBodyPartIndexHandler</a>&gt;();
 
            <span class="c">// Markdown Field</span>
            <span class="r1 r">services</span>.<a href="/OrchardCore.ContentManagement.Abstractions/A.html#7491123ec0ec7415" class="i method">AddContentField</a>&lt;<a href="Fields/MarkdownField.cs.html#a455114e469738a0" class="t t">MarkdownField</a>&gt;()
                .<a href="/OrchardCore.ContentManagement.Display/A.html#bdbb46c885e77ba3" class="i method">UseDisplayDriver</a>&lt;<a href="Drivers/MarkdownFieldDriver.cs.html#c065e19cc6ac35a9" class="t t">MarkdownFieldDisplayDriver</a>&gt;();
 
            <span class="r1 r">services</span>.<span class="i">AddScoped</span>&lt;<a href="/OrchardCore.ContentTypes.Abstractions/A.html#e2fadf0f67edbaf4" class="t t">IContentPartFieldDefinitionDisplayDriver</a>, <a href="Settings/MarkdownFieldSettingsDriver.cs.html#00ada59f2b7f662d" class="t t">MarkdownFieldSettingsDriver</a>&gt;();
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Indexing.Abstractions/A.html#b7a759bc88ee38d3" class="t t">IContentFieldIndexHandler</a>, <a href="Indexing/MarkdownFieldIndexHandler.cs.html#ac82bcebc652b2a0" class="t t">MarkdownFieldIndexHandler</a>&gt;();
 
            <span class="r1 r">services</span>.<span class="i method">AddOptions</span>&lt;<a href="Services/MarkdownPipelineOptions.cs.html#c7bd8fbf080faddf" class="t t">MarkdownPipelineOptions</a>&gt;();
            <span class="r1 r">services</span>.<a href="Services/MarkdownPipelineOptionsExtensions.cs.html#bf8b2dd5fd235a32" class="i method">ConfigureMarkdownPipeline</a>((<span id="r3 rd" class="r3 r">pipeline</span>) =&gt;
            {
                <b>var</b> <span id="r4 rd" class="r4 r">extensions</span> = <a href="#b394b53ac7d6efdf" class="i field">_shellConfiguration</a>.<span class="i">GetValue</span>(<span class="s">&quot;OrchardCore_Markdown:Extensions&quot;</span>, <a href="#4ba0218e2224d1e6" class="i field">DefaultMarkdownExtensions</a>);
                <span class="r3 r">pipeline</span>.<span class="i">Configure</span>(<span class="r4 r">extensions</span>);
            });
 
            <span class="r1 r">services</span>.<span class="i method">AddScoped</span>&lt;<a href="/OrchardCore.Markdown.Abstractions/A.html#7a3b9265014ecf70" class="t t">IMarkdownService</a>, <a href="Services/DefaultMarkdownService.cs.html#fdab3a28be459f4a" class="t t">DefaultMarkdownService</a>&gt;();
        }
    }
}
</pre></td></tr></table></div></body></html>
