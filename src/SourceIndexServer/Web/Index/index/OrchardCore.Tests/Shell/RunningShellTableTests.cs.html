<!DOCTYPE html>
<html><head><title>RunningShellTableTests.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(346);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#OrchardCore.Tests/Shell/RunningShellTableTests.cs" target="_top">Shell\RunningShellTableTests.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#OrchardCore.Tests" target="_top">test\OrchardCore.Tests\OrchardCore.Tests.csproj</a> (OrchardCore.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">AspNetCore</span>.<span class="i n">Http</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Environment</span>.<span class="i">Shell</span>;
<b>using</b> <span class="i">Xunit</span>;
 
<b>namespace</b> <span class="i n">OrchardCore</span>.<span class="i n">Tests</span>.<span class="i n">Shell</span>
{
    <b>public class</b> <a id="043e3666268d82e1" href="../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="b7a23163aa701495">RunningShellTableTests</span></a>
    {
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="9fcb8963692fbc92" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">NoShellsGiveNoMatch</a>()
        {
            <b>var</b> <span id="r0 rd" class="r0 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r1 rd" class="r1 r">match</span> = <span class="r0 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;localhost&quot;</span>), <span class="s">&quot;/yadda&quot;</span>);
            <span class="i">Assert</span>.<span class="i">Null</span>(<span class="r1 r">match</span>);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="8041c852c201bb8a" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DefaultShellMatchesByDefault</a>()
        {
            <b>var</b> <span id="r2 rd" class="r2 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r3 rd" class="r3 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span> };
            <span class="r2 r">table</span>.<span class="i">Add</span>(<span class="r3 r">settings</span>);
            <b>var</b> <span id="r4 rd" class="r4 r">match</span> = <span class="r2 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;localhost&quot;</span>), <span class="s">&quot;/yadda&quot;</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r3 r">settings</span>, <span class="r4 r">match</span>);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="3151ea1085a845ec" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DefaultShellMatchesAllPortsByDefault</a>()
        {
            <b>var</b> <span id="r5 rd" class="r5 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r6 rd" class="r6 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span> };
            <span class="r5 r">table</span>.<span class="i">Add</span>(<span class="r6 r">settings</span>);
            <b>var</b> <span id="r7 rd" class="r7 r">match</span> = <span class="r5 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;localhost:443&quot;</span>), <span class="s">&quot;/yadda&quot;</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r6 r">settings</span>, <span class="r7 r">match</span>);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="aa25b7f73366ecbd" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">AnotherShellMatchesByHostHeader</a>()
        {
            <b>var</b> <span id="r8 rd" class="r8 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r9 rd" class="r9 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span> };
            <b>var</b> <span id="r10 rd" class="r10 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;a.example.com&quot;</span> };
            <span class="r8 r">table</span>.<span class="i">Add</span>(<span class="r9 r">settings</span>);
            <span class="r8 r">table</span>.<span class="i">Add</span>(<span class="r10 r">settingsA</span>);
            <b>var</b> <span id="r11 rd" class="r11 r">match</span> = <span class="r8 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;a.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r10 r">settingsA</span>, <span class="r11 r">match</span>);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="3b2e6499ddeb6931" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DefaultStillCatchesWhenOtherShellsMiss</a>()
        {
            <b>var</b> <span id="r12 rd" class="r12 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r13 rd" class="r13 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span> };
            <b>var</b> <span id="r14 rd" class="r14 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;a.example.com&quot;</span> };
            <span class="r12 r">table</span>.<span class="i">Add</span>(<span class="r13 r">settings</span>);
            <span class="r12 r">table</span>.<span class="i">Add</span>(<span class="r14 r">settingsA</span>);
            <b>var</b> <span id="r15 rd" class="r15 r">match</span> = <span class="r12 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;b.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r13 r">settings</span>, <span class="r15 r">match</span>);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="c916afed64d66aa4" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DefaultWontFallbackIfItHasCriteria</a>()
        {
            <b>var</b> <span id="r16 rd" class="r16 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r17 rd" class="r17 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;www.example.com&quot;</span> };
            <b>var</b> <span id="r18 rd" class="r18 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;a.example.com&quot;</span> };
            <span class="r16 r">table</span>.<span class="i">Add</span>(<span class="r17 r">settings</span>);
            <span class="r16 r">table</span>.<span class="i">Add</span>(<span class="r18 r">settingsA</span>);
            <b>var</b> <span id="r19 rd" class="r19 r">match</span> = <span class="r16 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;b.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>);
            <span class="i">Assert</span>.<span class="i">Null</span>(<span class="r19 r">match</span>);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="580eab6365c57d6f" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DefaultWillCatchRequestsIfItMatchesCriteria</a>()
        {
            <b>var</b> <span id="r20 rd" class="r20 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r21 rd" class="r21 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;www.example.com&quot;</span> };
            <b>var</b> <span id="r22 rd" class="r22 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;a.example.com&quot;</span> };
            <span class="r20 r">table</span>.<span class="i">Add</span>(<span class="r21 r">settings</span>);
            <span class="r20 r">table</span>.<span class="i">Add</span>(<span class="r22 r">settingsA</span>);
            <b>var</b> <span id="r23 rd" class="r23 r">match</span> = <span class="r20 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;www.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r21 r">settings</span>, <span class="r23 r">match</span>);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="f83a06046a89ccd6" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">NonDefaultCatchallWillFallbackIfNothingElseMatches</a>()
        {
            <b>var</b> <span id="r24 rd" class="r24 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r25 rd" class="r25 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;www.example.com&quot;</span> };
            <b>var</b> <span id="r26 rd" class="r26 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span> };
            <span class="r24 r">table</span>.<span class="i">Add</span>(<span class="r25 r">settings</span>);
            <span class="r24 r">table</span>.<span class="i">Add</span>(<span class="r26 r">settingsA</span>);
            <b>var</b> <span id="r27 rd" class="r27 r">match</span> = <span class="r24 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;b.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r26 r">settingsA</span>, <span class="r27 r">match</span>);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="1451dd135d8769d4" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">DefaultCatchallIsFallbackEvenWhenOthersAreUnqualified</a>()
        {
            <b>var</b> <span id="r28 rd" class="r28 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r29 rd" class="r29 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span> };
            <b>var</b> <span id="r30 rd" class="r30 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span> };
            <b>var</b> <span id="r31 rd" class="r31 r">settingsB</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Beta&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;b.example.com&quot;</span> };
            <b>var</b> <span id="r32 rd" class="r32 r">settingsG</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Gamma&quot;</span> };
            <span class="r28 r">table</span>.<span class="i">Add</span>(<span class="r29 r">settings</span>);
            <span class="r28 r">table</span>.<span class="i">Add</span>(<span class="r30 r">settingsA</span>);
            <span class="r28 r">table</span>.<span class="i">Add</span>(<span class="r31 r">settingsB</span>);
            <span class="r28 r">table</span>.<span class="i">Add</span>(<span class="r32 r">settingsG</span>);
            <b>var</b> <span id="r33 rd" class="r33 r">match</span> = <span class="r28 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;a.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r29 r">settings</span>, <span class="r33 r">match</span>);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="76751d27a8be1a9e" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">PathAlsoCausesMatch</a>()
        {
            <b>var</b> <span id="r34 rd" class="r34 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r35 rd" class="r35 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span> };
            <b>var</b> <span id="r36 rd" class="r36 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlPrefix</span> = <span class="s">&quot;foo&quot;</span> };
            <span class="r34 r">table</span>.<span class="i">Add</span>(<span class="r35 r">settings</span>);
            <span class="r34 r">table</span>.<span class="i">Add</span>(<span class="r36 r">settingsA</span>);
            <b>var</b> <span id="r37 rd" class="r37 r">match</span> = <span class="r34 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;a.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r36 r">settingsA</span>, <span class="r37 r">match</span>);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="ebcec26d908fd023" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">PathAndHostMustBothMatch</a>()
        {
            <b>var</b> <span id="r38 rd" class="r38 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r39 rd" class="r39 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;www.example.com&quot;</span>, };
            <b>var</b> <span id="r40 rd" class="r40 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;wiki.example.com&quot;</span>, <span class="i">RequestUrlPrefix</span> = <span class="s">&quot;foo&quot;</span> };
            <b>var</b> <span id="r41 rd" class="r41 r">settingsB</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Beta&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;wiki.example.com&quot;</span>, <span class="i">RequestUrlPrefix</span> = <span class="s">&quot;bar&quot;</span> };
            <b>var</b> <span id="r42 rd" class="r42 r">settingsG</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Gamma&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;wiki.example.com&quot;</span> };
            <b>var</b> <span id="r43 rd" class="r43 r">settingsD</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Delta&quot;</span>, <span class="i">RequestUrlPrefix</span> = <span class="s">&quot;Quux&quot;</span> };
            <span class="r38 r">table</span>.<span class="i">Add</span>(<span class="r39 r">settings</span>);
            <span class="r38 r">table</span>.<span class="i">Add</span>(<span class="r40 r">settingsA</span>);
            <span class="r38 r">table</span>.<span class="i">Add</span>(<span class="r41 r">settingsB</span>);
            <span class="r38 r">table</span>.<span class="i">Add</span>(<span class="r42 r">settingsG</span>);
            <span class="r38 r">table</span>.<span class="i">Add</span>(<span class="r43 r">settingsD</span>);
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r40 r">settingsA</span>, <span class="r38 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;wiki.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r41 r">settingsB</span>, <span class="r38 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;wiki.example.com&quot;</span>), <span class="s">&quot;/bar/foo&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r42 r">settingsG</span>, <span class="r38 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;wiki.example.com&quot;</span>), <span class="s">&quot;/&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r42 r">settingsG</span>, <span class="r38 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;wiki.example.com&quot;</span>), <span class="s">&quot;/baaz&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r39 r">settings</span>, <span class="r38 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;www.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r39 r">settings</span>, <span class="r38 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;www.example.com&quot;</span>), <span class="s">&quot;/bar/foo&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r39 r">settings</span>, <span class="r38 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;www.example.com&quot;</span>), <span class="s">&quot;/baaz&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Null</span>(<span class="r38 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;a.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r42 r">settingsG</span>, <span class="r38 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;wiki.example.com&quot;</span>), <span class="s">&quot;/quux/quad&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r39 r">settings</span>, <span class="r38 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;www.example.com&quot;</span>), <span class="s">&quot;/quux/quad&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r43 r">settingsD</span>, <span class="r38 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;a.example.com&quot;</span>), <span class="s">&quot;/quux/quad&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r42 r">settingsG</span>, <span class="r38 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;wiki.example.com&quot;</span>), <span class="s">&quot;/yarg&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r39 r">settings</span>, <span class="r38 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;www.example.com&quot;</span>), <span class="s">&quot;/yarg&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Null</span>(<span class="r38 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;a.example.com&quot;</span>), <span class="s">&quot;/yarg&quot;</span>));
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="27ff6d4431ce131e" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">PathAndHostMustMatchOnFullUrl</a>()
        {
            <b>var</b> <span id="r44 rd" class="r44 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r45 rd" class="r45 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;www.example.com&quot;</span>, };
            <b>var</b> <span id="r46 rd" class="r46 r">settingsB</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Beta&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;wiki.example.com&quot;</span>, <span class="i">RequestUrlPrefix</span> = <span class="s">&quot;bar&quot;</span> };
            <b>var</b> <span id="r47 rd" class="r47 r">settingsG</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Gamma&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;wiki.example.com&quot;</span> };
            <span class="r44 r">table</span>.<span class="i">Add</span>(<span class="r45 r">settings</span>);
            <span class="r44 r">table</span>.<span class="i">Add</span>(<span class="r46 r">settingsB</span>);
            <span class="r44 r">table</span>.<span class="i">Add</span>(<span class="r47 r">settingsG</span>);
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r46 r">settingsB</span>, <span class="r44 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;wiki.example.com&quot;</span>), <span class="s">&quot;/bar/foo&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r47 r">settingsG</span>, <span class="r44 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;wiki.example.com&quot;</span>), <span class="s">&quot;/&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r47 r">settingsG</span>, <span class="r44 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;wiki.example.com&quot;</span>), <span class="s">&quot;/baaz&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r47 r">settingsG</span>, <span class="r44 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;wiki.example.com&quot;</span>), <span class="s">&quot;/barbaz&quot;</span>));
        }
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="5cb7ce5fb871272c" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">PathAloneWillMatch</a>()
        {
            <b>var</b> <span id="r48 rd" class="r48 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r49 rd" class="r49 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlPrefix</span> = <span class="s">&quot;foo&quot;</span> };
            <span class="r48 r">table</span>.<span class="i">Add</span>(<span class="r49 r">settingsA</span>);
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r49 r">settingsA</span>, <span class="r48 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;wiki.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Null</span>(<span class="r48 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;wiki.example.com&quot;</span>), <span class="s">&quot;/bar/foo&quot;</span>));
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="b0d574e6453f7398" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">HostNameMatchesRightmostIfRequestIsLonger</a>()
        {
            <b>var</b> <span id="r50 rd" class="r50 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r51 rd" class="r51 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span> };
            <b>var</b> <span id="r52 rd" class="r52 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;example.com&quot;</span> };
            <span class="r50 r">table</span>.<span class="i">Add</span>(<span class="r51 r">settings</span>);
            <span class="r50 r">table</span>.<span class="i">Add</span>(<span class="r52 r">settingsA</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r51 r">settings</span>, <span class="r50 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;www.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r51 r">settings</span>, <span class="r50 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;wiki.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r52 r">settingsA</span>, <span class="r50 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r51 r">settings</span>, <span class="r50 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;localhost&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="f6caff2d6cd4a651" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">HostNameMatchesRightmostIfStar</a>()
        {
            <b>var</b> <span id="r53 rd" class="r53 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r54 rd" class="r54 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span> };
            <b>var</b> <span id="r55 rd" class="r55 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;*.example.com&quot;</span> };
            <span class="r53 r">table</span>.<span class="i">Add</span>(<span class="r54 r">settings</span>);
            <span class="r53 r">table</span>.<span class="i">Add</span>(<span class="r55 r">settingsA</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r55 r">settingsA</span>, <span class="r53 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;www.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r55 r">settingsA</span>, <span class="r53 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;wiki.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r55 r">settingsA</span>, <span class="r53 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r54 r">settings</span>, <span class="r53 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;localhost&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="61958b078cc8fc9c" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">LongestMatchingHostHasPriority</a>()
        {
            <b>var</b> <span id="r56 rd" class="r56 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r57 rd" class="r57 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span> };
            <b>var</b> <span id="r58 rd" class="r58 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;www.example.com&quot;</span> };
            <b>var</b> <span id="r59 rd" class="r59 r">settingsB</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Beta&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;*.example.com&quot;</span> };
            <b>var</b> <span id="r60 rd" class="r60 r">settingsG</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Gamma&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;wiki.example.com&quot;</span> };
            <span class="r56 r">table</span>.<span class="i">Add</span>(<span class="r57 r">settings</span>);
            <span class="r56 r">table</span>.<span class="i">Add</span>(<span class="r58 r">settingsA</span>);
            <span class="r56 r">table</span>.<span class="i">Add</span>(<span class="r59 r">settingsB</span>);
            <span class="r56 r">table</span>.<span class="i">Add</span>(<span class="r60 r">settingsG</span>);
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r58 r">settingsA</span>, <span class="r56 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;www.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r60 r">settingsG</span>, <span class="r56 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;wiki.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r59 r">settingsB</span>, <span class="r56 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;username.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r57 r">settings</span>, <span class="r56 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;localhost&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="97ef050d4aea12a2" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ShellNameUsedToDistinctThingsAsTheyAreAdded</a>()
        {
            <b>var</b> <span id="r61 rd" class="r61 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r62 rd" class="r62 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span> };
            <b>var</b> <span id="r63 rd" class="r63 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;removed.example.com&quot;</span> };
            <b>var</b> <span id="r64 rd" class="r64 r">settingsB</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;added.example.com&quot;</span> };
            <span class="r61 r">table</span>.<span class="i">Add</span>(<span class="r62 r">settings</span>);
            <span class="r61 r">table</span>.<span class="i">Add</span>(<span class="r63 r">settingsA</span>);
            <span class="r61 r">table</span>.<span class="i">Remove</span>(<span class="r63 r">settingsA</span>);
            <span class="r61 r">table</span>.<span class="i">Add</span>(<span class="r64 r">settingsB</span>);
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r62 r">settings</span>, <span class="r61 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;removed.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r64 r">settingsB</span>, <span class="r61 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;added.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r62 r">settings</span>, <span class="r61 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;localhost&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="7ca95949733a4e16" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">MultipleHostsOnShellAreAdded</a>()
        {
            <b>var</b> <span id="r65 rd" class="r65 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r66 rd" class="r66 r">settingsAlpha</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;a.example.com,b.example.com&quot;</span> };
            <b>var</b> <span id="r67 rd" class="r67 r">settingsBeta</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Beta&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;c.example.com,d.example.com,e.example.com&quot;</span> };
            <span class="r65 r">table</span>.<span class="i">Add</span>(<span class="r66 r">settingsAlpha</span>);
            <span class="r65 r">table</span>.<span class="i">Add</span>(<span class="r67 r">settingsBeta</span>);
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r66 r">settingsAlpha</span>, <span class="r65 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;a.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r66 r">settingsAlpha</span>, <span class="r65 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;b.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r67 r">settingsBeta</span>, <span class="r65 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;c.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r67 r">settingsBeta</span>, <span class="r65 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;d.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r67 r">settingsBeta</span>, <span class="r65 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;e.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="2aa041903055cd5e" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">HostContainsSpaces</a>()
        {
            <b>var</b> <span id="r68 rd" class="r68 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r69 rd" class="r69 r">settingsAlpha</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;   a.example.com,  b.example.com     &quot;</span> };
            <span class="r68 r">table</span>.<span class="i">Add</span>(<span class="r69 r">settingsAlpha</span>);
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r69 r">settingsAlpha</span>, <span class="r68 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;a.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r69 r">settingsAlpha</span>, <span class="r68 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;b.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="deaf2101d0579b9a" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">PortAreIgnoredIfNotSetInSettings</a>()
        {
            <b>var</b> <span id="r70 rd" class="r70 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r71 rd" class="r71 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span> };
            <b>var</b> <span id="r72 rd" class="r72 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;a.example.com&quot;</span> };
            <span class="r70 r">table</span>.<span class="i">Add</span>(<span class="r71 r">settings</span>);
            <span class="r70 r">table</span>.<span class="i">Add</span>(<span class="r72 r">settingsA</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r72 r">settingsA</span>, <span class="r70 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;a.example.com:80&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r71 r">settings</span>, <span class="r70 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;foo.com:80&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="fd040085cab22636" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ShouldNotFallBackToDefault</a>()
        {
            <b>var</b> <span id="r73 rd" class="r73 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r74 rd" class="r74 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span> };
            <b>var</b> <span id="r75 rd" class="r75 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;a.example.com&quot;</span> };
            <span class="r73 r">table</span>.<span class="i">Add</span>(<span class="r74 r">settings</span>);
            <span class="r73 r">table</span>.<span class="i">Add</span>(<span class="r75 r">settingsA</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r75 r">settingsA</span>, <span class="r73 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;a.example.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r74 r">settings</span>, <span class="r73 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;foo.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Null</span>(<span class="r73 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;foo.com&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>, <b>false</b>));
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="9dab84b7507b975e" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">PortAreNotIgnoredIfSetInSettings</a>()
        {
            <b>var</b> <span id="r76 rd" class="r76 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r77 rd" class="r77 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span> };
            <b>var</b> <span id="r78 rd" class="r78 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;a.example.com:80&quot;</span> };
            <b>var</b> <span id="r79 rd" class="r79 r">settingsB</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Beta&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;a.example.com:8080&quot;</span> };
            <span class="r76 r">table</span>.<span class="i">Add</span>(<span class="r77 r">settings</span>);
            <span class="r76 r">table</span>.<span class="i">Add</span>(<span class="r78 r">settingsA</span>);
            <span class="r76 r">table</span>.<span class="i">Add</span>(<span class="r79 r">settingsB</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r78 r">settingsA</span>, <span class="r76 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;a.example.com:80&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r79 r">settingsB</span>, <span class="r76 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;a.example.com:8080&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r77 r">settings</span>, <span class="r76 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;a.example.com:123&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Null</span>(<span class="r76 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;a.example.com:123&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>, <b>false</b>));
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="efa4ec5ebc82866f" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">IPv6AddressesAreSupported</a>()
        {
            <b>var</b> <span id="r80 rd" class="r80 r">table</span> = <b>new</b> <span class="i">RunningShellTable</span>();
            <b>var</b> <span id="r81 rd" class="r81 r">settings</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="i">ShellHelper</span>.<span class="i">DefaultShellName</span> };
            <b>var</b> <span id="r82 rd" class="r82 r">settingsA</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Alpha&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;[::abc]&quot;</span> };
            <b>var</b> <span id="r83 rd" class="r83 r">settingsB</span> = <b>new</b> <span class="i">ShellSettings</span> { <span class="i">Name</span> = <span class="s">&quot;Beta&quot;</span>, <span class="i">RequestUrlHost</span> = <span class="s">&quot;[::1]:123&quot;</span> };
 
            <span class="r80 r">table</span>.<span class="i">Add</span>(<span class="r81 r">settings</span>);
            <span class="r80 r">table</span>.<span class="i">Add</span>(<span class="r82 r">settingsA</span>);
            <span class="r80 r">table</span>.<span class="i">Add</span>(<span class="r83 r">settingsB</span>);
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r82 r">settingsA</span>, <span class="r80 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;::abc&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r82 r">settingsA</span>, <span class="r80 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;[::abc]&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r82 r">settingsA</span>, <span class="r80 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;[::ABC]&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r82 r">settingsA</span>, <span class="r80 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;[::abc]:&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r82 r">settingsA</span>, <span class="r80 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;[::abc]:123&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r83 r">settingsB</span>, <span class="r80 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;[::1]:123&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
 
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r81 r">settings</span>, <span class="r80 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;[::1]:321&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r81 r">settings</span>, <span class="r80 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;[::1]:&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r81 r">settings</span>, <span class="r80 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;[::1]&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r81 r">settings</span>, <span class="r80 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;::1&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="r81 r">settings</span>, <span class="r80 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;:&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>));
 
            <span class="i">Assert</span>.<span class="i">Null</span>(<span class="r80 r">table</span>.<span class="i">Match</span>(<b>new</b> <span class="t constructor">HostString</span>(<span class="s">&quot;::1&quot;</span>), <span class="s">&quot;/foo/bar&quot;</span>, <b>false</b>));
        }
    }
}
</pre></td></tr></table></div></body></html>
