<!DOCTYPE html>
<html><head><title>CommandParserTests.cs</title><link rel="stylesheet" href="../../../styles.css"><script src="../../../scripts.js"></script></head>
<body class="cB" onload="i(200);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#OrchardCore.Tests/Hosting/Console/CommandParserTests.cs" target="_top">Hosting\Console\CommandParserTests.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#OrchardCore.Tests" target="_top">test\OrchardCore.Tests\OrchardCore.Tests.csproj</a> (OrchardCore.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">OrchardCore</span>.<span class="i">Environment</span>.<span class="i">Commands</span>.<span class="i">Parameters</span>;
<b>using</b> <span class="i">Xunit</span>;
 
<b>namespace</b> <span class="i n">OrchardCore</span>.<span class="i n">Tests</span>.<span class="i n">Hosting</span>.<span class="i n">Console</span>
{
    <b>public class</b> <a id="b3c12d5cd7185688" href="../../R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="04f44522d9a8907a">CommandParserTests</span></a>
    {
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="99b83cdc2034c61c" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ParserUnderstandsSimpleArguments</a>()
        {
            <span class="c">// a b cdef</span>
            <span class="c">// =&gt; a</span>
            <span class="c">// =&gt; b</span>
            <span class="c">// =&gt; cdef</span>
            <b>var</b> <span id="r0 rd" class="r0 r">result</span> = <b>new</b> <span class="i">CommandParser</span>().<span class="i">Parse</span>(<span class="s">&quot;a b cdef&quot;</span>).<span class="i">ToList</span>();
            <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r0 r">result</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(3, <span class="r0 r">result</span>.<span class="i">Count</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;a&quot;</span>, <span class="r0 r">result</span>[0]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;b&quot;</span>, <span class="r0 r">result</span>[1]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;cdef&quot;</span>, <span class="r0 r">result</span>[2]);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="52bf0f82a88dd42b" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ParserIgnoresExtraSpaces</a>()
        {
            <span class="c">//  a    b    cdef</span>
            <span class="c">// =&gt; a</span>
            <span class="c">// =&gt; b</span>
            <span class="c">// =&gt; cdef</span>
            <b>var</b> <span id="r1 rd" class="r1 r">result</span> = <b>new</b> <span class="i">CommandParser</span>().<span class="i">Parse</span>(<span class="s">&quot;  a    b    cdef   &quot;</span>).<span class="i">ToList</span>();
            <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r1 r">result</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(3, <span class="r1 r">result</span>.<span class="i">Count</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;a&quot;</span>, <span class="r1 r">result</span>[0]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;b&quot;</span>, <span class="r1 r">result</span>[1]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;cdef&quot;</span>, <span class="r1 r">result</span>[2]);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="2e9e5b05a2c601f1" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ParserGroupsQuotedArguments</a>()
        {
            <span class="c">// feature enable &quot;a b cdef&quot;</span>
            <span class="c">// =&gt; feature</span>
            <span class="c">// =&gt; enable</span>
            <span class="c">// =&gt; a b cdef</span>
            <b>var</b> <span id="r2 rd" class="r2 r">result</span> = <b>new</b> <span class="i">CommandParser</span>().<span class="i">Parse</span>(<span class="s">&quot;feature enable \&quot;a b cdef\&quot;&quot;</span>).<span class="i">ToList</span>();
            <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r2 r">result</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(3, <span class="r2 r">result</span>.<span class="i">Count</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;feature&quot;</span>, <span class="r2 r">result</span>[0]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;enable&quot;</span>, <span class="r2 r">result</span>[1]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;a b cdef&quot;</span>, <span class="r2 r">result</span>[2]);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="f57accd6cf07cff3" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ParserUnderstandsQuotesInsideArgument</a>()
        {
            <span class="c">// feature enable /foo:&quot;a b cdef&quot;</span>
            <span class="c">// =&gt; feature</span>
            <span class="c">// =&gt; enable</span>
            <span class="c">// =&gt; /foo:a b cdef</span>
            <b>var</b> <span id="r3 rd" class="r3 r">result</span> = <b>new</b> <span class="i">CommandParser</span>().<span class="i">Parse</span>(<span class="s">&quot;feature enable /foo:\&quot;a b cdef\&quot;&quot;</span>).<span class="i">ToList</span>();
            <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r3 r">result</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(3, <span class="r3 r">result</span>.<span class="i">Count</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;feature&quot;</span>, <span class="r3 r">result</span>[0]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;enable&quot;</span>, <span class="r3 r">result</span>[1]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;/foo:a b cdef&quot;</span>, <span class="r3 r">result</span>[2]);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="caabbbe5f54255e2" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ParserBackslashEscapesQuote</a>()
        {
            <span class="c">// feature enable \&quot;a b cdef\&quot;</span>
            <span class="c">// =&gt; feature</span>
            <span class="c">// =&gt; enable</span>
            <span class="c">// =&gt; &quot;a</span>
            <span class="c">// =&gt; b</span>
            <span class="c">// =&gt; cdef&quot;</span>
            <b>var</b> <span id="r4 rd" class="r4 r">result</span> = <b>new</b> <span class="i">CommandParser</span>().<span class="i">Parse</span>(<span class="s">&quot;feature enable \\\&quot;a b cdef\\\&quot;&quot;</span>).<span class="i">ToList</span>();
            <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r4 r">result</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(5, <span class="r4 r">result</span>.<span class="i">Count</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;feature&quot;</span>, <span class="r4 r">result</span>[0]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;enable&quot;</span>, <span class="r4 r">result</span>[1]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;\&quot;a&quot;</span>, <span class="r4 r">result</span>[2]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;b&quot;</span>, <span class="r4 r">result</span>[3]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;cdef\&quot;&quot;</span>, <span class="r4 r">result</span>[4]);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="f2e3ec1cca9cdadd" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ParserBackslashDoesnotEscapeBackslash</a>()
        {
            <span class="c">// feature enable \\a</span>
            <span class="c">// =&gt; feature</span>
            <span class="c">// =&gt; enable</span>
            <span class="c">// =&gt; \\a</span>
            <b>var</b> <span id="r5 rd" class="r5 r">result</span> = <b>new</b> <span class="i">CommandParser</span>().<span class="i">Parse</span>(<span class="s">&quot;feature enable \\\\a&quot;</span>).<span class="i">ToList</span>();
            <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r5 r">result</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(3, <span class="r5 r">result</span>.<span class="i">Count</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;feature&quot;</span>, <span class="r5 r">result</span>[0]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;enable&quot;</span>, <span class="r5 r">result</span>[1]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;\\\\a&quot;</span>, <span class="r5 r">result</span>[2]);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="a18ffb43d4d69fa7" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ParserBackslashDoesnotEscapeOtherCharacters</a>()
        {
            <span class="c">// feature enable \a</span>
            <span class="c">// =&gt; feature</span>
            <span class="c">// =&gt; enable</span>
            <span class="c">// =&gt; \a</span>
            <b>var</b> <span id="r6 rd" class="r6 r">result</span> = <b>new</b> <span class="i">CommandParser</span>().<span class="i">Parse</span>(<span class="s">&quot;feature enable \\a&quot;</span>).<span class="i">ToList</span>();
            <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r6 r">result</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(3, <span class="r6 r">result</span>.<span class="i">Count</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;feature&quot;</span>, <span class="r6 r">result</span>[0]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;enable&quot;</span>, <span class="r6 r">result</span>[1]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;\\a&quot;</span>, <span class="r6 r">result</span>[2]);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="3dac2fa259066c58" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ParserUnderstandsTrailingBackslash</a>()
        {
            <span class="c">// feature enable \</span>
            <span class="c">// =&gt; feature</span>
            <span class="c">// =&gt; enable</span>
            <span class="c">// =&gt; \</span>
            <b>var</b> <span id="r7 rd" class="r7 r">result</span> = <b>new</b> <span class="i">CommandParser</span>().<span class="i">Parse</span>(<span class="s">&quot;feature enable \\&quot;</span>).<span class="i">ToList</span>();
            <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r7 r">result</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(3, <span class="r7 r">result</span>.<span class="i">Count</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;feature&quot;</span>, <span class="r7 r">result</span>[0]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;enable&quot;</span>, <span class="r7 r">result</span>[1]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;\\&quot;</span>, <span class="r7 r">result</span>[2]);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="61c57e244059f79f" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ParserUnderstandsTrailingBackslash2</a>()
        {
            <span class="c">// feature enable b\</span>
            <span class="c">// =&gt; feature</span>
            <span class="c">// =&gt; enable</span>
            <span class="c">// =&gt; b\</span>
            <b>var</b> <span id="r8 rd" class="r8 r">result</span> = <b>new</b> <span class="i">CommandParser</span>().<span class="i">Parse</span>(<span class="s">&quot;feature enable b\\&quot;</span>).<span class="i">ToList</span>();
            <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r8 r">result</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(3, <span class="r8 r">result</span>.<span class="i">Count</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;feature&quot;</span>, <span class="r8 r">result</span>[0]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;enable&quot;</span>, <span class="r8 r">result</span>[1]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;b\\&quot;</span>, <span class="r8 r">result</span>[2]);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="588869289801d844" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ParserUnderstandsEmptyArgument</a>()
        {
            <span class="c">// feature enable &quot;&quot;</span>
            <span class="c">// =&gt; feature</span>
            <span class="c">// =&gt; enable</span>
            <span class="c">// =&gt; &lt;empty arg&gt;</span>
            <b>var</b> <span id="r9 rd" class="r9 r">result</span> = <b>new</b> <span class="i">CommandParser</span>().<span class="i">Parse</span>(<span class="s">&quot;feature enable \&quot;\&quot;&quot;</span>).<span class="i">ToList</span>();
            <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r9 r">result</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(3, <span class="r9 r">result</span>.<span class="i">Count</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;feature&quot;</span>, <span class="r9 r">result</span>[0]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;enable&quot;</span>, <span class="r9 r">result</span>[1]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;&quot;</span>, <span class="r9 r">result</span>[2]);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="529126ca7d0dfbef" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ParserUnderstandsTrailingQuote</a>()
        {
            <span class="c">// feature enable &quot;</span>
            <span class="c">// =&gt; feature</span>
            <span class="c">// =&gt; enable</span>
            <span class="c">// =&gt; &lt;empty arg&gt;</span>
            <b>var</b> <span id="r10 rd" class="r10 r">result</span> = <b>new</b> <span class="i">CommandParser</span>().<span class="i">Parse</span>(<span class="s">&quot;feature enable \&quot;&quot;</span>).<span class="i">ToList</span>();
            <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r10 r">result</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(3, <span class="r10 r">result</span>.<span class="i">Count</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;feature&quot;</span>, <span class="r10 r">result</span>[0]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;enable&quot;</span>, <span class="r10 r">result</span>[1]);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;&quot;</span>, <span class="r10 r">result</span>[2]);
        }
 
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="aa9adcb1c4b94bbb" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ParserUnderstandsEmptyArgument2</a>()
        {
            <span class="c">// &quot;</span>
            <span class="c">// =&gt; &lt;empty arg&gt;</span>
            <b>var</b> <span id="r11 rd" class="r11 r">result</span> = <b>new</b> <span class="i">CommandParser</span>().<span class="i">Parse</span>(<span class="s">&quot;\&quot;&quot;</span>).<span class="i">ToList</span>();
            <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r11 r">result</span>);
            <span class="i">Assert</span>.<span class="i">Single</span>(<span class="r11 r">result</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;&quot;</span>, <span class="r11 r">result</span>[0]);
        }
        [<span class="i">Fact</span>]
        <b>public void</b> <a id="597fda0f80d538ac" href="../../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">ParserUnderstandsEmptyArgument3</a>()
        {
            <span class="c">// &quot;&quot;</span>
            <span class="c">// =&gt; &lt;empty arg&gt;</span>
            <b>var</b> <span id="r12 rd" class="r12 r">result</span> = <b>new</b> <span class="i">CommandParser</span>().<span class="i">Parse</span>(<span class="s">&quot;\&quot;\&quot;&quot;</span>).<span class="i">ToList</span>();
            <span class="i">Assert</span>.<span class="i">NotNull</span>(<span class="r12 r">result</span>);
            <span class="i">Assert</span>.<span class="i">Single</span>(<span class="r12 r">result</span>);
            <span class="i">Assert</span>.<span class="i">Equal</span>(<span class="s">&quot;&quot;</span>, <span class="r12 r">result</span>[0]);
        }
    }
}
</pre></td></tr></table></div></body></html>
